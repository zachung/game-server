!function r(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return u(a[t][1][e]||e)},o,o.exports,r,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){var i=e("./lib/keyboard"),o=e("./lib/locale"),r=e("./lib/key-combo"),a=new i;a.setLocale("us",e("./locales/us")),(n=t.exports=a).Keyboard=i,n.Locale=o,n.KeyCombo=r},{"./lib/key-combo":2,"./lib/keyboard":3,"./lib/locale":4,"./locales/us":5}],2:[function(e,t,n){function l(e){this.sourceStr=e,this.subCombos=l.parseComboStr(e),this.keyNames=this.subCombos.reduce(function(e,t){return e.concat(t)},[])}l.sequenceDeliminator=">>",l.comboDeliminator=">",l.keyDeliminator="+",l.parseComboStr=function(e){for(var t=l._splitStr(e,l.comboDeliminator),n=[],i=0;i<t.length;i+=1)n.push(l._splitStr(t[i],l.keyDeliminator));return n},l.prototype.check=function(e){for(var t=0,n=0;n<this.subCombos.length;n+=1)if(-1===(t=this._checkSubCombo(this.subCombos[n],t,e)))return!1;return!0},l.prototype.isEqual=function(e){if(!e||"string"!=typeof e&&"object"!=typeof e)return!1;if("string"==typeof e&&(e=new l(e)),this.subCombos.length!==e.subCombos.length)return!1;for(var t=0;t<this.subCombos.length;t+=1)if(this.subCombos[t].length!==e.subCombos[t].length)return!1;for(t=0;t<this.subCombos.length;t+=1){for(var n=this.subCombos[t],i=e.subCombos[t].slice(0),o=0;o<n.length;o+=1){var r=n[o],a=i.indexOf(r);-1<a&&i.splice(a,1)}if(0!==i.length)return!1}return!0},l._splitStr=function(e,t){for(var n=e,i=t,o="",r=[],a=0;a<n.length;a+=1)0<a&&n[a]===i&&"\\"!==n[a-1]&&(r.push(o.trim()),o="",a+=1),o+=n[a];return o&&r.push(o.trim()),r},l.prototype._checkSubCombo=function(e,t,n){e=e.slice(0),n=n.slice(t);for(var i=t,o=0;o<e.length;o+=1){var r=e[o];if("\\"===r[0]){var a=r.slice(1);a!==l.comboDeliminator&&a!==l.keyDeliminator||(r=a)}var s=n.indexOf(r);if(-1<s&&(e.splice(o,1),o-=1,i<s&&(i=s),0===e.length))return i}return-1},t.exports=l},{}],3:[function(t,n,e){(function(s){var i=t("./locale"),c=t("./key-combo");function e(e,t,n,i){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(e,t,n,i)}e.prototype.setLocale=function(e,t){var n=null;"string"==typeof e?t?t(n=new i(e),this._targetPlatform,this._targetUserAgent):n=this._locales[e]||null:e=(n=e)._localeName,this._locale=n,(this._locales[e]=n)&&(this._locale.pressedKeys=n.pressedKeys)},e.prototype.getLocale=function(e){return e||(e=this._locale.localeName),this._locales[e]||null},e.prototype.addListener=e.prototype.bind=function(e,t,n,i){if(null!==e&&"function"!=typeof e||(i=n,n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var o=0;o<e.length;o+=1)this.bind(e[o],t,n);else this._listeners.push({keyCombo:e?new c(e):null,pressHandler:t||null,releaseHandler:n||null,preventRepeat:i||!1,preventRepeatByDefault:i||!1})},e.prototype.on=e.prototype.bind,e.prototype.removeListener=e.prototype.unbind=function(e,t,n){if(null!==e&&"function"!=typeof e||(n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var i=0;i<e.length;i+=1)this.unbind(e[i],t,n);else for(i=0;i<this._listeners.length;i+=1){var o=this._listeners[i],r=!e&&!o.keyCombo||o.keyCombo&&o.keyCombo.isEqual(e),a=!t&&!n||!t&&!o.pressHandler||t===o.pressHandler,s=!t&&!n||!n&&!o.releaseHandler||n===o.releaseHandler;r&&a&&s&&(this._listeners.splice(i,1),i-=1)}},e.prototype.off=e.prototype.unbind,e.prototype.setContext=function(e){this._locale&&this.releaseAllKeys(),this._contexts[e]||(this._contexts[e]=[]),this._listeners=this._contexts[e],this._currentContext=e},e.prototype.getContext=function(){return this._currentContext},e.prototype.withContext=function(e,t){var n=this.getContext();this.setContext(e),t(),this.setContext(n)},e.prototype.watch=function(e,t,n,i){var o=this;if(this.stop(),!e){if(!s.addEventListener&&!s.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");e=s}if("number"==typeof e.nodeType&&(i=n,n=t,t=e,e=s),!e.addEventListener&&!e.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!e.addEventListener;var r=e.navigator&&e.navigator.userAgent||"",a=e.navigator&&e.navigator.platform||"";t&&null!==t||(t=e.document),n&&null!==n||(n=a),i&&null!==i||(i=r),this._targetKeyDownBinding=function(e){o.pressKey(e.keyCode,e),o._handleCommandBug(e,a)},this._targetKeyUpBinding=function(e){o.releaseKey(e.keyCode,e)},this._targetResetBinding=function(e){o.releaseAllKeys(e)},this._bindEvent(t,"keydown",this._targetKeyDownBinding),this._bindEvent(t,"keyup",this._targetKeyUpBinding),this._bindEvent(e,"focus",this._targetResetBinding),this._bindEvent(e,"blur",this._targetResetBinding),this._targetElement=t,this._targetWindow=e,this._targetPlatform=n,this._targetUserAgent=i},e.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},e.prototype.pressKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(e),this._applyBindings(t)}},e.prototype.releaseKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(e),this._clearBindings(t)}},e.prototype.releaseAllKeys=function(e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(e)}},e.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},e.prototype.resume=function(){this._paused=!1},e.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},e.prototype._bindEvent=function(e,t,n){return this._isModernBrowser?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},e.prototype._unbindEvent=function(e,t,n){return this._isModernBrowser?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e.prototype._getGroupedListeners=function(){var i=[],o=[],e=this._listeners;return"global"!==this._currentContext&&(e=[].concat(e,this._contexts.global)),e.sort(function(e,t){return(t.keyCombo?t.keyCombo.keyNames.length:0)-(e.keyCombo?e.keyCombo.keyNames.length:0)}).forEach(function(e){for(var t=-1,n=0;n<o.length;n+=1)(null===o[n]&&null===e.keyCombo||null!==o[n]&&o[n].isEqual(e.keyCombo))&&(t=n);-1===t&&(t=o.length,o.push(e.keyCombo)),i[t]||(i[t]=[]),i[t].push(e)}),i},e.prototype._applyBindings=function(e){var t=!1;e||(e={}),e.preventRepeat=function(){t=!0},e.pressedKeys=this._locale.pressedKeys.slice(0);for(var n=this._locale.pressedKeys.slice(0),i=this._getGroupedListeners(),o=0;o<i.length;o+=1){var r=i[o],a=r[0].keyCombo;if(null===a||a.check(n)){for(var s=0;s<r.length;s+=1){var l=r[s];null===a&&(l={keyCombo:new c(n.join("+")),pressHandler:l.pressHandler,releaseHandler:l.releaseHandler,preventRepeat:l.preventRepeat,preventRepeatByDefault:l.preventRepeatByDefault}),l.pressHandler&&!l.preventRepeat&&(l.pressHandler.call(this,e),t&&(l.preventRepeat=t,t=!1)),l.releaseHandler&&-1===this._appliedListeners.indexOf(l)&&this._appliedListeners.push(l)}if(a)for(s=0;s<a.keyNames.length;s+=1){var u=n.indexOf(a.keyNames[s]);-1!==u&&(n.splice(u,1),s-=1)}}}},e.prototype._clearBindings=function(e){e||(e={});for(var t=0;t<this._appliedListeners.length;t+=1){var n=this._appliedListeners[t],i=n.keyCombo;if(null===i||!i.check(this._locale.pressedKeys)){if(this._callerHandler!==n.releaseHandler){var o=this._callerHandler;this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,e),this._callerHandler=o}this._appliedListeners.splice(t,1),t-=1}}},e.prototype._handleCommandBug=function(e,t){t.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(e.keyCode)[0])&&this._targetKeyUpBinding(e)},n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./key-combo":2,"./locale":4}],4:[function(e,t,n){var o=e("./key-combo");function i(e){this.localeName=e,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}i.prototype.bindKeyCode=function(e,t){"string"==typeof t&&(t=[t]),this._keyMap[e]=t},i.prototype.bindMacro=function(e,t){"string"==typeof t&&(t=[t]);var n=null;"function"==typeof t&&(n=t,t=null);var i={keyCombo:new o(e),keyNames:t,handler:n};this._macros.push(i)},i.prototype.getKeyCodes=function(e){var t=[];for(var n in this._keyMap){-1<this._keyMap[n].indexOf(e)&&t.push(0|n)}return t},i.prototype.getKeyNames=function(e){return this._keyMap[e]||[]},i.prototype.setKillKey=function(e){if("string"!=typeof e)this._killKeyCodes.push(e);else for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.setKillKey(t[n])},i.prototype.pressKey=function(e){if("string"!=typeof e){var t=this.getKeyNames(e);for(i=0;i<t.length;i+=1)-1===this.pressedKeys.indexOf(t[i])&&this.pressedKeys.push(t[i]);this._applyMacros()}else for(var n=this.getKeyCodes(e),i=0;i<n.length;i+=1)this.pressKey(n[i])},i.prototype.releaseKey=function(e){if("string"==typeof e)for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.releaseKey(t[n]);else{var i=this.getKeyNames(e);if(-1<this._killKeyCodes.indexOf(e))this.pressedKeys.length=0;else for(n=0;n<i.length;n+=1){var o=this.pressedKeys.indexOf(i[n]);-1<o&&this.pressedKeys.splice(o,1)}this._clearMacros()}},i.prototype._applyMacros=function(){for(var e=this._macros.slice(0),t=0;t<e.length;t+=1){var n=e[t];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var i=0;i<n.keyNames.length;i+=1)-1===this.pressedKeys.indexOf(n.keyNames[i])&&this.pressedKeys.push(n.keyNames[i]);this._appliedMacros.push(n)}}},i.prototype._clearMacros=function(){for(var e=0;e<this._appliedMacros.length;e+=1){var t=this._appliedMacros[e];if(!t.keyCombo.check(this.pressedKeys)){for(var n=0;n<t.keyNames.length;n+=1){var i=this.pressedKeys.indexOf(t.keyNames[n]);-1<i&&this.pressedKeys.splice(i,1)}t.handler&&(t.keyNames=null),this._appliedMacros.splice(e,1),e-=1}}},t.exports=i},{"./key-combo":2}],5:[function(e,t,n){t.exports=function(e,t,n){e.bindKeyCode(3,["cancel"]),e.bindKeyCode(8,["backspace"]),e.bindKeyCode(9,["tab"]),e.bindKeyCode(12,["clear"]),e.bindKeyCode(13,["enter"]),e.bindKeyCode(16,["shift"]),e.bindKeyCode(17,["ctrl"]),e.bindKeyCode(18,["alt","menu"]),e.bindKeyCode(19,["pause","break"]),e.bindKeyCode(20,["capslock"]),e.bindKeyCode(27,["escape","esc"]),e.bindKeyCode(32,["space","spacebar"]),e.bindKeyCode(33,["pageup"]),e.bindKeyCode(34,["pagedown"]),e.bindKeyCode(35,["end"]),e.bindKeyCode(36,["home"]),e.bindKeyCode(37,["left"]),e.bindKeyCode(38,["up"]),e.bindKeyCode(39,["right"]),e.bindKeyCode(40,["down"]),e.bindKeyCode(41,["select"]),e.bindKeyCode(42,["printscreen"]),e.bindKeyCode(43,["execute"]),e.bindKeyCode(44,["snapshot"]),e.bindKeyCode(45,["insert","ins"]),e.bindKeyCode(46,["delete","del"]),e.bindKeyCode(47,["help"]),e.bindKeyCode(145,["scrolllock","scroll"]),e.bindKeyCode(187,["equal","equalsign","="]),e.bindKeyCode(188,["comma",","]),e.bindKeyCode(190,["period","."]),e.bindKeyCode(191,["slash","forwardslash","/"]),e.bindKeyCode(192,["graveaccent","`"]),e.bindKeyCode(219,["openbracket","["]),e.bindKeyCode(220,["backslash","\\"]),e.bindKeyCode(221,["closebracket","]"]),e.bindKeyCode(222,["apostrophe","'"]),e.bindKeyCode(48,["zero","0"]),e.bindKeyCode(49,["one","1"]),e.bindKeyCode(50,["two","2"]),e.bindKeyCode(51,["three","3"]),e.bindKeyCode(52,["four","4"]),e.bindKeyCode(53,["five","5"]),e.bindKeyCode(54,["six","6"]),e.bindKeyCode(55,["seven","7"]),e.bindKeyCode(56,["eight","8"]),e.bindKeyCode(57,["nine","9"]),e.bindKeyCode(96,["numzero","num0"]),e.bindKeyCode(97,["numone","num1"]),e.bindKeyCode(98,["numtwo","num2"]),e.bindKeyCode(99,["numthree","num3"]),e.bindKeyCode(100,["numfour","num4"]),e.bindKeyCode(101,["numfive","num5"]),e.bindKeyCode(102,["numsix","num6"]),e.bindKeyCode(103,["numseven","num7"]),e.bindKeyCode(104,["numeight","num8"]),e.bindKeyCode(105,["numnine","num9"]),e.bindKeyCode(106,["nummultiply","num*"]),e.bindKeyCode(107,["numadd","num+"]),e.bindKeyCode(108,["numenter"]),e.bindKeyCode(109,["numsubtract","num-"]),e.bindKeyCode(110,["numdecimal","num."]),e.bindKeyCode(111,["numdivide","num/"]),e.bindKeyCode(144,["numlock","num"]),e.bindKeyCode(112,["f1"]),e.bindKeyCode(113,["f2"]),e.bindKeyCode(114,["f3"]),e.bindKeyCode(115,["f4"]),e.bindKeyCode(116,["f5"]),e.bindKeyCode(117,["f6"]),e.bindKeyCode(118,["f7"]),e.bindKeyCode(119,["f8"]),e.bindKeyCode(120,["f9"]),e.bindKeyCode(121,["f10"]),e.bindKeyCode(122,["f11"]),e.bindKeyCode(123,["f12"]),e.bindMacro("shift + `",["tilde","~"]),e.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),e.bindMacro("shift + 2",["at","@"]),e.bindMacro("shift + 3",["number","#"]),e.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),e.bindMacro("shift + 5",["percent","%"]),e.bindMacro("shift + 6",["caret","^"]),e.bindMacro("shift + 7",["ampersand","and","&"]),e.bindMacro("shift + 8",["asterisk","*"]),e.bindMacro("shift + 9",["openparen","("]),e.bindMacro("shift + 0",["closeparen",")"]),e.bindMacro("shift + -",["underscore","_"]),e.bindMacro("shift + =",["plus","+"]),e.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),e.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),e.bindMacro("shift + \\",["verticalbar","|"]),e.bindMacro("shift + ;",["colon",":"]),e.bindMacro("shift + '",["quotationmark","'"]),e.bindMacro("shift + !,",["openanglebracket","<"]),e.bindMacro("shift + .",["closeanglebracket",">"]),e.bindMacro("shift + /",["questionmark","?"]),t.match("Mac")?e.bindMacro("command",["mod","modifier"]):e.bindMacro("ctrl",["mod","modifier"]);for(var i=65;i<=90;i+=1){var o=String.fromCharCode(i+32),r=String.fromCharCode(i);e.bindKeyCode(i,o),e.bindMacro("shift + "+o,r),e.bindMacro("capslock + "+o,r)}var a,s,l=n.match("Firefox")?59:186,u=n.match("Firefox")?173:189;t.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(a=91,s=93):t.match("Mac")&&n.match("Opera")?s=a=17:t.match("Mac")&&n.match("Firefox")&&(s=a=224),e.bindKeyCode(l,["semicolon",";"]),e.bindKeyCode(u,["dash","-"]),e.bindKeyCode(a,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),e.bindKeyCode(s,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),e.setKillKey("command")}},{}],6:[function(e,t,n){"use strict";var i=r(e("./lib/Application")),o=r(e("./scenes/LoadingScene"));function r(e){return e&&e.__esModule?e:{default:e}}var a=new i.default({width:256,height:256,antialias:!0,transparent:!1,resolution:1,autoStart:!1});a.renderer.view.style.position="absolute",a.renderer.view.style.display="block",a.renderer.autoResize=!0,a.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(a.view),a.changeStage(),a.start(),a.changeScene(o.default)},{"./lib/Application":9,"./scenes/LoadingScene":26}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.CEIL_SIZE=16;var i=n.ABILITY_MOVE=Symbol("move"),o=n.ABILITY_CAMERA=Symbol("camera"),r=n.ABILITY_OPERATE=Symbol("operate"),a=n.ABILITY_KEY_MOVE=Symbol("key-move"),s=n.ABILITY_LIFE=Symbol("life");n.ABILITIES_ALL=[i,o,r,a,s],n.STATIC="static",n.STAY="stay",n.REPLY="reply"},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.LEFT="a",n.UP="w",n.RIGHT="d",n.DOWN="s"},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),s=e("./PIXI");var o=function(e){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Application),i(a,[{key:"changeStage",value:function(){this.stage=new s.display.Stage}},{key:"changeScene",value:function(e,t){this.currentScene&&(this.currentScene.destroy(),this.stage.removeChild(this.currentScene));var n=new e(t);this.stage.addChild(n),n.create(),n.on("changeScene",this.changeScene.bind(this)),this.currentScene=n}},{key:"start",value:function(){for(var e,t=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];(e=function e(t,n,i){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,i)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(i):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this)).call.apply(e,[this].concat(i));var r=this.renderer.view;this.stage.addChild((new s.Graphics).drawRect(0,0,r.width,r.height)),this.ticker.add(function(e){return t.gameLoop.bind(t)(e)})}},{key:"gameLoop",value:function(e){this.currentScene.tick(e)}}]),a}();n.default=o},{"./PIXI":13}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=new Bump(PIXI)},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("./PIXI"),c=e("../config/constants"),f=e("./utils"),a=e("../lib/Bump"),s=(i=a)&&i.__esModule?i:{default:i};var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.collideObjects=[],e.replyObjects=[],e.map=new r.Container,e.addChild(e.map),e.once("added",e.enableFog.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Container),o(t,[{key:"enableFog",value:function(){var e=new r.display.Layer;e.on("display",function(e){e.blendMode=r.BLEND_MODES.ADD}),e.useRenderTexture=!0,e.clearColor=[0,0,0,1],this.addChild(e);var t=new r.Sprite(e.getRenderTexture());t.blendMode=r.BLEND_MODES.MULTIPLY,this.addChild(t),this.map.lighting=e}},{key:"disableFog",value:function(){this.lighting.clearColor=[1,1,1,1]}},{key:"load",value:function(e){for(var i=this,t=e.tiles,n=e.cols,o=e.rows,r=e.items,a=0;a<n;a++)for(var s=0;s<o;s++){var l=t[s*n+a],u=(0,f.instanceByItemId)(l);switch(u.position.set(a*c.CEIL_SIZE,s*c.CEIL_SIZE),u.type){case c.STAY:this.collideObjects.push(u)}this.map.addChild(u)}r.forEach(function(e,t){var n=(0,f.instanceByItemId)(e.Type,e.params);switch(n.position.set(e.pos[0]*c.CEIL_SIZE,e.pos[1]*c.CEIL_SIZE),n.type){case c.STAY:i.collideObjects.push(n);break;default:i.replyObjects.push(n)}n.on("take",function(){i.removeChild(n),n.destroy();var e=i.replyObjects.indexOf(n);i.replyObjects.splice(e,1),delete r[t]}),n.on("use",function(){return i.emit("use",n)}),i.map.addChild(n)})}},{key:"addPlayer",value:function(e,t){e.position.set(t[0]*c.CEIL_SIZE,t[1]*c.CEIL_SIZE),this.map.addChild(e),this.player=e}},{key:"tick",value:function(e){var t=this;this.player.tick(e),this.collideObjects.forEach(function(e){s.default.rectangleCollision(t.player,e,!0)&&e.emit("collide",t.player)}),this.replyObjects.forEach(function(e){s.default.hitTestRectangle(t.player,e)&&e.emit("collide",t.player)})}},{key:"position",get:function(){return this.map.position}},{key:"x",get:function(){return this.map.x},set:function(e){this.map.x=e}},{key:"y",get:function(){return this.map.y},set:function(e){this.map.y=e}}]),t}();n.default=l},{"../config/constants":7,"../lib/Bump":10,"./PIXI":13,"./utils":15}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();var o=[],r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getList",value:function(){return o}},{key:"add",value:function(e){o.push(e),setTimeout(o.pop.bind(o),1e3)}}]),e}();n.default=r},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Application=PIXI.Application,n.Container=PIXI.Container,n.loader=PIXI.loader,n.resources=PIXI.loader.resources,n.Sprite=PIXI.Sprite,n.Text=PIXI.Text,n.TextStyle=PIXI.TextStyle,n.Graphics=PIXI.Graphics,n.BLEND_MODES=PIXI.BLEND_MODES,n.display=PIXI.display,n.utils=PIXI.utils},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=e("./PIXI");var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Container),i(t,[{key:"create",value:function(){}},{key:"destroy",value:function(){}},{key:"tick",value:function(e){}}]),t}();n.default=r},{"./PIXI":13}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.instanceByItemId=function(e,t){return new f[e](t)},n.instanceByAbilityId=function(e,t){return new d[e](t)};var i=c(e("../objects/Wall")),o=c(e("../objects/Grass")),r=c(e("../objects/Treasure")),a=c(e("../objects/Door")),s=c(e("../objects/abilities/Move")),l=c(e("../objects/abilities/Camera")),u=c(e("../objects/abilities/Operate"));function c(e){return e&&e.__esModule?e:{default:e}}var f=[o.default,i.default,r.default,a.default],d=[s.default,l.default,u.default]},{"../objects/Door":17,"../objects/Grass":19,"../objects/Treasure":20,"../objects/Wall":21,"../objects/abilities/Camera":22,"../objects/abilities/Move":24,"../objects/abilities/Operate":25}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("./GameObject"),s=(i=a)&&i.__esModule?i:{default:i};var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.resources["images/town_tiles.json"].textures["wall.png"]));return e.dx=0,e.dy=0,e.tickAbilities={},e.abilities={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"takeAbility",value:function(e){e.hasToReplace(this)&&e.carryBy(this)}},{key:"toString",value:function(){return"cat"}},{key:"tick",value:function(t){var n=this;Object.values(this.tickAbilities).forEach(function(e){return e.tick(t,n)})}}]),t}();n.default=l},{"../lib/PIXI":13,"./GameObject":18}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("./GameObject"),s=(i=a)&&i.__esModule?i:{default:i},l=e("../config/constants");var u=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r.resources["images/town_tiles.json"].textures["door.png"]));return t.map=e[0],t.toPosition=e[1],t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"actionWith",value:function(e){var t=e.abilities[l.ABILITY_OPERATE];t?t.use(e,this):this.say([e.toString()," dosen't has ability to use this door ",this.map,"."].join(""))}},{key:l.ABILITY_OPERATE,value:function(){this.say(["Get in ",this.map," now."].join("")),this.emit("use")}},{key:"type",get:function(){return l.STAY}}]),n}();n.default=u},{"../config/constants":7,"../lib/PIXI":13,"./GameObject":18}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("../config/constants"),s=e("../lib/Messages"),l=(i=s)&&i.__esModule?i:{default:i};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Sprite),o(t,[{key:"say",value:function(e){l.default.add(e),console.log(e)}},{key:"type",get:function(){return a.STATIC}}]),t}();n.default=u},{"../config/constants":7,"../lib/Messages":12,"../lib/PIXI":13}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("./GameObject"),s=(i=a)&&i.__esModule?i:{default:i},l=e("../config/constants");var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.resources["images/town_tiles.json"].textures["grass.png"]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"type",get:function(){return l.STATIC}}]),t}();n.default=u},{"../config/constants":7,"../lib/PIXI":13,"./GameObject":18}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("./GameObject"),s=(i=a)&&i.__esModule?i:{default:i},l=e("../config/constants"),u=e("../lib/utils");var c=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r.resources["images/town_tiles.json"].textures["treasure.png"]));return t.inventories=e.map(function(e){return(0,u.instanceByAbilityId)(e[0],e[1])}),t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,s.default),o(n,[{key:"toString",value:function(){return["treasure: [",this.inventories.join(", "),"]"].join("")}},{key:"actionWith",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"takeAbility";"function"==typeof t[n]&&(this.inventories.forEach(function(e){return t[n](e)}),this.say([t.toString()," taked ",this.toString()].join("")),this.emit("take"))}},{key:"type",get:function(){return l.REPLY}}]),n}();n.default=c},{"../config/constants":7,"../lib/PIXI":13,"../lib/utils":15,"./GameObject":18}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=e("../lib/PIXI"),a=e("./GameObject"),s=(i=a)&&i.__esModule?i:{default:i},l=e("../config/constants");var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.resources["images/town_tiles.json"].textures["wall.png"]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"type",get:function(){return l.STAY}}]),t}();n.default=u},{"../config/constants":7,"../lib/PIXI":13,"./GameObject":18}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("../../lib/PIXI"),s=e("../../config/constants");var l=Symbol("light"),o=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.radius=e}return i(t,[{key:"hasToReplace",value:function(e){var t=e.abilities[this.type];return!t||this.radius>=t.radius}},{key:"carryBy",value:function(t){var n=this;t.abilities[this.type]&&this.dropBy(t),t.abilities[this.type]=this,t.parent?this.setup(t,t.parent):t.once("added",function(e){return n.setup(t,e)})}},{key:"setup",value:function(e,t){var n=new a.Graphics,i=this.radius/e.scale.x*s.CEIL_SIZE,o=e.width/2/e.scale.x,r=e.height/2/e.scale.y;n.beginFill(16777215,1),n.drawCircle(o,r,i),n.endFill(),n.parentLayer=t.lighting,e[l]=n,e.addChild(n),e.removed=this.onRemoved.bind(this,e),e.once("removed",e.removed)}},{key:"dropBy",value:function(e){this.removeCamera(e)}},{key:"onRemoved",value:function(t){var n=this;this.removeCamera(t),t.once("added",function(e){return n.setup(t,e)})}},{key:"removeCamera",value:function(e){e.removeChild(e[l]),delete e[l],e.off("removed",this.removed),delete e.removed}},{key:"toString",value:function(){return"light area: "+this.radius}},{key:"type",get:function(){return s.ABILITY_CAMERA}}]),t}();n.default=o},{"../../config/constants":7,"../../lib/PIXI":13}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),a=e("keyboardjs"),s=(i=a)&&i.__esModule?i:{default:i},l=e("../../config/control"),u=e("../../config/constants");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"hasToReplace",value:function(e){return!0}},{key:"carryBy",value:function(e){(e.abilities[this.type]=this).setup(e)}},{key:"setup",value:function(t){var n={},i=function(){t.dx=-n[l.LEFT]+n[l.RIGHT],t.dy=-n[l.UP]+n[l.DOWN]},o=function(t){n[t]=0;var e=function(e){e.preventRepeat(),n[t]=1,i()};return s.default.bind(t,e,function(){n[t]=0,i()}),e};s.default.setContext(""),s.default.withContext("",function(){var e;t[u.ABILITY_KEY_MOVE]=(c(e={},l.LEFT,o(l.LEFT)),c(e,l.UP,o(l.UP)),c(e,l.RIGHT,o(l.RIGHT)),c(e,l.DOWN,o(l.DOWN)),e)})}},{key:"dropBy",value:function(e){e.abilities[this.type]&&(s.default.withContext("",function(){Object.entries(e[u.ABILITY_KEY_MOVE]).forEach(function(e){var t=o(e,2),n=t[0],i=t[1];s.default.unbind(n,i)})}),delete e.abilities[this.type])}},{key:"toString",value:function(){return"key control"}},{key:"type",get:function(){return u.ABILITY_KEY_MOVE}}]),e}();n.default=f},{"../../config/constants":7,"../../config/control":8,keyboardjs:1}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=e("../../config/constants");var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e}return i(t,[{key:"hasToReplace",value:function(e){var t=e.tickAbilities[this.type.toString()];return!t||this.value>t.value}},{key:"carryBy",value:function(e){this.dropBy(e),e.tickAbilities[this.type.toString()]=this}},{key:"dropBy",value:function(e){delete e.tickAbilities[this.type.toString()]}},{key:"tick",value:function(e,t){t.x+=t.dx*this.value*e,t.y+=t.dy*this.value*e}},{key:"toString",value:function(){return"move level: "+this.value}},{key:"type",get:function(){return o.ABILITY_MOVE}}]),t}();n.default=r},{"../../config/constants":7}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=e("../../config/constants");var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.set=new Set([e])}return i(t,[{key:"hasToReplace",value:function(e){return!0}},{key:"carryBy",value:function(e){var t=e.abilities[this.type];if(!t)return t=this,void(e.abilities[this.type]=t);var n=t.set;this.set.forEach(n.add.bind(n))}},{key:"dropBy",value:function(e){delete e.abilities[this.type]}},{key:"use",value:function(e,t){e.abilities[this.type].set.has(t.map)&&(e.say(e.toString()+" use ability to open "+t.map),t[this.type]())}},{key:"toString",value:function(){return["keys: ",Array.from(this.set).join(", ")].join("")}},{key:"type",get:function(){return o.ABILITY_OPERATE}}]),t}();n.default=r},{"../../config/constants":7}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=e("../lib/PIXI"),r=s(e("../lib/Scene")),a=s(e("./PlayScene"));function s(e){return e&&e.__esModule?e:{default:e}}var l="loading",u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.life=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),i(t,[{key:"create",value:function(){var e=this,t=new o.TextStyle({fontFamily:"Arial",fontSize:36,fill:"white",stroke:"#ff3300",strokeThickness:4,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6});this.textLoading=new o.Text(l,t),this.addChild(this.textLoading),o.loader.add("images/town_tiles.json").load(function(){return e.emit("changeScene",a.default,{map:"E0N0",position:[1,1]})})}},{key:"tick",value:function(e){this.life+=e/30,this.textLoading.text=l+Array(Math.floor(this.life)%4+1).join(".")}}]),t}();n.default=u},{"../lib/PIXI":13,"../lib/Scene":14,"./PlayScene":27}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=e("../lib/PIXI"),a=r(e("../lib/Scene")),s=r(e("../lib/Map")),l=r(e("../lib/Messages")),u=r(e("../objects/Cat")),c=r(e("../objects/abilities/Move")),f=r(e("../objects/abilities/KeyMove")),d=r(e("../objects/abilities/Operate")),p=r(e("../objects/abilities/Camera"));function r(e){return e&&e.__esModule?e:{default:e}}var h=void 0,y=void 0,b=function(e){function r(e){var t=e.map,n=e.player,i=e.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.isLoaded=!1,o.cat=n,o.mapFile="world/"+t,o.toPosition=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),i(r,[{key:"create",value:function(){h=this.parent.width,y=this.parent.height;var e=this.mapFile;o.resources[e]?this.onLoaded():o.loader.add(e,e+".json").load(this.onLoaded.bind(this))}},{key:"onLoaded",value:function(){var t=this;this.collideObjects=[],this.replyObjects=[],this.cat||(this.cat=new u.default,this.cat.takeAbility(new c.default(1)),this.cat.takeAbility(new d.default("E0N0")),this.cat.takeAbility(new f.default),this.cat.takeAbility(new p.default(1)),this.cat.width=10,this.cat.height=10),this.spawnMap(o.resources[this.mapFile].data),this.addChild(this.map),this.map.addPlayer(this.cat,this.toPosition),this.tipText(),this.isLoaded=!0;var n={id:"myWindow",component:"Window",padding:4,position:{x:h/4,y:y/4},width:h/2,height:y/2};EZGUI.Theme.load(["assets/kenney-theme/kenney-theme.json"],function(){var e=EZGUI.create(n,"kenney");t.addChild(e)})}},{key:"spawnMap",value:function(e){var t=this,n=new s.default;n.load(e),n.on("use",function(e){t.emit("changeScene",r,{map:e.map,player:t.cat,position:e.toPosition})}),this.map=n}},{key:"tipText",value:function(){var e=new o.TextStyle({fontSize:12,fill:"white"});this.text=new o.Text("",e),this.text.x=100,this.addChild(this.text)}},{key:"tick",value:function(e){this.isLoaded&&(this.map.tick(e),this.map.position.set(h/2-this.cat.x,y/2-this.cat.y),this.text.text=l.default.getList().join(""))}}]),r}();n.default=b},{"../lib/Map":11,"../lib/Messages":12,"../lib/PIXI":13,"../lib/Scene":14,"../objects/Cat":16,"../objects/abilities/Camera":22,"../objects/abilities/KeyMove":23,"../objects/abilities/Move":24,"../objects/abilities/Operate":25}]},{},[6]);
//# sourceMappingURL=bundle.min.js.map
