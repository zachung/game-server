!function i(a,u,l){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[t]={exports:{}};a[t][0].call(r.exports,function(e){return s(a[t][1][e]||e)},r,r.exports,i,a,u,l)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function o(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0;var r,u=10;try{var s={};Object.defineProperty&&Object.defineProperty(s,"x",{value:0}),r=0===s.x}catch(e){r=!1}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function f(e,t,n,o){var r,i,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]):(i=e._events=l(null),e._eventsCount=0),a){if("function"==typeof a?a=i[t]=o?[n,a]:[a,n]:o?a.unshift(n):a.push(n),!a.warned&&(r=c(e))&&0<r&&a.length>r){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=i[t]=n,++e._eventsCount;return e}function y(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=i.call(y,o);return r.listener=n,o.wrapFn=r}function d(e,t,n){var o=e._events;if(!o)return[];var r=o[t];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):b(r,r.length):[]}function h(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function b(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}r?Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');u=e}}):o.defaultMaxListeners=u,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){var t,n,o,r,i,a,u="error"===e;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(u){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var s="function"==typeof n;switch(o=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var o=e.length,r=b(e,o),i=0;i<o;++i)r[i].call(n)}(n,s,this);break;case 2:!function(e,t,n,o){if(t)e.call(n,o);else for(var r=e.length,i=b(e,r),a=0;a<r;++a)i[a].call(n,o)}(n,s,this,arguments[1]);break;case 3:!function(e,t,n,o,r){if(t)e.call(n,o,r);else for(var i=e.length,a=b(e,i),u=0;u<i;++u)a[u].call(n,o,r)}(n,s,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,o,r,i){if(t)e.call(n,o,r,i);else for(var a=e.length,u=b(e,a),l=0;l<a;++l)u[l].call(n,o,r,i)}(n,s,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(o-1),i=1;i<o;i++)r[i-1]=arguments[i];!function(e,t,n,o){if(t)e.apply(n,o);else for(var r=e.length,i=b(e,r),a=0;a<r;++a)i[a].apply(n,o)}(n,s,this,r)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return f(this,e,t,!1)},o.prototype.prependListener=function(e,t){return f(this,e,t,!0)},o.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,o,r,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(o=this._events))return this;if(!(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(var n=t,o=n+1,r=e.length;o<r;n+=1,o+=1)e[n]=e[o];e.pop()}(n,r),1===n.length&&(o[e]=n[0]),o.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.removeAllListeners=function(e){var t,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var r,i=a(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(e,t,n){var o=e("./lib/keyboard"),r=e("./lib/locale"),i=e("./lib/key-combo"),a=new o;a.setLocale("us",e("./locales/us")),(n=t.exports=a).Keyboard=o,n.Locale=r,n.KeyCombo=i},{"./lib/key-combo":3,"./lib/keyboard":4,"./lib/locale":5,"./locales/us":6}],3:[function(e,t,n){function l(e){this.sourceStr=e,this.subCombos=l.parseComboStr(e),this.keyNames=this.subCombos.reduce(function(e,t){return e.concat(t)},[])}l.sequenceDeliminator=">>",l.comboDeliminator=">",l.keyDeliminator="+",l.parseComboStr=function(e){for(var t=l._splitStr(e,l.comboDeliminator),n=[],o=0;o<t.length;o+=1)n.push(l._splitStr(t[o],l.keyDeliminator));return n},l.prototype.check=function(e){for(var t=0,n=0;n<this.subCombos.length;n+=1)if(-1===(t=this._checkSubCombo(this.subCombos[n],t,e)))return!1;return!0},l.prototype.isEqual=function(e){if(!e||"string"!=typeof e&&"object"!=typeof e)return!1;if("string"==typeof e&&(e=new l(e)),this.subCombos.length!==e.subCombos.length)return!1;for(var t=0;t<this.subCombos.length;t+=1)if(this.subCombos[t].length!==e.subCombos[t].length)return!1;for(t=0;t<this.subCombos.length;t+=1){for(var n=this.subCombos[t],o=e.subCombos[t].slice(0),r=0;r<n.length;r+=1){var i=n[r],a=o.indexOf(i);-1<a&&o.splice(a,1)}if(0!==o.length)return!1}return!0},l._splitStr=function(e,t){for(var n=e,o=t,r="",i=[],a=0;a<n.length;a+=1)0<a&&n[a]===o&&"\\"!==n[a-1]&&(i.push(r.trim()),r="",a+=1),r+=n[a];return r&&i.push(r.trim()),i},l.prototype._checkSubCombo=function(e,t,n){e=e.slice(0),n=n.slice(t);for(var o=t,r=0;r<e.length;r+=1){var i=e[r];if("\\"===i[0]){var a=i.slice(1);a!==l.comboDeliminator&&a!==l.keyDeliminator||(i=a)}var u=n.indexOf(i);if(-1<u&&(e.splice(r,1),r-=1,o<u&&(o=u),0===e.length))return o}return-1},t.exports=l},{}],4:[function(t,n,e){(function(u){var o=t("./locale"),c=t("./key-combo");function e(e,t,n,o){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(e,t,n,o)}e.prototype.setLocale=function(e,t){var n=null;"string"==typeof e?t?t(n=new o(e),this._targetPlatform,this._targetUserAgent):n=this._locales[e]||null:e=(n=e)._localeName,this._locale=n,(this._locales[e]=n)&&(this._locale.pressedKeys=n.pressedKeys)},e.prototype.getLocale=function(e){return e||(e=this._locale.localeName),this._locales[e]||null},e.prototype.addListener=e.prototype.bind=function(e,t,n,o){if(null!==e&&"function"!=typeof e||(o=n,n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var r=0;r<e.length;r+=1)this.bind(e[r],t,n);else this._listeners.push({keyCombo:e?new c(e):null,pressHandler:t||null,releaseHandler:n||null,preventRepeat:o||!1,preventRepeatByDefault:o||!1})},e.prototype.on=e.prototype.bind,e.prototype.removeListener=e.prototype.unbind=function(e,t,n){if(null!==e&&"function"!=typeof e||(n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var o=0;o<e.length;o+=1)this.unbind(e[o],t,n);else for(o=0;o<this._listeners.length;o+=1){var r=this._listeners[o],i=!e&&!r.keyCombo||r.keyCombo&&r.keyCombo.isEqual(e),a=!t&&!n||!t&&!r.pressHandler||t===r.pressHandler,u=!t&&!n||!n&&!r.releaseHandler||n===r.releaseHandler;i&&a&&u&&(this._listeners.splice(o,1),o-=1)}},e.prototype.off=e.prototype.unbind,e.prototype.setContext=function(e){this._locale&&this.releaseAllKeys(),this._contexts[e]||(this._contexts[e]=[]),this._listeners=this._contexts[e],this._currentContext=e},e.prototype.getContext=function(){return this._currentContext},e.prototype.withContext=function(e,t){var n=this.getContext();this.setContext(e),t(),this.setContext(n)},e.prototype.watch=function(e,t,n,o){var r=this;if(this.stop(),!e){if(!u.addEventListener&&!u.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");e=u}if("number"==typeof e.nodeType&&(o=n,n=t,t=e,e=u),!e.addEventListener&&!e.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!e.addEventListener;var i=e.navigator&&e.navigator.userAgent||"",a=e.navigator&&e.navigator.platform||"";t&&null!==t||(t=e.document),n&&null!==n||(n=a),o&&null!==o||(o=i),this._targetKeyDownBinding=function(e){r.pressKey(e.keyCode,e),r._handleCommandBug(e,a)},this._targetKeyUpBinding=function(e){r.releaseKey(e.keyCode,e)},this._targetResetBinding=function(e){r.releaseAllKeys(e)},this._bindEvent(t,"keydown",this._targetKeyDownBinding),this._bindEvent(t,"keyup",this._targetKeyUpBinding),this._bindEvent(e,"focus",this._targetResetBinding),this._bindEvent(e,"blur",this._targetResetBinding),this._targetElement=t,this._targetWindow=e,this._targetPlatform=n,this._targetUserAgent=o},e.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},e.prototype.pressKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(e),this._applyBindings(t)}},e.prototype.releaseKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(e),this._clearBindings(t)}},e.prototype.releaseAllKeys=function(e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(e)}},e.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},e.prototype.resume=function(){this._paused=!1},e.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},e.prototype._bindEvent=function(e,t,n){return this._isModernBrowser?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},e.prototype._unbindEvent=function(e,t,n){return this._isModernBrowser?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e.prototype._getGroupedListeners=function(){var o=[],r=[],e=this._listeners;return"global"!==this._currentContext&&(e=[].concat(e,this._contexts.global)),e.sort(function(e,t){return(t.keyCombo?t.keyCombo.keyNames.length:0)-(e.keyCombo?e.keyCombo.keyNames.length:0)}).forEach(function(e){for(var t=-1,n=0;n<r.length;n+=1)(null===r[n]&&null===e.keyCombo||null!==r[n]&&r[n].isEqual(e.keyCombo))&&(t=n);-1===t&&(t=r.length,r.push(e.keyCombo)),o[t]||(o[t]=[]),o[t].push(e)}),o},e.prototype._applyBindings=function(e){var t=!1;e||(e={}),e.preventRepeat=function(){t=!0},e.pressedKeys=this._locale.pressedKeys.slice(0);for(var n=this._locale.pressedKeys.slice(0),o=this._getGroupedListeners(),r=0;r<o.length;r+=1){var i=o[r],a=i[0].keyCombo;if(null===a||a.check(n)){for(var u=0;u<i.length;u+=1){var l=i[u];null===a&&(l={keyCombo:new c(n.join("+")),pressHandler:l.pressHandler,releaseHandler:l.releaseHandler,preventRepeat:l.preventRepeat,preventRepeatByDefault:l.preventRepeatByDefault}),l.pressHandler&&!l.preventRepeat&&(l.pressHandler.call(this,e),t&&(l.preventRepeat=t,t=!1)),l.releaseHandler&&-1===this._appliedListeners.indexOf(l)&&this._appliedListeners.push(l)}if(a)for(u=0;u<a.keyNames.length;u+=1){var s=n.indexOf(a.keyNames[u]);-1!==s&&(n.splice(s,1),u-=1)}}}},e.prototype._clearBindings=function(e){e||(e={});for(var t=0;t<this._appliedListeners.length;t+=1){var n=this._appliedListeners[t],o=n.keyCombo;if(null===o||!o.check(this._locale.pressedKeys)){if(this._callerHandler!==n.releaseHandler){var r=this._callerHandler;this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,e),this._callerHandler=r}this._appliedListeners.splice(t,1),t-=1}}},e.prototype._handleCommandBug=function(e,t){t.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(e.keyCode)[0])&&this._targetKeyUpBinding(e)},n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./key-combo":3,"./locale":5}],5:[function(e,t,n){var r=e("./key-combo");function o(e){this.localeName=e,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}o.prototype.bindKeyCode=function(e,t){"string"==typeof t&&(t=[t]),this._keyMap[e]=t},o.prototype.bindMacro=function(e,t){"string"==typeof t&&(t=[t]);var n=null;"function"==typeof t&&(n=t,t=null);var o={keyCombo:new r(e),keyNames:t,handler:n};this._macros.push(o)},o.prototype.getKeyCodes=function(e){var t=[];for(var n in this._keyMap){-1<this._keyMap[n].indexOf(e)&&t.push(0|n)}return t},o.prototype.getKeyNames=function(e){return this._keyMap[e]||[]},o.prototype.setKillKey=function(e){if("string"!=typeof e)this._killKeyCodes.push(e);else for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.setKillKey(t[n])},o.prototype.pressKey=function(e){if("string"!=typeof e){var t=this.getKeyNames(e);for(o=0;o<t.length;o+=1)-1===this.pressedKeys.indexOf(t[o])&&this.pressedKeys.push(t[o]);this._applyMacros()}else for(var n=this.getKeyCodes(e),o=0;o<n.length;o+=1)this.pressKey(n[o])},o.prototype.releaseKey=function(e){if("string"==typeof e)for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.releaseKey(t[n]);else{var o=this.getKeyNames(e);if(-1<this._killKeyCodes.indexOf(e))this.pressedKeys.length=0;else for(n=0;n<o.length;n+=1){var r=this.pressedKeys.indexOf(o[n]);-1<r&&this.pressedKeys.splice(r,1)}this._clearMacros()}},o.prototype._applyMacros=function(){for(var e=this._macros.slice(0),t=0;t<e.length;t+=1){var n=e[t];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var o=0;o<n.keyNames.length;o+=1)-1===this.pressedKeys.indexOf(n.keyNames[o])&&this.pressedKeys.push(n.keyNames[o]);this._appliedMacros.push(n)}}},o.prototype._clearMacros=function(){for(var e=0;e<this._appliedMacros.length;e+=1){var t=this._appliedMacros[e];if(!t.keyCombo.check(this.pressedKeys)){for(var n=0;n<t.keyNames.length;n+=1){var o=this.pressedKeys.indexOf(t.keyNames[n]);-1<o&&this.pressedKeys.splice(o,1)}t.handler&&(t.keyNames=null),this._appliedMacros.splice(e,1),e-=1}}},t.exports=o},{"./key-combo":3}],6:[function(e,t,n){t.exports=function(e,t,n){e.bindKeyCode(3,["cancel"]),e.bindKeyCode(8,["backspace"]),e.bindKeyCode(9,["tab"]),e.bindKeyCode(12,["clear"]),e.bindKeyCode(13,["enter"]),e.bindKeyCode(16,["shift"]),e.bindKeyCode(17,["ctrl"]),e.bindKeyCode(18,["alt","menu"]),e.bindKeyCode(19,["pause","break"]),e.bindKeyCode(20,["capslock"]),e.bindKeyCode(27,["escape","esc"]),e.bindKeyCode(32,["space","spacebar"]),e.bindKeyCode(33,["pageup"]),e.bindKeyCode(34,["pagedown"]),e.bindKeyCode(35,["end"]),e.bindKeyCode(36,["home"]),e.bindKeyCode(37,["left"]),e.bindKeyCode(38,["up"]),e.bindKeyCode(39,["right"]),e.bindKeyCode(40,["down"]),e.bindKeyCode(41,["select"]),e.bindKeyCode(42,["printscreen"]),e.bindKeyCode(43,["execute"]),e.bindKeyCode(44,["snapshot"]),e.bindKeyCode(45,["insert","ins"]),e.bindKeyCode(46,["delete","del"]),e.bindKeyCode(47,["help"]),e.bindKeyCode(145,["scrolllock","scroll"]),e.bindKeyCode(187,["equal","equalsign","="]),e.bindKeyCode(188,["comma",","]),e.bindKeyCode(190,["period","."]),e.bindKeyCode(191,["slash","forwardslash","/"]),e.bindKeyCode(192,["graveaccent","`"]),e.bindKeyCode(219,["openbracket","["]),e.bindKeyCode(220,["backslash","\\"]),e.bindKeyCode(221,["closebracket","]"]),e.bindKeyCode(222,["apostrophe","'"]),e.bindKeyCode(48,["zero","0"]),e.bindKeyCode(49,["one","1"]),e.bindKeyCode(50,["two","2"]),e.bindKeyCode(51,["three","3"]),e.bindKeyCode(52,["four","4"]),e.bindKeyCode(53,["five","5"]),e.bindKeyCode(54,["six","6"]),e.bindKeyCode(55,["seven","7"]),e.bindKeyCode(56,["eight","8"]),e.bindKeyCode(57,["nine","9"]),e.bindKeyCode(96,["numzero","num0"]),e.bindKeyCode(97,["numone","num1"]),e.bindKeyCode(98,["numtwo","num2"]),e.bindKeyCode(99,["numthree","num3"]),e.bindKeyCode(100,["numfour","num4"]),e.bindKeyCode(101,["numfive","num5"]),e.bindKeyCode(102,["numsix","num6"]),e.bindKeyCode(103,["numseven","num7"]),e.bindKeyCode(104,["numeight","num8"]),e.bindKeyCode(105,["numnine","num9"]),e.bindKeyCode(106,["nummultiply","num*"]),e.bindKeyCode(107,["numadd","num+"]),e.bindKeyCode(108,["numenter"]),e.bindKeyCode(109,["numsubtract","num-"]),e.bindKeyCode(110,["numdecimal","num."]),e.bindKeyCode(111,["numdivide","num/"]),e.bindKeyCode(144,["numlock","num"]),e.bindKeyCode(112,["f1"]),e.bindKeyCode(113,["f2"]),e.bindKeyCode(114,["f3"]),e.bindKeyCode(115,["f4"]),e.bindKeyCode(116,["f5"]),e.bindKeyCode(117,["f6"]),e.bindKeyCode(118,["f7"]),e.bindKeyCode(119,["f8"]),e.bindKeyCode(120,["f9"]),e.bindKeyCode(121,["f10"]),e.bindKeyCode(122,["f11"]),e.bindKeyCode(123,["f12"]),e.bindMacro("shift + `",["tilde","~"]),e.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),e.bindMacro("shift + 2",["at","@"]),e.bindMacro("shift + 3",["number","#"]),e.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),e.bindMacro("shift + 5",["percent","%"]),e.bindMacro("shift + 6",["caret","^"]),e.bindMacro("shift + 7",["ampersand","and","&"]),e.bindMacro("shift + 8",["asterisk","*"]),e.bindMacro("shift + 9",["openparen","("]),e.bindMacro("shift + 0",["closeparen",")"]),e.bindMacro("shift + -",["underscore","_"]),e.bindMacro("shift + =",["plus","+"]),e.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),e.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),e.bindMacro("shift + \\",["verticalbar","|"]),e.bindMacro("shift + ;",["colon",":"]),e.bindMacro("shift + '",["quotationmark","'"]),e.bindMacro("shift + !,",["openanglebracket","<"]),e.bindMacro("shift + .",["closeanglebracket",">"]),e.bindMacro("shift + /",["questionmark","?"]),t.match("Mac")?e.bindMacro("command",["mod","modifier"]):e.bindMacro("ctrl",["mod","modifier"]);for(var o=65;o<=90;o+=1){var r=String.fromCharCode(o+32),i=String.fromCharCode(o);e.bindKeyCode(o,r),e.bindMacro("shift + "+r,i),e.bindMacro("capslock + "+r,i)}var a,u,l=n.match("Firefox")?59:186,s=n.match("Firefox")?173:189;t.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(a=91,u=93):t.match("Mac")&&n.match("Opera")?u=a=17:t.match("Mac")&&n.match("Firefox")&&(u=a=224),e.bindKeyCode(l,["semicolon",";"]),e.bindKeyCode(s,["dash","-"]),e.bindKeyCode(a,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),e.bindKeyCode(u,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),e.setKillKey("command")}},{}],7:[function(e,t,n){"use strict";var o=i(e("./lib/Application")),r=i(e("./scenes/LoadingScene"));function i(e){return e&&e.__esModule?e:{default:e}}var a=new o.default({width:256,height:256,roundPixels:!0,autoResize:!0,resolution:1,autoStart:!1});a.renderer.view.style.position="absolute",a.renderer.view.style.display="block",a.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(a.view),a.changeStage(),a.start(),a.changeScene(r.default)},{"./lib/Application":10,"./scenes/LoadingScene":54}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.IS_MOBILE=(o=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(o.substr(0,4))),n.CEIL_SIZE=32;var o,r=n.ABILITY_MOVE=Symbol("move"),i=n.ABILITY_CAMERA=Symbol("camera"),a=n.ABILITY_OPERATE=Symbol("operate"),u=n.ABILITY_KEY_MOVE=Symbol("key-move"),l=n.ABILITY_HEALTH=Symbol("health"),s=n.ABILITY_CARRY=Symbol("carry"),c=n.ABILITY_LEARN=Symbol("learn"),f=n.ABILITY_PLACE=Symbol("place"),y=n.ABILITY_KEY_PLACE=Symbol("key-place"),p=n.ABILITY_KEY_FIRE=Symbol("fire"),d=n.ABILITY_ROTATE=Symbol("rotate"),h=n.ABILITY_DAMAGE=Symbol("damage"),b=n.ABILITY_MANA=Symbol("mana");n.ABILITIES_ALL=[r,i,a,u,l,s,c,f,y,p,d,h,b],n.STATIC="static",n.STAY="stay",n.REPLY="reply"},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.LEFT="a",n.UP="w",n.RIGHT="d",n.DOWN="s",n.SWITCH1="1",n.SWITCH2="2",n.SWITCH3="3",n.SWITCH4="4",n.FIRE="f"},{}],10:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),u=e("./PIXI"),a=e("./globalEventManager"),l=(o=a)&&o.__esModule?o:{default:o};var s=void 0,c=function(e){function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(n)));return s=r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u.Application),r(a,[{key:"changeStage",value:function(){this.stage=new u.display.Stage}},{key:"changeScene",value:function(e,t){this.currentScene&&(this.currentScene.destroy(),this.stage.removeChild(this.currentScene));var n=new e(t);this.stage.addChild(n),n.create(),n.on("changeScene",this.changeScene.bind(this)),this.currentScene=n}},{key:"start",value:function(){for(var e,t=this,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this)).call.apply(e,[this].concat(o));var i=this.renderer.view;this.stage.addChild((new u.Graphics).drawRect(0,0,i.width,i.height)),l.default.setInteraction(this.renderer.plugins.interaction),this.ticker.add(function(e){return t.gameLoop.bind(t)(e)})}},{key:"gameLoop",value:function(e){this.currentScene.tick(e)}}],[{key:"getApp",value:function(){return s}}]),a}();n.default=c},{"./PIXI":17,"./globalEventManager":21}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),c=e("./PIXI"),f=e("../config/constants");var y=Symbol("light"),r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,null,[{key:"lightOn",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=e.parent;if(o.lighting){var r=new c.Graphics,i=t*f.CEIL_SIZE,a=e.anchor,u=e.width*(.5-a.x),l=e.height*(.5-a.y);if(r.beginFill(16777215,1),r.drawCircle(u,l,i),r.endFill(),r.parentLayer=o.lighting,e[y]={light:r},e.addChild(r),1!==n){var s=setInterval(function(){var e=Math.random()*(1-n);1<r.scale.x&&(e=-e),r.scale.x+=e,r.scale.y+=e,r.alpha+=e},1e3/12);e[y].interval=s}}}},{key:"lightOff",value:function(e){e[y]&&(e.removeChild(e[y].light),clearInterval(e[y].interval),delete e[y],e.off("removed",t.lightOff))}}]),t}();n.default=r},{"../config/constants":8,"./PIXI":17}],12:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./PIXI"),f=e("../config/constants"),y=e("./utils"),u=o(e("../lib/MapWorld")),l=o(e("../lib/globalEventManager"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=!1,d=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce(function(e,t){return function(){return t(e.apply(void 0,arguments))}},e)},h={addObject:function(e,t){this.addGameObject(t)},die:function(e){p=!0,e[f.ABILITY_KEY_FIRE].dropBy(e),e[f.ABILITY_KEY_MOVE].dropBy(e),e[f.ABILITY_ROTATE].dropBy(e),e.say("You die.")}},b=function(e){function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));t.objects=(s(e={},f.STATIC,[]),s(e,f.STAY,[]),s(e,f.REPLY,[]),e),t.map=new a.Container,t.map.willRemoveChild=t.willRemoveChild.bind(t),t.addChild(t.map),t.playerGroup=new a.display.Group;var n=new a.display.Layer(t.playerGroup);return t.addChild(n),t.mapWorld=new u.default,t.willRemoved=[],t.life=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Container),i(o,[{key:"load",value:function(e){for(var i=this,t=e.tiles,n=e.cols,o=e.rows,r=e.items,u=function(e,t,n,o){var r=(0,y.instanceByItemId)(n,o);return i.addGameObject(r,e*f.CEIL_SIZE,t*f.CEIL_SIZE),[r,e,t]},l=function(e){var t=c(e,3),n=t[0],o=t[1],r=t[2];return n.on("use",function(){return i.emit("use",n)}),n.on("addObject",h.addObject.bind(i,n)),[n,o,r]},a=0;a<n;a++)for(var s=0;s<o;s++)d(u,l)(a,s,t[s*n+a]);r.forEach(function(e){var t=c(e,3),n=t[0],o=c(t[1],2),r=o[0],i=o[1],a=t[2];d(u,l)(r,i,n,a)})}},{key:"addPlayer",value:function(r,e){var i=this,t=c(e,2),n=t[0],o=t[1];Object.entries(h).forEach(function(e){var t=c(e,2),n=t[0],o=t[1].bind(i,r);r.on(n,o),r.once("removed",r.off.bind(r,n,o))}),this.addGameObject(r,n*f.CEIL_SIZE,o*f.CEIL_SIZE),r.parentGroup=this.playerGroup,this.player=r}},{key:"tick",value:function(t){var n=this;p||(this.objects[f.STAY].forEach(function(e){return e.tick(t)}),this.objects[f.REPLY].forEach(function(e){return e.tick(t)}),this.mapWorld.update(t),this.willRemoved.forEach(function(e){n.map.removeChild(e)}),this.life+=t,this.life%10<1&&l.default.emit("fire"))}},{key:"addGameObject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==e&&t.positionEx.set(e,n),t.anchor.set(.5,.5);var o=this.objects[t.type];o.push(t),t.once("removed",function(){var e=o.indexOf(t);o.splice(e,1)}),this.mapWorld.add(t),this.map.addChild(t)}},{key:"setScale",value:function(e){this.scale.set(e),this.mapWorld.scale(e)}},{key:"setPosition",value:function(e,t){this.position.set(e,t)}},{key:"debug",value:function(e){this.mapWorld.enableRender(e),this.mapWorld.follow(this.player.body)}},{key:"willRemoveChild",value:function(e){this.willRemoved.push(e)}}]),o}();n.default=b},{"../config/constants":8,"../lib/MapWorld":14,"../lib/globalEventManager":21,"./PIXI":17,"./utils":22}],13:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./PIXI");var o=function(e){function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this)),t=new a.display.Layer;t.on("display",function(e){e.blendMode=a.BLEND_MODES.ADD}),t.useRenderTexture=!0,t.clearColor=[0,0,0,1],e.addChild(t);var n=new a.Sprite(t.getRenderTexture());return n.blendMode=a.BLEND_MODES.MULTIPLY,e.addChild(n),e.lighting=t,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.Container),i(o,[{key:"enable",value:function(e){this.lighting.clearColor=[0,0,0,1],e.map.lighting=this.lighting}},{key:"disable",value:function(){this.lighting.clearColor=[1,1,1,1]}}]),o}();n.default=o},{"./PIXI":17}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=e("./Matter"),r=e("../config/constants");var a=Symbol("parent");var i=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=s.Engine.create(),t=e.world;t.gravity.y=0,t.forcesWaitForApply=[],s.Events.on(e,"collisionStart",function(e){for(var t=e.pairs,n=0;n<t.length;n++){var o=t[n],r=o.bodyA[a],i=o.bodyB[a];r.emit("collide",i),i.emit("collide",r)}}),s.Events.on(e,"beforeUpdate",function(e){t.forcesWaitForApply.forEach(function(e){var t=e.owner,n=e.vector;t&&s.Body.applyForce(t.body,t.positionEx,n)}),t.forcesWaitForApply=[]}),this.engine=e,this.mouseConstraint=s.MouseConstraint.create(e),s.World.add(e.world,this.mouseConstraint)}return o(n,[{key:"add",value:function(e){if(e.type!==r.STATIC){var t=this.engine.world;e.addBody();var n=e.body;e.once("removed",function(){s.World.remove(t,n)}),n[a]=e,n.world=t,s.World.addBody(t,n)}}},{key:"update",value:function(e){s.Engine.update(this.engine,16.666*e)}},{key:"enableRender",value:function(e){var t=e.width,n=e.height,o=this.engine,r=s.Render.create({element:document.body,engine:o,options:{width:2*t,height:2*n,wireframes:!0,hasBounds:!0,wireframeBackground:"transparent"}});s.Render.run(r),this.engine.render=r,this.initialEngineBoundsMaxX=r.bounds.max.x,this.initialEngineBoundsMaxY=r.bounds.max.y,this.center={x:t/2,y:n/2}}},{key:"follow",value:function(e){s.Events.on(this.engine,"beforeUpdate",function(e){var t=this.engine,n=this.initialEngineBoundsMaxX,o=this.initialEngineBoundsMaxY,r=-this.center.x,i=-this.center.y,a=t.render.bounds,u=e.position.x,l=e.position.y;a.min.x=r+u,a.max.x=r+u+n,a.min.y=i+l,a.max.y=i+l+o,s.Mouse.setOffset(this.mouseConstraint.mouse,a.min)}.bind(this,e))}},{key:"scale",value:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1];s.Mouse.setScale(this.mouseConstraint.mouse,{x:this.scaleX,y:this.scaleY})}}]),n}();n.default=i},{"../config/constants":8,"./Matter":15}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Engine=Matter.Engine,n.Render=Matter.Render,n.World=Matter.World,n.Bodies=Matter.Bodies,n.Events=Matter.Events,n.Body=Matter.Body,n.Vector=Matter.Vector,n.Composite=Matter.Composite,n.Mouse=Matter.Mouse,n.MouseConstraint=Matter.MouseConstraint},{}],16:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("events"),u=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._messages=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"add",value:function(e){500<this._messages.unshift(e)&&this._messages.pop(),this.emit("modified")}},{key:"list",get:function(){return this._messages}}]),t}();n.default=new l},{events:1}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Application=PIXI.Application,n.Container=PIXI.Container,n.loader=PIXI.loader,n.resources=PIXI.loader.resources,n.Sprite=PIXI.Sprite,n.Text=PIXI.Text,n.TextStyle=PIXI.TextStyle,n.Graphics=PIXI.Graphics,n.BLEND_MODES=PIXI.BLEND_MODES,n.display=PIXI.display,n.utils=PIXI.utils,n.ObservablePoint=PIXI.ObservablePoint},{}],18:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("./PIXI");var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.display.Layer),r(t,[{key:"create",value:function(){}},{key:"destroy",value:function(){}},{key:"tick",value:function(e){}}]),t}();n.default=a},{"./PIXI":17}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("../lib/PIXI"),r={get TerrainAtlas(){return o.resources["images/terrain_atlas.json"]},get BaseOutAtlas(){return o.resources["images/base_out_atlas.json"]},get Air(){return r.TerrainAtlas.textures["empty.png"]},get Grass(){return r.TerrainAtlas.textures["grass.png"]},get Ground(){return r.TerrainAtlas.textures["brick-tile.png"]},get Wall(){return r.TerrainAtlas.textures["wall.png"]},get IronFence(){return r.BaseOutAtlas.textures["iron-fence.png"]},get Root(){return r.TerrainAtlas.textures["root.png"]},get Tree(){return r.TerrainAtlas.textures["tree.png"]},get Treasure(){return r.BaseOutAtlas.textures["treasure.png"]},get Door(){return r.BaseOutAtlas.textures["iron-fence.png"]},get Torch(){return r.BaseOutAtlas.textures["torch.png"]},get GrassDecorate1(){return r.TerrainAtlas.textures["grass-decorate-1.png"]},get Bullet(){return o.resources["images/fire_bolt.png"].texture},get Rock(){return r.TerrainAtlas.textures["rock.png"]}};n.default=r},{"../lib/PIXI":17}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=180/Math.PI,i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}return o(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"invert",value:function(){return this.multiplyScalar(-1)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divideScalar",value:function(e){return 0!==e?this.multiplyScalar(1/e):(this.x=0,this.y=0,this)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return this.divideScalar(this.length)}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSq(e))}},{key:"distanceToSq",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setLength",value:function(e){var t=this.length;return 0!==t&&e!==t&&this.multiplyScalar(e/t),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"rotate",value:function(e){var t=this.x;return this.x=this.x*Math.cos(e)-this.y*Math.sin(e),this.y=t*Math.sin(e)+this.y*Math.cos(e),this}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"rad",get:function(){return Math.atan2(this.y,this.x)}},{key:"deg",get:function(){return this.rad*r}}],[{key:"fromPoint",value:function(e){return new n(e.x,e.y)}},{key:"fromRadLength",value:function(e,t){return new n(t*Math.cos(e),t*Math.sin(e))}}]),n}();n.default=i},{}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"setInteraction",value:function(e){this.interaction=e}},{key:"on",value:function(e,t){this.interaction.on(e,t)}},{key:"off",value:function(e,t){this.interaction.off(e,t)}},{key:"emit",value:function(e){for(var t,n=arguments.length,o=Array(1<n?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(t=this.interaction).emit.apply(t,[e].concat(o))}}]),e}();n.default=new r},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.instanceByItemId=function(e,t){var n=void 0;0==(65520&(e=parseInt(e,16)))?n=O:0==(65280&e)?(n=j,e-=16):(65280&e)>>>8==1?(n=S,e-=256):(n=k,e-=512);return new n[e](t)},n.calcApothem=function(e,t){var n=e.width/2,o=e.height/2,r=Math.atan2(o,n),i=void 0,a=Math.abs(t%w),u=Math.abs(r%w);i=a<u||u+w/2<a?n/Math.cos(t):o/Math.sin(t);return Math.abs(i)};var o=_(e("../objects/Wall")),r=_(e("../objects/Air")),i=_(e("../objects/Grass")),a=_(e("../objects/Treasure")),u=_(e("../objects/Door")),l=_(e("../objects/Torch")),s=_(e("../objects/Ground")),c=_(e("../objects/IronFence")),f=_(e("../objects/Root")),y=_(e("../objects/Tree")),p=_(e("../objects/GrassDecorate1")),d=_(e("../objects/skills/FireBolt")),h=_(e("../objects/skills/FireStar")),b=_(e("../objects/WallShootBolt")),v=_(e("../objects/abilities/Move")),m=_(e("../objects/abilities/Camera")),g=_(e("../objects/abilities/Operate"));function _(e){return e&&e.__esModule?e:{default:e}}var w=Math.PI,O=[r.default,i.default,s.default],j=[o.default,c.default,f.default,y.default],S=[a.default,u.default,l.default,p.default,d.default,b.default,h.default],k=[v.default,m.default,g.default]},{"../objects/Air":23,"../objects/Door":26,"../objects/Grass":28,"../objects/GrassDecorate1":29,"../objects/Ground":30,"../objects/IronFence":31,"../objects/Root":32,"../objects/Torch":33,"../objects/Treasure":34,"../objects/Tree":35,"../objects/Wall":36,"../objects/WallShootBolt":37,"../objects/abilities/Camera":39,"../objects/abilities/Move":48,"../objects/abilities/Operate":49,"../objects/skills/FireBolt":51,"../objects/skills/FireStar":52}],23:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Air))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return u.STATIC}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],24:[function(e,t,n){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),y=a(e("../lib/Texture")),r=a(e("./GameObject")),i=e("../config/constants"),p=a(e("./abilities/Learn")),d=a(e("../objects/abilities/Move")),h=a(e("../objects/abilities/Health")),b=a(e("../objects/abilities/Damage"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.speed,n=void 0===t?1:t,o=e.damage,r=void 0===o?1:o,i=e.force,a=void 0===i?0:i,u=e.hp,l=void 0===u?1:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,y.default.Bullet));return(new p.default).carryBy(s).learn(new d.default([n,0])).learn(new h.default(l)).learn(new b.default([r,a])),s.on("collide",s.actionWith.bind(s)),s.on("die",s.onDie.bind(s)),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,r.default),o(c,[{key:"bodyOpt",value:function(){return{isSensor:!0,collisionFilter:{category:4,mask:5}}}},{key:"actionWith",value:function(e){this.owner!==e&&this.owner!==e.owner&&(this[i.ABILITY_DAMAGE].effect(e),e.bodyOpt().isSensor||this.onDie())}},{key:"onDie",value:function(){this.parent.willRemoveChild(this)}},{key:"setOwner",value:function(e){this.owner=e}},{key:"toString",value:function(){return"Bullet"}},{key:"say",value:function(){}},{key:"setDirection",value:function(e){var t=this[i.ABILITY_MOVE];t&&(t.setDirection(e),this.rotate(e.rad))}},{key:"type",get:function(){return i.REPLY}}]),c}();n.default=u},{"../config/constants":8,"../lib/Texture":19,"../objects/abilities/Damage":41,"../objects/abilities/Health":43,"../objects/abilities/Move":48,"./GameObject":27,"./abilities/Learn":46}],25:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=g(e("../lib/Texture")),a=g(e("./GameObject")),u=e("../config/constants"),l=g(e("./abilities/Learn")),s=g(e("../objects/abilities/Move")),c=g(e("../objects/abilities/KeyMove")),f=g(e("../objects/abilities/Camera")),y=g(e("../objects/abilities/Carry")),p=g(e("../objects/abilities/Fire")),d=g(e("../objects/abilities/KeyFire")),h=g(e("../objects/abilities/Rotate")),b=g(e("../objects/abilities/Health")),v=g(e("../objects/abilities/Mana")),m=g(e("../objects/skills/FireBolt"));function g(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.default.Rock)),t=new y.default(3);return(new l.default).carryBy(e).learn(new s.default([1])).learn(new c.default).learn(new f.default(5)).learn(t).learn(new p.default).learn(new h.default).learn(new d.default).learn(new b.default(20)).learn(new v.default(20)),t.take(new m.default(0),1/0),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),r(n,[{key:"bodyOpt",value:function(){return{collisionFilter:{category:1,mask:7}}}},{key:"tick",value:function(e){this[u.ABILITY_MANA].tick(e)}},{key:"toString",value:function(){return"you"}},{key:"type",get:function(){return u.REPLY}}]),n}();n.default=_},{"../config/constants":8,"../lib/Texture":19,"../objects/abilities/Camera":39,"../objects/abilities/Carry":40,"../objects/abilities/Fire":42,"../objects/abilities/Health":43,"../objects/abilities/KeyFire":44,"../objects/abilities/KeyMove":45,"../objects/abilities/Mana":47,"../objects/abilities/Move":48,"../objects/abilities/Rotate":50,"../objects/skills/FireBolt":51,"./GameObject":27,"./abilities/Learn":46}],26:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.default.Door));return t.map=e[0],t.toPosition=e[1],t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),r(n,[{key:"actionWith",value:function(e){var t=e[u.ABILITY_OPERATE];t?t(this):e.emit("collide",this)}},{key:u.ABILITY_OPERATE,value:function(){this.say(["Get in ",this.map," now."].join("")),this.emit("use")}},{key:"toString",value:function(){return"Door"}},{key:"type",get:function(){return u.STAY}}]),n}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],27:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),u=e("../lib/PIXI"),l=e("../lib/Matter"),s=e("../config/constants"),i=e("../lib/Messages"),c=(o=i)&&o.__esModule?o:{default:o};function f(){this.scale.copy(this.scaleEx)}function y(){var e=this.positionEx;this.position.copy(e)}var p=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(e=i.__proto__||Object.getPrototypeOf(i)).call.apply(e,[this].concat(n)));return r.scaleEx=new u.ObservablePoint(f,r),r.positionEx=new u.ObservablePoint(y,r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,u.Sprite),r(i,[{key:"bodyOpt",value:function(){return{}}},{key:"addBody",value:function(){if(!this.body){var e=Object.assign(function(){var e=this[s.ABILITY_MOVE],t=e&&void 0!==e.friction?e.friction:.1,n=e&&void 0!==e.frictionAir?e.frictionAir:.01,o=this.density?this.density:.001;return{isStatic:this.type===s.STAY,friction:t,frictionAir:n,frictionStatic:t,density:o}}.call(this),this.bodyOpt()),t=l.Bodies.rectangle(this.x,this.y,this.width,this.height,e);t.position=this.positionEx,this.body=t}}},{key:"rotate",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.rotation=t?this.rotation+e:e,this.body&&l.Body.setAngle(this.body,e)}},{key:"say",value:function(e){c.default.add(e)}},{key:"tick",value:function(e){}},{key:"type",get:function(){return s.STATIC}}]),i}();n.default=p},{"../config/constants":8,"../lib/Matter":15,"../lib/Messages":16,"../lib/PIXI":17}],28:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Grass))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return u.STATIC}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],29:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.GrassDecorate1))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"toString",value:function(){return"GrassDecorate1"}},{key:"type",get:function(){return u.STATIC}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],30:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Ground))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"toString",value:function(){return"Ground"}},{key:"type",get:function(){return u.STATIC}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],31:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.IronFence))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return u.STAY}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],32:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Root))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return u.STAY}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],33:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=s(e("../lib/Texture")),a=s(e("../lib/Light")),u=s(e("./GameObject")),l=e("../config/constants");function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Torch));return e.on("added",a.default.lightOn.bind(null,e,2,.95)),e.on("removeed",a.default.lightOff.bind(null,e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"toString",value:function(){return"torch"}},{key:"type",get:function(){return l.STATIC}}]),t}();n.default=c},{"../config/constants":8,"../lib/Light":11,"../lib/Texture":19,"./GameObject":27}],34:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=c(e("../lib/Texture")),u=c(e("./GameObject")),l=e("../config/constants"),s=e("../lib/utils");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function(){function i(e){var t=a(e,3),n=t[0],o=t[1],r=t[2];f(this,i),this.item=(0,s.instanceByItemId)(n,o),this.count=r}return r(i,[{key:"toString",value:function(){return[this.item.toString(),"(",this.count,")"].join("")}}]),i}(),p=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];f(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.default.Treasure));return t.inventories=e.map(function(e){return new y(e)}),t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),r(n,[{key:"bodyOpt",value:function(){return{isSensor:!0,collisionFilter:{category:2,mask:1}}}},{key:"actionWith",value:function(e){var t=e[l.ABILITY_CARRY];t?(this.inventories.forEach(function(e){return t.take(e.item,e.count)}),e.say(["I taked ",this.toString()].join("")),this.parent.willRemoveChild(this)):e.say("I can't carry items not yet.")}},{key:"toString",value:function(){return["treasure: [",this.inventories.join(", "),"]"].join("")}},{key:"type",get:function(){return l.REPLY}}]),n}();n.default=p},{"../config/constants":8,"../lib/Texture":19,"../lib/utils":22,"./GameObject":27}],35:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Tree))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return u.STAY}}]),t}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],36:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=l(e("../lib/Texture")),a=l(e("./GameObject")),u=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.default.Wall));return t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),r(n,[{key:"actionWith",value:function(e){e.emit("collide",this)}},{key:"toString",value:function(){return"Wall"}},{key:"type",get:function(){return u.STAY}}]),n}();n.default=s},{"../config/constants":8,"../lib/Texture":19,"./GameObject":27}],37:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=o(e("../lib/Texture")),u=o(e("./GameObject")),l=e("../config/constants"),s=o(e("./abilities/Learn")),c=o(e("../objects/abilities/Carry")),f=o(e("../objects/abilities/Fire")),y=o(e("../objects/abilities/Health")),p=o(e("../objects/skills/FireBolt"));function o(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a.default.Wall)),n=new c.default(3);return(new s.default).carryBy(t).learn(new f.default).learn(n).learn(new y.default(10)),n.take(new p.default(0),1/0),t.life=0,t.on("collide",t.actionWith.bind(t)),t.on("die",t.onDie.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u.default),i(o,[{key:"bodyOpt",value:function(){return{isStatic:!0}}},{key:"actionWith",value:function(e){e.emit("collide",this)}},{key:"onDie",value:function(){this.parent.willRemoveChild(this)}},{key:"tick",value:function(e){if(this.life++,this.life%3==0){this.life=0,this.rotate(Math.PI/10,!0);var t=this.rotation;this[l.ABILITY_FIRE].fire(t),this[l.ABILITY_FIRE].fire(t+Math.PI/2),this[l.ABILITY_FIRE].fire(t+Math.PI),this[l.ABILITY_FIRE].fire(t+Math.PI/2*3)}}},{key:"toString",value:function(){return"WallShootBolt"}},{key:"type",get:function(){return l.STAY}}]),o}();n.default=d},{"../config/constants":8,"../lib/Texture":19,"../objects/abilities/Carry":40,"../objects/abilities/Fire":42,"../objects/abilities/Health":43,"../objects/skills/FireBolt":51,"./GameObject":27,"./abilities/Learn":46}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=Symbol("ability"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"getSameTypeAbility",value:function(e){return e.abilities[this.type]}},{key:"hasToReplace",value:function(e,t){var n=this.getSameTypeAbility(e);return!n||t.isBetter(n)}},{key:"isBetter",value:function(e){return!0}},{key:"carryBy",value:function(e){var t=this.getSameTypeAbility(e);t&&t.replacedBy(this,e),e.abilities[this.type]=this}},{key:"replacedBy",value:function(e,t){}},{key:"dropBy",value:function(e){delete e.abilities[this.type]}},{key:"toString",value:function(){return"plz extend this class"}},{key:"serialize",value:function(){return{}}},{key:"type",get:function(){return r}}]),e}();n.default=i},{}],39:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=o(e("./Ability")),u=o(e("../../lib/Light")),l=e("../../config/constants");function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return t.radius=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.default),i(o,[{key:"isBetter",value:function(e){return this.radius>=e.radius}},{key:"carryBy",value:function(t){var n=this;(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"carryBy",this).call(this,t),t.parent?this.setup(t,t.parent):t.once("added",function(e){return n.setup(t,e)})}},{key:"replacedBy",value:function(e,t){this.dropBy(t)}},{key:"setup",value:function(e,t){u.default.lightOn(e,this.radius),e.removed=this.onRemoved.bind(this,e),e.once("removed",e.removed)}},{key:"onRemoved",value:function(t){var n=this;this.dropBy(t),t.once("added",function(e){return n.setup(t,e)})}},{key:"dropBy",value:function(e){u.default.lightOff(e),e.off("removed",e.removed),delete e.removed}},{key:"toString",value:function(){return"light area: "+this.radius}},{key:"type",get:function(){return l.ABILITY_CAMERA}}]),o}();n.default=s},{"../../config/constants":8,"../../lib/Light":11,"./Ability":38}],40:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./Ability"),u=(r=a)&&r.__esModule?r:{default:r},l=e("../../config/constants");function s(e,t){return{skill:e,count:t,toString:function(){return[e.toString(),"(",this.count,")"].join("")}}}var c=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.current=0,t.bags=Array(e).fill(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),i(n,[{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_CARRY]=this}},{key:"take",value:function(n,o){var r=this,e=this.owner;if(n instanceof u.default&&e[l.ABILITY_LEARN])e[l.ABILITY_LEARN].learn(n);else{o=-1===o?1/0:o;var i=n.toString(),a=void 0;if(!this.bags.some(function(e,t){return void 0===e&&void 0===a&&(a=t),!!(e&&e.skill.toString()===i&&n.level>e.skill.level)&&(r.bags[t]=s(n,o),!0)})){if(void 0===a)return void e.say("no empty slot for new skill got.");this.bags[a]=s(n,o)}e.emit("inventory-modified",n)}}},{key:"getSlotItem",value:function(n){var o=void 0,e=this.bags.find(function(e,t){return o=t,0==n--}),t=void 0;return e&&(t=(e=this.bags[o]).skill,0==--e.count&&(this.bags[o]=void 0),this.owner.emit("inventory-modified",t)),t}},{key:"getCurrent",value:function(){var e=this.bags[this.current],t=void 0;return e&&(t=e.skill,0==--e.count&&(this.bags[this.current]=void 0),this.owner.emit("inventory-modified",t)),t}},{key:"setCurrent",value:function(e){this.current=e}},{key:"toString",value:function(){return["carry: ",this.bags.join(", ")].join("")}},{key:"serialize",value:function(){return this.bags}},{key:"type",get:function(){return l.ABILITY_CARRY}}]),n}();n.default=c},{"../../config/constants":8,"./Ability":38}],41:[function(e,t,n){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("./Ability"),a=(o=i)&&o.__esModule?o:{default:o},c=e("../../config/constants");var u=function(e){function u(e){var t=s(e,2),n=t[0],o=void 0===n?1:n,r=t[1],i=void 0===r?.01:r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return a.damage=o,a.force=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,a.default),r(u,[{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"carryBy",this).call(this,e),(this.owner=e)[c.ABILITY_DAMAGE]=this}},{key:"effect",value:function(e){var t=e[c.ABILITY_HEALTH];t&&t.getHurt(this.owner)}},{key:"toString",value:function(){return["Damage: ",this.damage,", ",this.force].join("")}},{key:"type",get:function(){return c.ABILITY_DAMAGE}}]),u}();n.default=u},{"../../config/constants":8,"./Ability":38}],42:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./Ability"),u=(r=a)&&r.__esModule?r:{default:r},l=e("../../config/constants");var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_FIRE]=this}},{key:"fire",value:function(e){var t=this.owner,n=t[l.ABILITY_CARRY].getCurrent();n?n.cast({caster:t,rad:e}):console.log("no skill at inventory")}},{key:"toString",value:function(){return"Fire"}},{key:"type",get:function(){return l.ABILITY_FIRE}}]),t}();n.default=s},{"../../config/constants":8,"./Ability":38}],43:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=a(e("./Ability")),l=e("../../config/constants"),s=a(e("../../lib/Vector"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.value=e,t.valueMax=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default),r(n,[{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_HEALTH]=this}},{key:"getHurt",value:function(e){var t=e[l.ABILITY_DAMAGE];if(t){var n=t.force,o=t.damage,r=this.value,i=Math.max(this.value-o,0),a=s.default.fromPoint(this.owner.position).sub(e.position).setLength(n);this.owner.say([this.owner.toString()," get hurt ",o,": ",r," -> ",i].join(""));var u=this.owner[l.ABILITY_MOVE];u&&u.punch(a),this.value=i,this.owner.emit("health-change"),this.value<=0&&this.owner.emit("die")}}},{key:"toString",value:function(){return["Health: ",this.value," / ",this.valueMax].join("")}},{key:"type",get:function(){return l.ABILITY_HEALTH}}]),n}();n.default=u},{"../../config/constants":8,"../../lib/Vector":20,"./Ability":38}],44:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},u=c(e("./Ability")),l=e("../../config/constants"),s=c(e("../../lib/globalEventManager"));function c(e){return e&&e.__esModule?e:{default:e}}var f=Symbol("keys"),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"isBetter",value:function(e){return!1}},{key:"carryBy",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"carryBy",this).call(this,e),(e[l.ABILITY_KEY_FIRE]=this).setup(e)}},{key:"setup",value:function(e){var t=e[l.ABILITY_FIRE],n=t.fire.bind(t);e[f]={mousedown:function(e){e.stopped||s.default.emit("fire")},fire:n},Object.entries(e[f]).forEach(function(e){var t=r(e,2),n=t[0],o=t[1];s.default.on(n,o)})}},{key:"dropBy",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dropBy",this).call(this,e),Object.entries(e[f]).forEach(function(e){var t=r(e,2),n=t[0],o=t[1];s.default.off(n,o)}),delete e[f],delete e[l.ABILITY_KEY_FIRE]}},{key:"toString",value:function(){return"key fire"}},{key:"type",get:function(){return l.ABILITY_KEY_FIRE}}]),t}();n.default=y},{"../../config/constants":8,"../../lib/globalEventManager":21,"./Ability":38}],45:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},u=y(e("./Ability")),l=y(e("keyboardjs")),s=e("../../config/control"),c=e("../../config/constants"),f=y(e("../../lib/Vector"));function y(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=Symbol("keys"),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"isBetter",value:function(e){return!1}},{key:"carryBy",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"carryBy",this).call(this,e),(e[c.ABILITY_KEY_MOVE]=this).setup(e)}},{key:"setup",value:function(n){var o={},t=function(t){o[t]=0;var e=function(e){e.preventRepeat(),o[t]=1,n[c.ABILITY_MOVE].clearPath()};return l.default.bind(t,e,function(){o[t]=0}),e};l.default.setContext(""),l.default.withContext("",function(){var e;n[d]=(p(e={},s.LEFT,t(s.LEFT)),p(e,s.UP,t(s.UP)),p(e,s.RIGHT,t(s.RIGHT)),p(e,s.DOWN,t(s.DOWN)),e)}),this.timer=setInterval(function(){var e=new f.default(-o[s.LEFT]+o[s.RIGHT],-o[s.UP]+o[s.DOWN]);0!==e.length&&(e.multiplyScalar(.17),n[c.ABILITY_MOVE].addDirection(e))},17)}},{key:"dropBy",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dropBy",this).call(this,e),l.default.withContext("",function(){Object.entries(e[d]).forEach(function(e){var t=r(e,2),n=t[0],o=t[1];l.default.unbind(n,o)})}),delete e[d],delete e[c.ABILITY_KEY_MOVE],clearInterval(this.timer)}},{key:"toString",value:function(){return"key control"}},{key:"type",get:function(){return c.ABILITY_KEY_MOVE}}]),t}();n.default=h},{"../../config/constants":8,"../../config/control":9,"../../lib/Vector":20,"./Ability":38,keyboardjs:2}],46:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./Ability"),u=(r=a)&&r.__esModule?r:{default:r},l=e("../../config/constants");var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"isBetter",value:function(e){return!1}},{key:"carryBy",value:function(e){return e.abilities||(e.abilities={},e.tickAbilities={}),function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_LEARN]=this}},{key:"learn",value:function(e){var t=this.owner;return e.hasToReplace(t,e)&&(e.carryBy(t),t.emit("ability-carry",e)),t[l.ABILITY_LEARN]}},{key:"toString",value:function(){return"learning"}},{key:"type",get:function(){return l.ABILITY_LEARN}}]),t}();n.default=s},{"../../config/constants":8,"./Ability":38}],47:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./Ability"),u=(o=a)&&o.__esModule?o:{default:o},l=e("../../config/constants");var s=function(e){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.05;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return n.value=e,n.valueMax=e,n.refill=t,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u.default),i(o,[{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_MANA]=this}},{key:"isEnough",value:function(e){return 0<=this.value-e}},{key:"reduce",value:function(e){this.value=Math.max(this.value-e,0),this.owner.emit("mana-change")}},{key:"add",value:function(e){this.value=Math.min(this.value+e,this.valueMax),this.owner.emit("mana-change")}},{key:"tick",value:function(e){this.add(this.refill*e)}},{key:"toString",value:function(){return["Mana: ",this.value," / ",this.valueMax].join("")}},{key:"type",get:function(){return l.ABILITY_MANA}}]),o}();n.default=s},{"../../config/constants":8,"./Ability":38}],48:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=i(e("./Ability")),l=e("../../config/constants"),s=i(e("../../lib/Vector")),c=e("../../lib/Matter");function i(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function i(e){var t=u(e,2),n=t[0],o=t[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return r.value=n,r.frictionAir=o,r.vector=new s.default(0,0),r.path=[],r.movingToPoint=void 0,r.distanceThreshold=1*r.value,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r.default),o(i,[{key:"isBetter",value:function(e){return this.value>e.value}},{key:"carryBy",value:function(e){(function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_MOVE]=this}},{key:"replacedBy",value:function(e,t){e.vector=this.vector,e.path=this.path,e.movingToPoint=this.movingToPoint}},{key:"setDirection",value:function(e){c.Body.setVelocity(this.owner.body,e.setLength(this.value))}},{key:"addDirection",value:function(e){this.owner.body&&this.punch(e.multiplyScalar(this.value/300))}},{key:"punch",value:function(e){var t=this.owner;t.body&&(t.body.isSensor||t.body.world.forcesWaitForApply.push({owner:t,vector:e}))}},{key:"moveTo",value:function(e){var t=new s.default(e.x-this.owner.x,e.y-this.owner.y);this.setDirection(t)}},{key:"setPath",value:function(e){if(0===e.length)return this.movingToPoint=void 0,void(this.vector=new s.default(0,0));this.path=e,this.movingToPoint=e.pop(),this.moveTo(this.movingToPoint)}},{key:"clearPath",value:function(){this.movingToPoint=void 0,this.path=[]}},{key:"addPath",value:function(e){this.setPath(e.concat(this.path))}},{key:"toString",value:function(){return"move level: "+this.value}},{key:"type",get:function(){return l.ABILITY_MOVE}}]),i}();n.default=f},{"../../config/constants":8,"../../lib/Matter":15,"../../lib/Vector":20,"./Ability":38}],49:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("./Ability"),u=(r=a)&&r.__esModule?r:{default:r},l=e("../../config/constants");var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.set=new Set([e]),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),i(n,[{key:"carryBy",value:function(e){return function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"carryBy",this).call(this,e),e[l.ABILITY_OPERATE]=this[l.ABILITY_OPERATE].bind(this,e),e[l.ABILITY_OPERATE]}},{key:"replacedBy",value:function(e){this.set.forEach(e.set.add.bind(e.set))}},{key:l.ABILITY_OPERATE,value:function(e,t){this.set.has(t.map)&&(e.say(e.toString()+" use ability to open "+t.map),t[this.type]())}},{key:"toString",value:function(){return["keys: ",Array.from(this.set).join(", ")].join("")}},{key:"type",get:function(){return l.ABILITY_OPERATE}}]),n}();n.default=s},{"../../config/constants":8,"./Ability":38}],50:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},u=f(e("./Ability")),l=e("../../config/constants"),s=f(e("../../lib/Vector")),c=f(e("../../lib/globalEventManager"));function f(e){return e&&e.__esModule?e:{default:e}}var y=Symbol("mousemove"),p=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.initRad=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),r(n,[{key:"isBetter",value:function(e){return!1}},{key:"carryBy",value:function(e){var r=this;a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"carryBy",this).call(this,e),(this.owner=e)[l.ABILITY_ROTATE]=this,e.interactive=!0;var t=this.setFaceRad.bind(this);e[y]={rotate:t,mousemove:function(e){var t=r.owner.getGlobalPosition(),n=e.data.global,o=new s.default(n.x-t.x,n.y-t.y);c.default.emit("rotate",o)}},Object.entries(e[y]).forEach(function(e){var t=i(e,2),n=t[0],o=t[1];c.default.on(n,o)}),this.setFaceRad(new s.default(0,0))}},{key:"dropBy",value:function(e){a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dropBy",this).call(this,e),Object.entries(e[y]).forEach(function(e){var t=i(e,2),n=t[0],o=t[1];c.default.off(n,o)}),delete e[y],delete e[l.ABILITY_ROTATE]}},{key:"setFaceRad",value:function(e){this._faceRad=e.rad-this.initRad,this.owner.rotate(this._faceRad)}},{key:"toString",value:function(){return"Rotate"}},{key:"type",get:function(){return l.ABILITY_ROTATE}},{key:"faceRad",get:function(){return this._faceRad}}]),n}();n.default=p},{"../../config/constants":8,"../../lib/Vector":20,"../../lib/globalEventManager":21,"./Ability":38}],51:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var w=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=u(e("./Skill")),a=u(e("../../lib/Texture")),O=u(e("../Bullet")),j=u(e("../../lib/Vector")),S=e("../../config/constants"),k=e("../../lib/utils");function u(e){return e&&e.__esModule?e:{default:e}}var P=[[.2,1,.001,6,1,.01],[2,3,.005,10,3,5,2]],l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"sprite",value:function(){return i.default.sprite(a.default.Bullet)}},{key:"cast",value:function(e){var t=e.caster,n=e.rad,o=void 0===n?void 0:n,r=w(P[this.level],7),i=r[0],a=r[1],u=r[2],l=r[3],s=void 0===l?1:l,c=r[4],f=void 0===c?1:c,y=r[5],p=void 0===y?0:y,d=r[6],h=void 0===d?1:d;if(this._cost(t,i)){var b=new O.default({speed:s,damage:f,force:p,hp:a});if(void 0===o){var v=t[S.ABILITY_ROTATE];o=v?v.faceRad:0}var m=j.default.fromRadLength(o,1);b.scale.set(h),b.setOwner(t);var g=(0,k.calcApothem)(t,o+t.rotation)+b.height/2,_=j.default.fromRadLength(o,g).add(j.default.fromPoint(t.positionEx));b.positionEx.set(_.x,_.y),b.once("added",function(){b.setDirection(m);var e=t[S.ABILITY_MOVE];e&&e.punch(m.clone().setLength(u).invert())}),t.emit("addObject",b)}}},{key:"toString",value:function(){return"FireBolt"}}]),t}();n.default=l},{"../../config/constants":8,"../../lib/Texture":19,"../../lib/Vector":20,"../../lib/utils":22,"../Bullet":24,"./Skill":53}],52:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var v=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=e("../../lib/PIXI"),u=i(e("./Skill")),l=i(e("../../lib/Texture")),m=i(e("../Bullet")),s=i(e("../../lib/Vector")),c=e("../../config/constants"),f=e("../../lib/utils");function i(e){return e&&e.__esModule?e:{default:e}}var g=2*Math.PI,_=[[.8,8,1,6,1,.01],[.8,16,3,10,3,5,2]],y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"sprite",value:function(){for(var e=new a.Container,t=[],n=v(_[this.level],2)[1],o=0,r=g;o<r;o+=g/n){var i=u.default.sprite(l.default.Bullet);i.anchor.set(.3,.5),i.rotation=o,i.position.set(.7*i.width,.7*i.width),t.push(i)}return e.addChild.apply(e,t),e}},{key:"cast",value:function(e){var t=e.caster,n=(e.rad,v(_[this.level],7)),o=n[0],r=n[1],i=n[2],a=n[3],u=void 0===a?1:a,l=n[4],s=void 0===l?1:l,c=n[5],f=void 0===c?0:c,y=n[6],p=void 0===y?1:y;if(this._cost(t,o))for(var d=0,h=g;d<h;d+=g/r){var b=new m.default({speed:u,damage:s,force:f,hp:i});b.scale.set(p),this._genBullet(t,b,d)}}},{key:"_genBullet",value:function(e,t,n){if(void 0===n){var o=e[c.ABILITY_ROTATE];n=o?o.faceRad:0}var r=s.default.fromRadLength(n,1);t.setOwner(e);var i=(0,f.calcApothem)(e,n+e.rotation)+t.height/2,a=s.default.fromRadLength(n,i).add(s.default.fromPoint(e.positionEx));t.positionEx.set(a.x,a.y),t.once("added",function(){t.setDirection(r)}),e.emit("addObject",t)}},{key:"toString",value:function(){return"FireStar"}}]),t}();n.default=y},{"../../config/constants":8,"../../lib/PIXI":17,"../../lib/Texture":19,"../../lib/Vector":20,"../../lib/utils":22,"../Bullet":24,"./Skill":53}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../../lib/PIXI"),i=e("../../config/constants");var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.level=e}return o(t,[{key:"_cost",value:function(e,t){var n=e[i.ABILITY_MANA];return!n||!!n.isEnough(t)&&(n.reduce(t),!0)}}],[{key:"sprite",value:function(e){return new r.Sprite(e)}}]),t}();n.default=a},{"../../config/constants":8,"../../lib/PIXI":17}],54:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),u=e("../lib/PIXI"),l=c(e("../ui/Window")),s=c(e("../ui/Button")),i=c(e("../lib/Scene")),a=c(e("./PlayScene"));function c(e){return e&&e.__esModule?e:{default:e}}var f=void 0,y=void 0,p="loading",d=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.life=0,e.isLoading=!1,e.isLoaded=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"create",value:function(){f=this.parent.width,y=this.parent.height,this.showMain(),this.startSingle()}},{key:"showMain",value:function(){var e=new u.Container;e.position.set(f/4,y/4);var t=new l.default({x:0,y:0,width:f/2,height:y/2}),n=new s.default({x:t.width/4,y:10,width:.5*t.width,height:.25*t.height,literal:"Single",on:this.startSingle.bind(this)}),o=new s.default({x:t.width/4,y:n.y+n.height+10,width:.5*t.width,height:.25*t.height,literal:"Multi",on:this.startMulti.bind(this)}),r=f/20,i=new u.TextStyle({fontFamily:"Arial",fontSize:r,fill:"#ff3300"}),a=new u.Text(p,i);a.anchor.set(1,1),a.position.set(t.width-r/2,t.height-r/2),a.visible=!1,e.addChild(t),e.addChild(n),e.addChild(o),e.addChild(a),this.addChild(e),this.textLoading=a}},{key:"startSingle",value:function(){var e=this;this.showLoading(),this.startLoad();var t=void 0;t=setInterval(function(){e.isLoaded&&(clearInterval(t),e.emit("changeScene",a.default,{mapFile:"W0N0",position:[1,1]}))},1e3)}},{key:"startMulti",value:function(){this.textLoading.text="not support now",this.showLoading()}},{key:"showLoading",value:function(){this.textLoading.visible=!0}},{key:"startLoad",value:function(){var e=this;this.isLoading=!0,u.loader.add("images/terrain_atlas.json").add("images/base_out_atlas.json").add("images/fire_bolt.png").load(function(){e.isLoading=!1,e.isLoaded=!0})}},{key:"tick",value:function(e){this.life+=e/30,this.isLoading&&(this.textLoading.text=p+Array(Math.floor(this.life)%4+1).join("."))}}]),t}();n.default=d},{"../lib/PIXI":17,"../lib/Scene":18,"../ui/Button":56,"../ui/Window":64,"./PlayScene":55}],55:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),c=e("../lib/PIXI"),a=r(e("../lib/Scene")),u=r(e("../lib/Map")),l=r(e("../lib/MapFog")),f=e("../config/constants"),s=r(e("../objects/Cat")),y=r(e("../ui/MessageWindow")),p=r(e("../ui/PlayerWindow")),d=r(e("../ui/InventoryWindow")),h=r(e("../ui/TouchDirectionControlPanel")),b=r(e("../ui/TouchOperationControlPanel"));function r(e){return e&&e.__esModule?e:{default:e}}var v=void 0,m=void 0;var g=function(e){function r(e){var t=e.mapFile,n=e.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.mapFile=t,o.toPosition=n,o.group.enableSort=!0,o.mapScale=f.IS_MOBILE?2:.5,o.mapFog=new l.default,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),o(r,[{key:"create",value:function(){v=this.parent.width,m=this.parent.height,this.isMapLoaded=!1,this.loadMap(),this.initPlayer(),this.initUi()}},{key:"initUi",value:function(){var e=new c.display.Group(1,!0),t=new c.display.Layer(e);(t.parentLayer=this).addChild(t);var n,o,r,i=new y.default((n={},f.IS_MOBILE?(n.width=v,n.fontSize=n.width/30,n.scrollBarWidth=50,n.scrollBarMinHeight=70):(n.width=v<400?v:v/2,n.fontSize=n.width/60),n.height=m/6,n.x=0,n.y=m-n.height,n)),a=new p.default((o=this.cat,r={player:o,x:0,y:0},f.IS_MOBILE?(r.width=v/4,r.height=m/6,r.fontSize=r.width/10):(r.width=v<400?v/2:v/4,r.height=m/3,r.fontSize=r.width/20),r)),u=new d.default(function(e){var t={player:e,y:0};if(f.IS_MOBILE)t.width=v/6;else{var n=v<400?6:v<800?12:20;t.width=v/n}return t.x=v-t.width,t}(this.cat));if(i.parentGroup=e,a.parentGroup=e,u.parentGroup=e,t.addChild(i),t.addChild(a),t.addChild(u),f.IS_MOBILE){var l=new h.default({x:v/4,y:4*m/6,radius:v/8});l.parentGroup=e;var s=new b.default({x:v/5*3,y:m/5*3,width:v/3,height:m/5});s.parentGroup=e,t.addChild(l),t.addChild(s)}i.add(["scene size: (",v,", ",m,")."].join(""))}},{key:"initPlayer",value:function(){this.cat||(this.cat=new s.default)}},{key:"loadMap",value:function(){var e="world/"+this.mapFile;c.resources[e]?this.spawnMap(e):c.loader.add(e,e+".json").load(this.spawnMap.bind(this,e))}},{key:"spawnMap",value:function(e){var t=this,n=new c.display.Group(0,!0),o=new c.display.Layer(n);o.parentLayer=this,o.group.enableSort=!0,o.position.set(v/2,m/2),this.addChild(o);var r=c.resources[e].data,i=new u.default;o.addChild(i),r.hasFog?this.mapFog.enable(i):this.mapFog.disable(),o.addChild(this.mapFog),i.load(r),i.on("use",function(e){t.isMapLoaded=!1,t.removeChild(t.map),t.map.destroy(),t.mapFile=e.map,t.toPosition=e.toPosition,t.loadMap()}),i.addPlayer(this.cat,this.toPosition),i.setScale(this.mapScale),this.map=i,this.isMapLoaded=!0}},{key:"tick",value:function(e){this.isMapLoaded&&(this.map.tick(e),this.map.setPosition(-this.cat.x*this.mapScale,-this.cat.y*this.mapScale))}}]),r}();n.default=g},{"../config/constants":8,"../lib/Map":12,"../lib/MapFog":13,"../lib/PIXI":17,"../lib/Scene":18,"../objects/Cat":25,"../ui/InventoryWindow":57,"../ui/MessageWindow":58,"../ui/PlayerWindow":59,"../ui/TouchDirectionControlPanel":61,"../ui/TouchOperationControlPanel":62}],56:[function(e,t,n){"use strict";var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("./Window"),u=(o=a)&&o.__esModule?o:{default:o};var l=function(e){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e)),n=e.width,o=e.height,r=e.fontSize,i=void 0===r?.5*o:r,a=e.literal,u=void 0===a?"":a,l=e.on;return t._draw(i,n,o),t.setText(u),l&&t.listen(l),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,u.default),r(s,[{key:"_draw",value:function(e,t,n){var o=new i.TextStyle({fontFamily:"Arial",fontSize:e,fill:"#773300"}),r=new i.Text("",o);r.anchor.set(.5,.5),r.position.set(t/2,n/2),this.addChild(r),this._text=r}},{key:"setText",value:function(e){this._text.text=e}},{key:"listen",value:function(e){this.interactive=!0,this.on("click",e),this.on("tap",e)}},{key:"toString",value:function(){return"Button"}}]),s}();n.default=l},{"../lib/PIXI":17,"./Window":64}],57:[function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),a=s(e("./Window")),c=e("../lib/PIXI"),u=e("../config/constants"),f=s(e("keyboardjs")),l=e("../config/control");function s(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=[l.SWITCH1,l.SWITCH2,l.SWITCH3,l.SWITCH4],b=function(e){function l(e){var t=e.x,n=e.y,o=e.width,r=e.height;y(this,l);var i=p(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));i.position.set(t,n);var a=new c.Graphics;a.beginFill(10658466),a.drawRoundedRect(0,0,o,r,5),a.endFill(),i.addChild(a);var u=new c.Graphics;return u.lineStyle(3,16711680,1),u.drawRect(0,0,o,r),u.endFill(),u.visible=!1,i.addChild(u),i.borderRect=u,i}return d(l,c.Container),r(l,[{key:"setContext",value:function(e,t){this.clearContext();var n=this.width,o=this.height,r=e.sprite(),i=n/Math.max(r.width,r.height);r.scale.set(i),r.position.set(n/2-r.width/2,o/2-r.height/2),this.addChild(r);var a=.3*this.width,u=new c.TextStyle({fontSize:a,fill:"red",fontWeight:"600",lineHeight:a}),l=t===1/0?"∞":t,s=new c.Text(l,u);s.position.set(.95*n,o),s.anchor.set(1,1),this.addChild(s),this.sprite=r,this.text=s}},{key:"clearContext",value:function(){this.sprite&&(this.sprite.destroy(),this.text.destroy(),delete this.sprite,delete this.text)}},{key:"select",value:function(){this.borderRect.visible=!0}},{key:"deselect",value:function(){this.borderRect.visible=!1}}]),l}(),v=function(e){function s(e){y(this,s);var t=e.player,n=e.width,o=.1*n,r=n-2*o,i={x:o,y:o,width:r,height:r};e.height=4*(n-o)+o;var a=p(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));a._opt=e,t.on("inventory-modified",a.onInventoryModified.bind(a,t)),a.slotContainers=[];for(var u=function(){var e=new b(i),t=h[l],n=function(){f.default.pressKey(t),f.default.releaseKey(t)};e.interactive=!0,e.on("click",n),e.on("tap",n),a.addChild(e),a.slotContainers.push(e),i.y+=r+o},l=0;l<4;l++)u();return a.slotContainers[0].select(),a.onInventoryModified(t),a.setup(t),a}return d(s,a.default),r(s,[{key:"onInventoryModified",value:function(e){var t=e[u.ABILITY_CARRY];if(t){var o=[],n=0;t.bags.forEach(function(e){o[n]=e,n++}),this.slotContainers.forEach(function(e,t){var n=o[t];n?e.setContext(n.skill,n.count):e.clearContext()})}}},{key:"setup",value:function(e){var o=this,r=e[u.ABILITY_CARRY],t=function(e){var n=h.indexOf(e),t=function(e){e.preventRepeat(),r.setCurrent(n),o.slotContainers.forEach(function(e,t){t===n?e.select():e.deselect()})};return f.default.bind(e,t,function(){}),t},n=void 0;f.default.setContext(""),f.default.withContext("",function(){n={SWITCH1:t(l.SWITCH1),SWITCH2:t(l.SWITCH2),SWITCH3:t(l.SWITCH3),SWITCH4:t(l.SWITCH4)}}),e.once("removed",function(){Object.entries(n).forEach(function(e){var t=i(e,2),n=t[0],o=t[1];f.default.unbind(n,o)})})}},{key:"toString",value:function(){return"window"}}]),s}();n.default=v},{"../config/constants":8,"../config/control":9,"../lib/PIXI":17,"./Window":64,keyboardjs:2}],58:[function(e,t,n){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=e("../lib/PIXI"),r=i(e("./ScrollableWindow")),s=i(e("../lib/Messages"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=e.fontSize,o=void 0===n?12:n,r=new l.TextStyle({fontSize:o,fill:"green",breakWords:!0,wordWrap:!0,wordWrapWidth:t.windowWidth}),i=new l.Text("",r);return t.addWindowChild(i),t.text=i,t.autoScrollToBottom=!0,s.default.on("modified",t.modified.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.default),o(a,[{key:"modified",value:function(){var e=this.scrollPercent;this.text.text=[].concat(s.default.list).reverse().join("\n"),this.updateScrollBarLength(),1===e&&this.scrollTo(1)}},{key:"add",value:function(e){s.default.add(e)}},{key:"toString",value:function(){return"message-window"}}]),a}();n.default=a},{"../lib/Messages":16,"../lib/PIXI":17,"./ScrollableWindow":60}],59:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=e("../lib/PIXI"),s=o(e("./ValueBar")),a=o(e("./Window")),u=e("../config/constants");function o(e){return e&&e.__esModule?e:{default:e}}var c=Math.floor,f=[u.ABILITY_MOVE,u.ABILITY_CAMERA,u.ABILITY_HEALTH],y=function(e){function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e)),n=e.player;return t._opt=e,t.healthBar=t.renderBar({x:5,y:5,color:13775360}),t.manaBar=t.renderBar({x:5,y:17,color:13010}),t.renderAbility({x:5,y:32}),t.onAbilityCarry(n),n.on("ability-carry",t.onAbilityCarry.bind(t,n)),n.on("health-change",t.onHealthChange.bind(t,n)),n.on("mana-change",t.onManaChange.bind(t,n)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.default),i(o,[{key:"renderAbility",value:function(e){var t=e.x,n=e.y,o=new l.Container;o.position.set(t,n),this.addChild(o),this.abilityTextContainer=o}},{key:"renderBar",value:function(e){var t=e.x,n=e.y,o=e.color,r=this._opt.width;r/=2;var i=new l.Container;i.position.set(t,n);var a=new s.default({width:r,height:10,color:o}),u=new l.Text("(10/20)",this._getTextStyle());return u.x=r+3,u.y=-3,i.addChild(a),i.addChild(u),this.addChild(i),i.bar=a,i.text=u,i}},{key:"_getTextStyle",value:function(){var e=this._opt.fontSize,t=void 0===e?10:e;return new l.TextStyle({fontSize:t,fill:"green",lineHeight:t})}},{key:"onAbilityCarry",value:function(o){var r=this,i=0,a=this.abilityTextContainer;a.removeChildren(),f.forEach(function(e){var t=o.abilities[e];if(t){var n=new l.Text(t.toString(),r._getTextStyle());n.y=i*n.height,a.addChild(n),i++}})}},{key:"onHealthChange",value:function(e){this._updateValueBar(this.healthBar,e[u.ABILITY_HEALTH])}},{key:"onManaChange",value:function(e){this._updateValueBar(this.manaBar,e[u.ABILITY_MANA])}},{key:"_updateValueBar",value:function(e,t){t?(e.visible||(e.visible=!0),e.text.text=["(",c(t.value),"/",c(t.valueMax),")"].join(""),e.bar.emit("value-change",t.value/t.valueMax)):e.visible=!1}},{key:"toString",value:function(){return"window"}}]),o}();n.default=y},{"../config/constants":8,"../lib/PIXI":17,"./ValueBar":63,"./Window":64}],60:[function(e,t,n){"use strict";var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),c=e("../lib/PIXI"),r=i(e("./Window")),f=i(e("./Wrapper"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e)),n=e.width,o=e.height,r=e.padding,i=void 0===r?8:r,a=e.scrollBarWidth,u=void 0===a?10:a;return t._opt=e,t._initScrollableArea(n-2*i-u-5,o-2*i,i),t._initScrollBar({x:n-i-u,y:i,width:u,height:o-2*i}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,r.default),o(l,[{key:"_initScrollableArea",value:function(e,t,n){var o=new c.Container;o.position.set(n,n),this.addChild(o),this.mainView=new c.Container,o.addChild(this.mainView);var r=new c.Graphics;r.beginFill(16777215),r.drawRoundedRect(0,0,e,t,5),r.endFill(),this.mainView.mask=r,o.addChild(r),this._windowWidth=e,this._windowHeight=t}},{key:"_initScrollBar",value:function(e){var t=e.x,n=e.y,o=e.width,r=e.height,i=new c.Container;i.x=t,i.y=n;var a=new c.Graphics;a.beginFill(11053224),a.drawRoundedRect(0,0,o,r,2),a.endFill();var u=new c.Graphics;u.beginFill(2236962),u.drawRoundedRect(0,0,o,r,3),u.endFill(),u.toString=function(){return"scrollBar"},f.default.draggable(u,{boundary:{x:0,y:0,width:o,height:r}}),u.on("drag",this.scrollMainView.bind(this)),i.addChild(a),i.addChild(u),this.addChild(i),this.scrollBar=u,this.scrollBarBg=a}},{key:"scrollMainView",value:function(){this.mainView.y=(this.windowHeight-this.mainView.height)*this.scrollPercent}},{key:"addWindowChild",value:function(e){this.mainView.addChild(e)}},{key:"updateScrollBarLength",value:function(){var e=this._opt.scrollBarMinHeight,t=void 0===e?20:e,n=this.mainView.height/this.windowHeight;n<1?this.scrollBar.height=this.scrollBarBg.height:(this.scrollBar.height=this.scrollBarBg.height/n,this.scrollBar.height=Math.max(t,this.scrollBar.height)),this.scrollBar.fallbackToBoundary()}},{key:"scrollTo",value:function(e){var t=this.scrollBarBg.height-this.scrollBar.height,n=0;0!==t&&(n=t*e),this.scrollBar.y=n,this.scrollMainView()}},{key:"toString",value:function(){return"window"}},{key:"scrollPercent",get:function(){var e=this.scrollBarBg.height-this.scrollBar.height;return 0===e?1:this.scrollBar.y/e}},{key:"windowWidth",get:function(){return this._windowWidth}},{key:"windowHeight",get:function(){return this._windowHeight}}]),l}();n.default=a},{"../lib/PIXI":17,"./Window":64,"./Wrapper":65}],61:[function(e,t,n){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),l=e("../lib/PIXI"),s=r(e("../lib/Vector")),c=r(e("keyboardjs")),f=e("../config/control");function r(e){return e&&e.__esModule?e:{default:e}}var i=[f.RIGHT,f.LEFT,f.UP,f.DOWN],a=function(e){function a(e){var t=e.x,n=e.y,o=e.radius;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));r.position.set(t,n);var i=new l.Graphics;return i.beginFill(15921906,.5),i.drawCircle(0,0,o),i.endFill(),r.addChild(i),r.radius=o,r.setupTouch(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,l.Container),o(a,[{key:"setupTouch",value:function(){this.interactive=!0;var e=this.onTouch.bind(this);this.on("touchstart",e),this.on("touchend",e),this.on("touchmove",e),this.on("touchendoutside",e)}},{key:"onTouch",value:function(e){var t=!1;switch(e.type){case"touchstart":this.drag=e.data.global.clone(),this.createDragPoint(),this.originPosition={x:this.x,y:this.y};break;case"touchend":case"touchendoutside":this.drag&&(this.drag=!1,this.destroyDragPoint(),this.releaseKeys());break;case"touchmove":if(!this.drag){t=!0;break}this.pressKeys(e.data.getLocalPosition(this))}t||e.stopPropagation()}},{key:"createDragPoint",value:function(){var e=new l.Graphics;e.beginFill(15921906,.5),e.drawCircle(0,0,20),e.endFill(),this.addChild(e),this.dragPoint=e}},{key:"destroyDragPoint",value:function(){this.removeChild(this.dragPoint),this.dragPoint.destroy()}},{key:"pressKeys",value:function(e){this.releaseKeys();var t=s.default.fromPoint(e),n=t.deg,o=t.length;if(!(o<30)){var r=Math.abs(n),i=r<67.5?f.RIGHT:112.5<r&&f.LEFT,a=!(r<22.5||157.5<r)&&(n<0?f.UP:f.DOWN);(i||a)&&(i&&c.default.pressKey(i),a&&c.default.pressKey(a),t.multiplyScalar(this.radius/o),this.dragPoint.position.set(t.x,t.y))}}},{key:"releaseKeys",value:function(){i.forEach(function(e){return c.default.releaseKey(e)})}},{key:"toString",value:function(){return"TouchDirectionControlPanel"}}]),a}();n.default=a},{"../config/control":9,"../lib/PIXI":17,"../lib/Vector":20,keyboardjs:2}],62:[function(e,t,n){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=e("../lib/PIXI"),r=a(e("../lib/Vector")),i=a(e("../lib/globalEventManager"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function u(e){var t=e.x,n=e.y,o=e.width,r=e.height;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));i.position.set(t,n);var a=new s.Graphics;return a.beginFill(15921906,.5),a.drawRect(0,0,o,r),a.endFill(),i.addChild(a),i.setupTouch(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,s.Container),o(u,[{key:"setupTouch",value:function(){this.center=new r.default(this.width/2,this.height/2),this.interactive=!0;var e=this.onTouch.bind(this);this.on("touchstart",e)}},{key:"onTouch",value:function(e){var t=e.data.getLocalPosition(this),n=r.default.fromPoint(t).sub(this.center);i.default.emit("rotate",n),i.default.emit("fire"),e.stopPropagation()}},{key:"toString",value:function(){return"TouchOperationControlPanel"}}]),u}();n.default=u},{"../lib/PIXI":17,"../lib/Vector":20,"../lib/globalEventManager":21}],63:[function(e,t,n){"use strict";var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),p=e("../lib/PIXI");var r=function(e){function f(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":y(t))&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this)),n=e.x,o=void 0===n?0:n,r=e.y,i=void 0===r?0:r,a=e.width,u=e.height,l=e.color,s=new p.Graphics;s.beginFill(10658466),s.lineStyle(1,2236962,1),s.drawRect(0,0,a,u),s.endFill();var c=new p.Graphics;return c.beginFill(16777215),c.drawRect(0,0,a,u),c.endFill(),t.addChild(c),t.barMask=c,t.addChild(s),t.hpBarBg=s,t._renderBar({color:l,width:a,height:u}),t.position.set(o,i),t._opt=e,t.on("value-change",t.update.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":y(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,p.Container),o(f,[{key:"update",value:function(e){this.removeChild(this.hpBarInner),this.hpBarInner.destroy();var t=this._opt,n=t.color,o=t.width,r=t.height;this._renderBar({color:n,width:o*e,height:r})}},{key:"_renderBar",value:function(e){var t=e.color,n=e.width,o=e.height,r=new p.Graphics;r.beginFill(t),r.drawRect(0,0,n,o),r.endFill(),r.mask=this.barMask,this.addChild(r),this.hpBarInner=r}}]),f}();n.default=r},{"../lib/PIXI":17}],64:[function(e,t,n){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),s=e("../lib/PIXI");var r=function(e){function u(e){var t=e.x,n=e.y,o=e.width,r=e.height;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));i.position.set(t,n);var a=new s.Graphics;return a.beginFill(15921906),a.lineStyle(3,2236962,1),a.drawRoundedRect(0,0,o,r,5),a.endFill(),i.addChild(a),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,s.Container),o(u,[{key:"toString",value:function(){return"window"}}]),u}();n.default=r},{"../lib/PIXI":17}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var a=Symbol("opt");function r(){this.drag=!1,this.interactive=!0;var e=function(e){var t=e.type,n=!1;switch(t){case"touchstart":case"mousedown":this.drag=e.data.global.clone(),this.originPosition={x:this.x,y:this.y};break;case"touchend":case"touchendoutside":case"mouseup":case"mouseupoutside":this.drag=!1;break;case"touchmove":case"mousemove":if(!this.drag){n=!0;break}var o=e.data.global.clone();this.position.set(this.originPosition.x+o.x-this.drag.x,this.originPosition.y+o.y-this.drag.y),i.call(this),this.emit("drag")}n||e.stopPropagation()}.bind(this);this.on("touchstart",e),this.on("touchend",e),this.on("touchmove",e),this.on("touchendoutside",e),this.on("mousedown",e),this.on("mouseup",e),this.on("mousemove",e),this.on("mouseupoutside",e)}function i(){var e=this[a],t=e.width,n=void 0===t?this.width:t,o=e.height,r=void 0===o?this.height:o,i=e.boundary;this.x=Math.max(this.x,i.x),this.x=Math.min(this.x,i.x+i.width-n),this.y=Math.max(this.y,i.y),this.y=Math.min(this.y,i.y+i.height-r)}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"draggable",value:function(e,t){e[a]=t,r.call(e),e.fallbackToBoundary=i}}]),e}();n.default=u},{}]},{},[7]);
//# sourceMappingURL=bundle.min.js.map
