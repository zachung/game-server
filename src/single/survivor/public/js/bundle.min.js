!function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){var l=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=l(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var i,s=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),i=0===u.x}catch(e){i=!1}function c(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=l(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=c(e))&&0<i&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(h,r);return i.listener=n,r.wrapFn=i}function d(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):b(i,i.length):[]}function y(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function b(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}i?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=b(e,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=b(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=b(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=b(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=b(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,u,this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=l(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=l(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=l(null):delete n[e]),this;if(0===arguments.length){var i,o=a(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=l(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(e,t,n){var r=e("./lib/keyboard"),i=e("./lib/locale"),o=e("./lib/key-combo"),a=new r;a.setLocale("us",e("./locales/us")),(n=t.exports=a).Keyboard=r,n.Locale=i,n.KeyCombo=o},{"./lib/key-combo":3,"./lib/keyboard":4,"./lib/locale":5,"./locales/us":6}],3:[function(e,t,n){function l(e){this.sourceStr=e,this.subCombos=l.parseComboStr(e),this.keyNames=this.subCombos.reduce(function(e,t){return e.concat(t)},[])}l.sequenceDeliminator=">>",l.comboDeliminator=">",l.keyDeliminator="+",l.parseComboStr=function(e){for(var t=l._splitStr(e,l.comboDeliminator),n=[],r=0;r<t.length;r+=1)n.push(l._splitStr(t[r],l.keyDeliminator));return n},l.prototype.check=function(e){for(var t=0,n=0;n<this.subCombos.length;n+=1)if(-1===(t=this._checkSubCombo(this.subCombos[n],t,e)))return!1;return!0},l.prototype.isEqual=function(e){if(!e||"string"!=typeof e&&"object"!=typeof e)return!1;if("string"==typeof e&&(e=new l(e)),this.subCombos.length!==e.subCombos.length)return!1;for(var t=0;t<this.subCombos.length;t+=1)if(this.subCombos[t].length!==e.subCombos[t].length)return!1;for(t=0;t<this.subCombos.length;t+=1){for(var n=this.subCombos[t],r=e.subCombos[t].slice(0),i=0;i<n.length;i+=1){var o=n[i],a=r.indexOf(o);-1<a&&r.splice(a,1)}if(0!==r.length)return!1}return!0},l._splitStr=function(e,t){for(var n=e,r=t,i="",o=[],a=0;a<n.length;a+=1)0<a&&n[a]===r&&"\\"!==n[a-1]&&(o.push(i.trim()),i="",a+=1),i+=n[a];return i&&o.push(i.trim()),o},l.prototype._checkSubCombo=function(e,t,n){e=e.slice(0),n=n.slice(t);for(var r=t,i=0;i<e.length;i+=1){var o=e[i];if("\\"===o[0]){var a=o.slice(1);a!==l.comboDeliminator&&a!==l.keyDeliminator||(o=a)}var s=n.indexOf(o);if(-1<s&&(e.splice(i,1),i-=1,r<s&&(r=s),0===e.length))return r}return-1},t.exports=l},{}],4:[function(t,n,e){(function(s){var r=t("./locale"),c=t("./key-combo");function e(e,t,n,r){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(e,t,n,r)}e.prototype.setLocale=function(e,t){var n=null;"string"==typeof e?t?t(n=new r(e),this._targetPlatform,this._targetUserAgent):n=this._locales[e]||null:e=(n=e)._localeName,this._locale=n,(this._locales[e]=n)&&(this._locale.pressedKeys=n.pressedKeys)},e.prototype.getLocale=function(e){return e||(e=this._locale.localeName),this._locales[e]||null},e.prototype.addListener=e.prototype.bind=function(e,t,n,r){if(null!==e&&"function"!=typeof e||(r=n,n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var i=0;i<e.length;i+=1)this.bind(e[i],t,n);else this._listeners.push({keyCombo:e?new c(e):null,pressHandler:t||null,releaseHandler:n||null,preventRepeat:r||!1,preventRepeatByDefault:r||!1})},e.prototype.on=e.prototype.bind,e.prototype.removeListener=e.prototype.unbind=function(e,t,n){if(null!==e&&"function"!=typeof e||(n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var r=0;r<e.length;r+=1)this.unbind(e[r],t,n);else for(r=0;r<this._listeners.length;r+=1){var i=this._listeners[r],o=!e&&!i.keyCombo||i.keyCombo&&i.keyCombo.isEqual(e),a=!t&&!n||!t&&!i.pressHandler||t===i.pressHandler,s=!t&&!n||!n&&!i.releaseHandler||n===i.releaseHandler;o&&a&&s&&(this._listeners.splice(r,1),r-=1)}},e.prototype.off=e.prototype.unbind,e.prototype.setContext=function(e){this._locale&&this.releaseAllKeys(),this._contexts[e]||(this._contexts[e]=[]),this._listeners=this._contexts[e],this._currentContext=e},e.prototype.getContext=function(){return this._currentContext},e.prototype.withContext=function(e,t){var n=this.getContext();this.setContext(e),t(),this.setContext(n)},e.prototype.watch=function(e,t,n,r){var i=this;if(this.stop(),!e){if(!s.addEventListener&&!s.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");e=s}if("number"==typeof e.nodeType&&(r=n,n=t,t=e,e=s),!e.addEventListener&&!e.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!e.addEventListener;var o=e.navigator&&e.navigator.userAgent||"",a=e.navigator&&e.navigator.platform||"";t&&null!==t||(t=e.document),n&&null!==n||(n=a),r&&null!==r||(r=o),this._targetKeyDownBinding=function(e){i.pressKey(e.keyCode,e),i._handleCommandBug(e,a)},this._targetKeyUpBinding=function(e){i.releaseKey(e.keyCode,e)},this._targetResetBinding=function(e){i.releaseAllKeys(e)},this._bindEvent(t,"keydown",this._targetKeyDownBinding),this._bindEvent(t,"keyup",this._targetKeyUpBinding),this._bindEvent(e,"focus",this._targetResetBinding),this._bindEvent(e,"blur",this._targetResetBinding),this._targetElement=t,this._targetWindow=e,this._targetPlatform=n,this._targetUserAgent=r},e.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},e.prototype.pressKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(e),this._applyBindings(t)}},e.prototype.releaseKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(e),this._clearBindings(t)}},e.prototype.releaseAllKeys=function(e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(e)}},e.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},e.prototype.resume=function(){this._paused=!1},e.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},e.prototype._bindEvent=function(e,t,n){return this._isModernBrowser?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},e.prototype._unbindEvent=function(e,t,n){return this._isModernBrowser?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e.prototype._getGroupedListeners=function(){var r=[],i=[],e=this._listeners;return"global"!==this._currentContext&&(e=[].concat(e,this._contexts.global)),e.sort(function(e,t){return(t.keyCombo?t.keyCombo.keyNames.length:0)-(e.keyCombo?e.keyCombo.keyNames.length:0)}).forEach(function(e){for(var t=-1,n=0;n<i.length;n+=1)(null===i[n]&&null===e.keyCombo||null!==i[n]&&i[n].isEqual(e.keyCombo))&&(t=n);-1===t&&(t=i.length,i.push(e.keyCombo)),r[t]||(r[t]=[]),r[t].push(e)}),r},e.prototype._applyBindings=function(e){var t=!1;e||(e={}),e.preventRepeat=function(){t=!0},e.pressedKeys=this._locale.pressedKeys.slice(0);for(var n=this._locale.pressedKeys.slice(0),r=this._getGroupedListeners(),i=0;i<r.length;i+=1){var o=r[i],a=o[0].keyCombo;if(null===a||a.check(n)){for(var s=0;s<o.length;s+=1){var l=o[s];null===a&&(l={keyCombo:new c(n.join("+")),pressHandler:l.pressHandler,releaseHandler:l.releaseHandler,preventRepeat:l.preventRepeat,preventRepeatByDefault:l.preventRepeatByDefault}),l.pressHandler&&!l.preventRepeat&&(l.pressHandler.call(this,e),t&&(l.preventRepeat=t,t=!1)),l.releaseHandler&&-1===this._appliedListeners.indexOf(l)&&this._appliedListeners.push(l)}if(a)for(s=0;s<a.keyNames.length;s+=1){var u=n.indexOf(a.keyNames[s]);-1!==u&&(n.splice(u,1),s-=1)}}}},e.prototype._clearBindings=function(e){e||(e={});for(var t=0;t<this._appliedListeners.length;t+=1){var n=this._appliedListeners[t],r=n.keyCombo;if(null===r||!r.check(this._locale.pressedKeys)){if(this._callerHandler!==n.releaseHandler){var i=this._callerHandler;this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,e),this._callerHandler=i}this._appliedListeners.splice(t,1),t-=1}}},e.prototype._handleCommandBug=function(e,t){t.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(e.keyCode)[0])&&this._targetKeyUpBinding(e)},n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./key-combo":3,"./locale":5}],5:[function(e,t,n){var i=e("./key-combo");function r(e){this.localeName=e,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}r.prototype.bindKeyCode=function(e,t){"string"==typeof t&&(t=[t]),this._keyMap[e]=t},r.prototype.bindMacro=function(e,t){"string"==typeof t&&(t=[t]);var n=null;"function"==typeof t&&(n=t,t=null);var r={keyCombo:new i(e),keyNames:t,handler:n};this._macros.push(r)},r.prototype.getKeyCodes=function(e){var t=[];for(var n in this._keyMap){-1<this._keyMap[n].indexOf(e)&&t.push(0|n)}return t},r.prototype.getKeyNames=function(e){return this._keyMap[e]||[]},r.prototype.setKillKey=function(e){if("string"!=typeof e)this._killKeyCodes.push(e);else for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.setKillKey(t[n])},r.prototype.pressKey=function(e){if("string"!=typeof e){var t=this.getKeyNames(e);for(r=0;r<t.length;r+=1)-1===this.pressedKeys.indexOf(t[r])&&this.pressedKeys.push(t[r]);this._applyMacros()}else for(var n=this.getKeyCodes(e),r=0;r<n.length;r+=1)this.pressKey(n[r])},r.prototype.releaseKey=function(e){if("string"==typeof e)for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.releaseKey(t[n]);else{var r=this.getKeyNames(e);if(-1<this._killKeyCodes.indexOf(e))this.pressedKeys.length=0;else for(n=0;n<r.length;n+=1){var i=this.pressedKeys.indexOf(r[n]);-1<i&&this.pressedKeys.splice(i,1)}this._clearMacros()}},r.prototype._applyMacros=function(){for(var e=this._macros.slice(0),t=0;t<e.length;t+=1){var n=e[t];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var r=0;r<n.keyNames.length;r+=1)-1===this.pressedKeys.indexOf(n.keyNames[r])&&this.pressedKeys.push(n.keyNames[r]);this._appliedMacros.push(n)}}},r.prototype._clearMacros=function(){for(var e=0;e<this._appliedMacros.length;e+=1){var t=this._appliedMacros[e];if(!t.keyCombo.check(this.pressedKeys)){for(var n=0;n<t.keyNames.length;n+=1){var r=this.pressedKeys.indexOf(t.keyNames[n]);-1<r&&this.pressedKeys.splice(r,1)}t.handler&&(t.keyNames=null),this._appliedMacros.splice(e,1),e-=1}}},t.exports=r},{"./key-combo":3}],6:[function(e,t,n){t.exports=function(e,t,n){e.bindKeyCode(3,["cancel"]),e.bindKeyCode(8,["backspace"]),e.bindKeyCode(9,["tab"]),e.bindKeyCode(12,["clear"]),e.bindKeyCode(13,["enter"]),e.bindKeyCode(16,["shift"]),e.bindKeyCode(17,["ctrl"]),e.bindKeyCode(18,["alt","menu"]),e.bindKeyCode(19,["pause","break"]),e.bindKeyCode(20,["capslock"]),e.bindKeyCode(27,["escape","esc"]),e.bindKeyCode(32,["space","spacebar"]),e.bindKeyCode(33,["pageup"]),e.bindKeyCode(34,["pagedown"]),e.bindKeyCode(35,["end"]),e.bindKeyCode(36,["home"]),e.bindKeyCode(37,["left"]),e.bindKeyCode(38,["up"]),e.bindKeyCode(39,["right"]),e.bindKeyCode(40,["down"]),e.bindKeyCode(41,["select"]),e.bindKeyCode(42,["printscreen"]),e.bindKeyCode(43,["execute"]),e.bindKeyCode(44,["snapshot"]),e.bindKeyCode(45,["insert","ins"]),e.bindKeyCode(46,["delete","del"]),e.bindKeyCode(47,["help"]),e.bindKeyCode(145,["scrolllock","scroll"]),e.bindKeyCode(187,["equal","equalsign","="]),e.bindKeyCode(188,["comma",","]),e.bindKeyCode(190,["period","."]),e.bindKeyCode(191,["slash","forwardslash","/"]),e.bindKeyCode(192,["graveaccent","`"]),e.bindKeyCode(219,["openbracket","["]),e.bindKeyCode(220,["backslash","\\"]),e.bindKeyCode(221,["closebracket","]"]),e.bindKeyCode(222,["apostrophe","'"]),e.bindKeyCode(48,["zero","0"]),e.bindKeyCode(49,["one","1"]),e.bindKeyCode(50,["two","2"]),e.bindKeyCode(51,["three","3"]),e.bindKeyCode(52,["four","4"]),e.bindKeyCode(53,["five","5"]),e.bindKeyCode(54,["six","6"]),e.bindKeyCode(55,["seven","7"]),e.bindKeyCode(56,["eight","8"]),e.bindKeyCode(57,["nine","9"]),e.bindKeyCode(96,["numzero","num0"]),e.bindKeyCode(97,["numone","num1"]),e.bindKeyCode(98,["numtwo","num2"]),e.bindKeyCode(99,["numthree","num3"]),e.bindKeyCode(100,["numfour","num4"]),e.bindKeyCode(101,["numfive","num5"]),e.bindKeyCode(102,["numsix","num6"]),e.bindKeyCode(103,["numseven","num7"]),e.bindKeyCode(104,["numeight","num8"]),e.bindKeyCode(105,["numnine","num9"]),e.bindKeyCode(106,["nummultiply","num*"]),e.bindKeyCode(107,["numadd","num+"]),e.bindKeyCode(108,["numenter"]),e.bindKeyCode(109,["numsubtract","num-"]),e.bindKeyCode(110,["numdecimal","num."]),e.bindKeyCode(111,["numdivide","num/"]),e.bindKeyCode(144,["numlock","num"]),e.bindKeyCode(112,["f1"]),e.bindKeyCode(113,["f2"]),e.bindKeyCode(114,["f3"]),e.bindKeyCode(115,["f4"]),e.bindKeyCode(116,["f5"]),e.bindKeyCode(117,["f6"]),e.bindKeyCode(118,["f7"]),e.bindKeyCode(119,["f8"]),e.bindKeyCode(120,["f9"]),e.bindKeyCode(121,["f10"]),e.bindKeyCode(122,["f11"]),e.bindKeyCode(123,["f12"]),e.bindMacro("shift + `",["tilde","~"]),e.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),e.bindMacro("shift + 2",["at","@"]),e.bindMacro("shift + 3",["number","#"]),e.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),e.bindMacro("shift + 5",["percent","%"]),e.bindMacro("shift + 6",["caret","^"]),e.bindMacro("shift + 7",["ampersand","and","&"]),e.bindMacro("shift + 8",["asterisk","*"]),e.bindMacro("shift + 9",["openparen","("]),e.bindMacro("shift + 0",["closeparen",")"]),e.bindMacro("shift + -",["underscore","_"]),e.bindMacro("shift + =",["plus","+"]),e.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),e.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),e.bindMacro("shift + \\",["verticalbar","|"]),e.bindMacro("shift + ;",["colon",":"]),e.bindMacro("shift + '",["quotationmark","'"]),e.bindMacro("shift + !,",["openanglebracket","<"]),e.bindMacro("shift + .",["closeanglebracket",">"]),e.bindMacro("shift + /",["questionmark","?"]),t.match("Mac")?e.bindMacro("command",["mod","modifier"]):e.bindMacro("ctrl",["mod","modifier"]);for(var r=65;r<=90;r+=1){var i=String.fromCharCode(r+32),o=String.fromCharCode(r);e.bindKeyCode(r,i),e.bindMacro("shift + "+i,o),e.bindMacro("capslock + "+i,o)}var a,s,l=n.match("Firefox")?59:186,u=n.match("Firefox")?173:189;t.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(a=91,s=93):t.match("Mac")&&n.match("Opera")?s=a=17:t.match("Mac")&&n.match("Firefox")&&(s=a=224),e.bindKeyCode(l,["semicolon",";"]),e.bindKeyCode(u,["dash","-"]),e.bindKeyCode(a,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),e.bindKeyCode(s,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),e.setKillKey("command")}},{}],7:[function(e,t,n){"use strict";var r=o(e("./lib/Application")),i=o(e("./scenes/LoadingScene"));function o(e){return e&&e.__esModule?e:{default:e}}var a=new r.default({width:256,height:256,antialias:!0,transparent:!1,resolution:1,autoStart:!1});a.renderer.view.style.position="absolute",a.renderer.view.style.display="block",a.renderer.autoResize=!0,a.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(a.view),a.changeStage(),a.start(),a.changeScene(i.default)},{"./lib/Application":10,"./scenes/LoadingScene":32}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.IS_MOBILE=(r=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(r.substr(0,4))),n.CEIL_SIZE=32;var r,i=n.ABILITY_MOVE=Symbol("move"),o=n.ABILITY_CAMERA=Symbol("camera"),a=n.ABILITY_OPERATE=Symbol("operate"),s=n.ABILITY_KEY_MOVE=Symbol("key-move"),l=n.ABILITY_LIFE=Symbol("life");n.ABILITIES_ALL=[i,o,a,s,l],n.STATIC="static",n.STAY="stay",n.REPLY="reply"},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.LEFT="a",n.UP="w",n.RIGHT="d",n.DOWN="s"},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("./PIXI");var i=function(e){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Application),r(a,[{key:"changeStage",value:function(){this.stage=new s.display.Stage}},{key:"changeScene",value:function(e,t){this.currentScene&&(this.currentScene.destroy(),this.stage.removeChild(this.currentScene));var n=new e(t);this.stage.addChild(n),n.create(),n.on("changeScene",this.changeScene.bind(this)),this.currentScene=n}},{key:"start",value:function(){for(var e,t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this)).call.apply(e,[this].concat(r));var o=this.renderer.view;this.stage.addChild((new s.Graphics).drawRect(0,0,o.width,o.height)),this.ticker.add(function(e){return t.gameLoop.bind(t)(e)})}},{key:"gameLoop",value:function(e){this.currentScene.tick(e)}}]),a}();n.default=i},{"./PIXI":15}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=new Bump(PIXI)},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=e("./PIXI"),c=e("../config/constants");var f=Symbol("light"),i=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"lightOn",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=e.parent;if(r.lighting){var i=new u.Graphics,o=t*c.CEIL_SIZE,a=e.width/2/e.scale.x,s=e.height/2/e.scale.y;if(i.beginFill(16777215,1),i.drawCircle(a,s,o),i.endFill(),i.parentLayer=r.lighting,e[f]={light:i},e.addChild(i),1!==n){var l=setInterval(function(){var e=Math.random()*(1-n);1<i.scale.x&&(e=-e),i.scale.x+=e,i.scale.y+=e,i.alpha+=e},1e3/12);e[f].interval=l}}else console.error("container does NOT has lighting property")}},{key:"lightOff",value:function(e){e.removeChild(e[f].light),clearInterval(e[f].interval),delete e[f],e.off("removed",t.lightOff)}}]),t}();n.default=i},{"../config/constants":8,"./PIXI":15}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./PIXI"),p=e("../config/constants"),d=e("./utils"),a=e("../lib/Bump"),s=(r=a)&&r.__esModule?r:{default:r};var l=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.ceilSize=e*p.CEIL_SIZE,t.mapScale=e,t.collideObjects=[],t.replyObjects=[],t.map=new o.Container,t.addChild(t.map),t.once("added",t.enableFog.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Container),i(n,[{key:"enableFog",value:function(){var e=new o.display.Layer;e.on("display",function(e){e.blendMode=o.BLEND_MODES.ADD}),e.useRenderTexture=!0,e.clearColor=[0,0,0,1],this.addChild(e);var t=new o.Sprite(e.getRenderTexture());t.blendMode=o.BLEND_MODES.MULTIPLY,this.addChild(t),this.map.lighting=e}},{key:"disableFog",value:function(){this.lighting.clearColor=[1,1,1,1]}},{key:"load",value:function(e){for(var s=this,t=e.tiles,n=e.cols,r=e.rows,l=e.items,u=this.ceilSize,c=this.mapScale,i=0;i<n;i++)for(var o=0;o<r;o++){var a=t[o*n+i],f=(0,d.instanceByItemId)(a);switch(f.position.set(i*u,o*u),f.scale.set(c,c),f.type){case p.STAY:this.collideObjects.push(f)}this.map.addChild(f)}l.forEach(function(e,t){var n=h(e,3),r=n[0],i=n[1],o=n[2],a=(0,d.instanceByItemId)(r,o);switch(a.position.set(i[0]*u,i[1]*u),a.scale.set(c,c),s.map.addChild(a),a.type){case p.STATIC:return;case p.STAY:s.collideObjects.push(a);break;default:s.replyObjects.push(a)}a.on("use",function(){return s.emit("use",a)}),a.on("removed",function(){var e=s.replyObjects.indexOf(a);s.replyObjects.splice(e,1),delete l[t]})})}},{key:"addPlayer",value:function(e,t){e.position.set(t[0]*this.ceilSize,t[1]*this.ceilSize),e.scale.set(this.mapScale,this.mapScale),this.map.addChild(e),this.player=e}},{key:"tick",value:function(e){var t=this;this.player.tick(e),this.collideObjects.forEach(function(e){s.default.rectangleCollision(t.player,e,!0)&&e.emit("collide",t.player)}),this.replyObjects.forEach(function(e){s.default.hitTestRectangle(t.player,e)&&e.emit("collide",t.player)})}},{key:"position",get:function(){return this.map.position}},{key:"x",get:function(){return this.map.x},set:function(e){this.map.x=e}},{key:"y",get:function(){return this.map.y},set:function(e){this.map.y=e}}]),n}();n.default=l},{"../config/constants":8,"../lib/Bump":11,"./PIXI":15,"./utils":19}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("events"),a=(r=o)&&r.__esModule?r:{default:r};var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._messages=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"add",value:function(e){500<this._messages.unshift(e)&&this._messages.pop(),this.emit("modified")}},{key:"list",get:function(){return this._messages}}]),t}();n.default=new s},{events:1}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Application=PIXI.Application,n.Container=PIXI.Container,n.loader=PIXI.loader,n.resources=PIXI.loader.resources,n.Sprite=PIXI.Sprite,n.Text=PIXI.Text,n.TextStyle=PIXI.TextStyle,n.Graphics=PIXI.Graphics,n.BLEND_MODES=PIXI.BLEND_MODES,n.display=PIXI.display,n.utils=PIXI.utils},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./PIXI");var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.display.Layer),r(t,[{key:"create",value:function(){}},{key:"destroy",value:function(){}},{key:"tick",value:function(e){}}]),t}();n.default=o},{"./PIXI":15}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../lib/PIXI");var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"TerrainAtlas",get:function(){return i.resources["images/terrain_atlas.json"]}},{key:"BaseOutAtlas",get:function(){return i.resources["images/base_out_atlas.json"]}},{key:"TownTiles",get:function(){return i.resources["images/town_tiles.json"]}},{key:"Rock",get:function(){return e.TerrainAtlas.textures["rock.png"]}},{key:"Wall",get:function(){return e.TerrainAtlas.textures["wall.png"]}},{key:"Grass",get:function(){return e.TerrainAtlas.textures["grass.png"]}},{key:"Door",get:function(){return e.BaseOutAtlas.textures["door.png"]}},{key:"Torch",get:function(){return e.BaseOutAtlas.textures["torch.png"]}},{key:"Treasure",get:function(){return e.BaseOutAtlas.textures["treasure.png"]}}]),e}();n.default=o},{"../lib/PIXI":15}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=180/Math.PI,o=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}return r(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"invert",value:function(){return this.multiplyScalar(-1)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divideScalar",value:function(e){return 0!==e?this.multiplyScalar(1/e):(this.x=0,this.y=0,this)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSq(e))}},{key:"distanceToSq",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setLength",value:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"rad",value:function(){return Math.atan2(this.y,this.x)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"rotate",value:function(e){var t=this.x;return this.x=this.x*Math.cos(e)-this.y*Math.sin(e),this.y=t*Math.sin(e)+this.y*Math.cos(e),this}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"deg",get:function(){return this.rad()*i}}],[{key:"fromPoint",value:function(e){return new n(e.x,e.y)}},{key:"fromDegLength",value:function(e,t){return new n(t*Math.cos(e),t*Math.sin(e))}}]),n}();n.default=o},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.instanceByItemId=function(e,t){return new h[e](t)},n.instanceByAbilityId=function(e,t){return new p[e](t)};var r=f(e("../objects/Wall")),i=f(e("../objects/Grass")),o=f(e("../objects/Treasure")),a=f(e("../objects/Door")),s=f(e("../objects/Torch")),l=f(e("../objects/abilities/Move")),u=f(e("../objects/abilities/Camera")),c=f(e("../objects/abilities/Operate"));function f(e){return e&&e.__esModule?e:{default:e}}var h=[i.default,r.default,o.default,a.default,s.default],p=[l.default,u.default,c.default]},{"../objects/Door":21,"../objects/Grass":23,"../objects/Torch":24,"../objects/Treasure":25,"../objects/Wall":26,"../objects/abilities/Camera":28,"../objects/abilities/Move":30,"../objects/abilities/Operate":31}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("../lib/Texture")),o=a(e("./GameObject"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Rock));return e.dx=0,e.dy=0,e.tickAbilities={},e.abilities={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"takeAbility",value:function(e){e.hasToReplace(this,e)&&(e.carryBy(this),this.emit("ability-carry",e))}},{key:"toString",value:function(){return"you"}},{key:"tick",value:function(t){var n=this;Object.values(this.tickAbilities).forEach(function(e){return e.tick(t,n)})}}]),t}();n.default=s},{"../lib/Texture":17,"./GameObject":22}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=s(e("../lib/Texture")),o=s(e("./GameObject")),a=e("../config/constants");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.default.Door));return t.map=e[0],t.toPosition=e[1],t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default),r(n,[{key:"actionWith",value:function(e){var t=e.abilities[a.ABILITY_OPERATE];t?t.use(e,this):this.say([e.toString()," dosen't has ability to use this door ",this.map,"."].join(""))}},{key:a.ABILITY_OPERATE,value:function(){this.say(["Get in ",this.map," now."].join("")),this.emit("use")}},{key:"type",get:function(){return a.STAY}}]),n}();n.default=l},{"../config/constants":8,"../lib/Texture":17,"./GameObject":22}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("../lib/PIXI"),a=e("../config/constants"),s=e("../lib/Messages"),l=(r=s)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Sprite),i(t,[{key:"say",value:function(e){l.default.add(e),console.log(e)}},{key:"type",get:function(){return a.STATIC}}]),t}();n.default=u},{"../config/constants":8,"../lib/Messages":14,"../lib/PIXI":15}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=s(e("../lib/Texture")),o=s(e("./GameObject")),a=e("../config/constants");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Grass))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"type",get:function(){return a.STATIC}}]),t}();n.default=l},{"../config/constants":8,"../lib/Texture":17,"./GameObject":22}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=l(e("../lib/Texture")),o=l(e("../lib/Light")),a=l(e("./GameObject")),s=e("../config/constants");function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Torch));return e.on("added",o.default.lightOn.bind(null,e,3,.95)),e.on("removeed",o.default.lightOff.bind(null,e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"type",get:function(){return s.STATIC}}]),t}();n.default=u},{"../config/constants":8,"../lib/Light":12,"../lib/Texture":17,"./GameObject":22}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=u(e("../lib/Texture")),a=u(e("./GameObject")),s=e("../config/constants"),l=e("../lib/utils");function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o.default.Treasure));return t.inventories=e.map(function(e){var t=i(e,2),n=t[0],r=t[1];return(0,l.instanceByAbilityId)(n,r)}),t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),r(n,[{key:"toString",value:function(){return["treasure: [",this.inventories.join(", "),"]"].join("")}},{key:"actionWith",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"takeAbility";"function"==typeof t[n]&&(this.inventories.forEach(function(e){return t[n](e)}),this.say([t.toString()," taked ",this.toString()].join("")),this.parent.removeChild(this),this.destroy())}},{key:"type",get:function(){return s.REPLY}}]),n}();n.default=c},{"../config/constants":8,"../lib/Texture":17,"../lib/utils":19,"./GameObject":22}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=s(e("../lib/Texture")),o=s(e("./GameObject")),a=e("../config/constants");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Wall))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"type",get:function(){return a.STAY}}]),t}();n.default=l},{"../config/constants":8,"../lib/Texture":17,"./GameObject":22}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var i=Symbol("ability"),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getSameTypeAbility",value:function(e){return e.abilities[this.type]}},{key:"hasToReplace",value:function(e,t){var n=this.getSameTypeAbility(e);return!n||t.isBetter(n)}},{key:"isBetter",value:function(e){return!0}},{key:"carryBy",value:function(e){var t=this.getSameTypeAbility(e);t&&t.replacedBy(this,e),e.abilities[this.type]=this}},{key:"replacedBy",value:function(e,t){}},{key:"dropBy",value:function(e){delete e.abilities[this.type]}},{key:"toString",value:function(){return"plz extend this class"}},{key:"type",get:function(){return i}}]),e}();n.default=o},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=r(e("./Ability")),a=r(e("../../lib/Light")),s=e("../../config/constants");function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.radius=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.default),i(r,[{key:"isBetter",value:function(e){return this.radius>=e.radius}},{key:"carryBy",value:function(t){var n=this;(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"carryBy",this).call(this,t),t.parent?this.setup(t,t.parent):t.once("added",function(e){return n.setup(t,e)})}},{key:"replacedBy",value:function(e,t){this.dropBy(t)}},{key:"setup",value:function(e,t){a.default.lightOn(e,this.radius),e.removed=this.onRemoved.bind(this,e),e.once("removed",e.removed)}},{key:"onRemoved",value:function(t){var n=this;this.dropBy(t),t.once("added",function(e){return n.setup(t,e)})}},{key:"dropBy",value:function(e){a.default.lightOff(e),e.off("removed",e.removed),delete e.removed}},{key:"toString",value:function(){return"light area: "+this.radius}},{key:"type",get:function(){return s.ABILITY_CAMERA}}]),r}();n.default=l},{"../../config/constants":8,"../../lib/Light":12,"./Ability":27}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},a=c(e("./Ability")),s=c(e("keyboardjs")),l=e("../../config/control"),u=e("../../config/constants");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"isBetter",value:function(e){return!1}},{key:"carryBy",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"carryBy",this).call(this,e),this.setup(e)}},{key:"setup",value:function(t){var n={},r=function(){t.dx=-n[l.LEFT]+n[l.RIGHT],t.dy=-n[l.UP]+n[l.DOWN]},i=function(t){n[t]=0;var e=function(e){e.preventRepeat(),n[t]=1,r()};return s.default.bind(t,e,function(){n[t]=0,r()}),e};s.default.setContext(""),s.default.withContext("",function(){var e;t[u.ABILITY_KEY_MOVE]=(f(e={},l.LEFT,i(l.LEFT)),f(e,l.UP,i(l.UP)),f(e,l.RIGHT,i(l.RIGHT)),f(e,l.DOWN,i(l.DOWN)),e)})}},{key:"dropBy",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dropBy",this).call(this,e),s.default.withContext("",function(){Object.entries(e[u.ABILITY_KEY_MOVE]).forEach(function(e){var t=i(e,2),n=t[0],r=t[1];s.default.unbind(n,r)})}),delete e[u.ABILITY_KEY_MOVE]}},{key:"toString",value:function(){return"key control"}},{key:"type",get:function(){return u.ABILITY_KEY_MOVE}}]),t}();n.default=h},{"../../config/constants":8,"../../config/control":9,"./Ability":27,keyboardjs:2}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Ability"),a=(r=o)&&r.__esModule?r:{default:r},s=e("../../config/constants");var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.value=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"isBetter",value:function(e){return this.value>e.value}},{key:"carryBy",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"carryBy",this).call(this,e),e.tickAbilities[this.type.toString()]=this}},{key:"tick",value:function(e,t){var n=t.scale.x;t.x+=t.dx*this.value*n*e,t.y+=t.dy*this.value*n*e}},{key:"toString",value:function(){return"move level: "+this.value}},{key:"type",get:function(){return s.ABILITY_MOVE}}]),n}();n.default=l},{"../../config/constants":8,"./Ability":27}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("./Ability"),a=(r=o)&&r.__esModule?r:{default:r},s=e("../../config/constants");var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.set=new Set([e]),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"replacedBy",value:function(e){this.set.forEach(e.set.add.bind(e.set))}},{key:"use",value:function(e,t){this.set.has(t.map)&&(e.say(e.toString()+" use ability to open "+t.map),t[this.type]())}},{key:"toString",value:function(){return["keys: ",Array.from(this.set).join(", ")].join("")}},{key:"type",get:function(){return s.ABILITY_OPERATE}}]),n}();n.default=l},{"../../config/constants":8,"./Ability":27}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../lib/PIXI"),o=s(e("../lib/Scene")),a=s(e("./PlayScene"));function s(e){return e&&e.__esModule?e:{default:e}}var l="loading",u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.life=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"create",value:function(){var e=this,t=new i.TextStyle({fontFamily:"Arial",fontSize:36,fill:"white",stroke:"#ff3300",strokeThickness:4,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6});this.textLoading=new i.Text(l,t),this.addChild(this.textLoading),i.loader.add("images/town_tiles.json").add("images/terrain_atlas.json").add("images/base_out_atlas.json").load(function(){return e.emit("changeScene",a.default,{mapFile:"E0N0",position:[1,1]})})}},{key:"tick",value:function(e){this.life+=e/30,this.textLoading.text=l+Array(Math.floor(this.life)%4+1).join(".")}}]),t}();n.default=u},{"../lib/PIXI":15,"../lib/Scene":16,"./PlayScene":33}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("../lib/PIXI"),o=i(e("../lib/Scene")),a=i(e("../lib/Map")),l=e("../config/constants"),u=i(e("../objects/Cat")),c=i(e("../objects/abilities/Move")),f=i(e("../objects/abilities/KeyMove")),h=i(e("../objects/abilities/Operate")),p=i(e("../objects/abilities/Camera")),d=i(e("../ui/MessageWindow")),y=i(e("../ui/PlayerWindow")),b=i(e("../ui/TouchControlPanel"));function i(e){return e&&e.__esModule?e:{default:e}}var v=void 0,g=void 0;var m=function(e){function i(e){var t=e.mapFile,n=e.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return r.mapFile=t,r.toPosition=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,o.default),r(i,[{key:"create",value:function(){v=this.parent.width,g=this.parent.height,this.isMapLoaded=!1,this.loadMap(),this.initPlayer(),this.initUi()}},{key:"initUi",value:function(){var e=new s.display.Group(0,!0),t=new s.display.Layer(e);t.parentLayer=this,t.group.enableSort=!0,this.addChild(t);var n,r=new d.default((n={},l.IS_MOBILE?(n.width=v,n.fontSize=n.width/30,n.scrollBarWidth=50,n.scrollBarMinHeight=70):(n.width=v<400?v:v/2,n.fontSize=n.width/60),n.height=g/6,n.x=0,n.y=g-n.height,n));r.parentGroup=e,r.add(["scene size: (",v,", ",g,")."].join(""));var i,o=new y.default(Object.assign({player:this.cat},(i={x:0,y:0},l.IS_MOBILE?(i.width=v/4,i.height=g/6,i.fontSize=i.width/10):(i.width=v<400?v/2:v/4,i.height=g/3,i.fontSize=i.width/20),i)));if(t.addChild(r),t.addChild(o),l.IS_MOBILE){var a=new b.default({x:v/4,y:4*g/6,radius:v/10});a.parentGroup=e,t.addChild(a)}}},{key:"initPlayer",value:function(){this.cat||(this.cat=new u.default,this.cat.takeAbility(new c.default(1)),this.cat.takeAbility(new h.default("E0N0")),this.cat.takeAbility(new f.default),this.cat.takeAbility(new p.default(1)))}},{key:"loadMap",value:function(){var e="world/"+this.mapFile;s.resources[e]?this.spawnMap(e):s.loader.add(e,e+".json").load(this.spawnMap.bind(this,e))}},{key:"spawnMap",value:function(e){var t=this,n=s.resources[e].data,r=l.IS_MOBILE?1:.5,i=new a.default(r);this.addChild(i),i.load(n),i.on("use",function(e){t.isMapLoaded=!1,t.removeChild(t.map),t.map.destroy(),t.mapFile=e.map,t.toPosition=e.toPosition,t.loadMap()}),i.addPlayer(this.cat,this.toPosition),this.map=i,this.isMapLoaded=!0}},{key:"tick",value:function(e){this.isMapLoaded&&(this.map.tick(e),this.map.position.set(v/2-this.cat.x,g/2-this.cat.y))}}]),i}();n.default=m},{"../config/constants":8,"../lib/Map":13,"../lib/PIXI":15,"../lib/Scene":16,"../objects/Cat":20,"../objects/abilities/Camera":28,"../objects/abilities/KeyMove":29,"../objects/abilities/Move":30,"../objects/abilities/Operate":31,"../ui/MessageWindow":34,"../ui/PlayerWindow":35,"../ui/TouchControlPanel":37}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("../lib/PIXI"),i=o(e("./ScrollableWindow")),l=o(e("../lib/Messages"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),n=e.fontSize,r=void 0===n?12:n,i=new s.TextStyle({fontSize:r,fill:"green",breakWords:!0,wordWrap:!0,wordWrapWidth:t.windowWidth}),o=new s.Text("",i);return t.addWindowChild(o),t.text=o,t.autoScrollToBottom=!0,l.default.on("modified",t.modified.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),r(a,[{key:"modified",value:function(){var e=this.scrollPercent;this.text.text=[].concat(l.default.list).reverse().join("\n"),this.updateScrollBarLength(),1===e&&this.scrollTo(1)}},{key:"add",value:function(e){l.default.add(e)}},{key:"toString",value:function(){return"message-window"}}]),a}();n.default=a},{"../lib/Messages":14,"../lib/PIXI":15,"./ScrollableWindow":36}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=e("../lib/PIXI"),o=e("./Window"),a=(r=o)&&r.__esModule?r:{default:r},u=e("../config/constants");var s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e)),n=e.player;return t._opt=e,n.on("ability-carry",t.onAbilityCarry.bind(t,n)),t.abilityTextContainer=new l.Container,t.abilityTextContainer.x=5,t.addChild(t.abilityTextContainer),t.onAbilityCarry(n),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),i(r,[{key:"onAbilityCarry",value:function(r){var i=0,e=this._opt.fontSize,o=void 0===e?10:e,a=new l.TextStyle({fontSize:o,fill:"green",lineHeight:o}),s=this.abilityTextContainer;s.removeChildren(),u.ABILITIES_ALL.forEach(function(e){var t=r.abilities[e];if(t){var n=new l.Text(t.toString(),a);n.y=i*(o+5),s.addChild(n),i++}})}},{key:"toString",value:function(){return"window"}}]),r}();n.default=s},{"../config/constants":8,"../lib/PIXI":15,"./Window":38}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),u=e("../lib/PIXI"),i=o(e("./Window")),c=o(e("./Wrapper"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e)),n=e.width,r=e.height,i=e.padding,o=void 0===i?8:i,a=e.scrollBarWidth,s=void 0===a?10:a;return t._opt=e,t._initScrollableArea(n-2*o-s-5,r-2*o,o),t._initScrollBar({x:n-o-s,y:o,width:s,height:r-2*o}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.default),r(l,[{key:"_initScrollableArea",value:function(e,t,n){var r=new u.Container;r.position.set(n,n),this.addChild(r),this.mainView=new u.Container,r.addChild(this.mainView);var i=new u.Graphics;i.beginFill(16777215),i.drawRoundedRect(0,0,e,t,5),i.endFill(),this.mainView.mask=i,r.addChild(i),this._windowWidth=e,this._windowHeight=t}},{key:"_initScrollBar",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=new u.Container;o.x=t,o.y=n;var a=new u.Graphics;a.beginFill(11053224),a.drawRoundedRect(0,0,r,i,2),a.endFill();var s=new u.Graphics;s.beginFill(2236962),s.drawRoundedRect(0,0,r,i,3),s.endFill(),s.toString=function(){return"scrollBar"},c.default.draggable(s,{boundary:{x:0,y:0,width:r,height:i}}),s.on("drag",this.scrollMainView.bind(this)),o.addChild(a),o.addChild(s),this.addChild(o),this.scrollBar=s,this.scrollBarBg=a}},{key:"scrollMainView",value:function(){this.mainView.y=(this.windowHeight-this.mainView.height)*this.scrollPercent}},{key:"addWindowChild",value:function(e){this.mainView.addChild(e)}},{key:"updateScrollBarLength",value:function(){var e=this._opt.scrollBarMinHeight,t=void 0===e?20:e,n=this.mainView.height/this.windowHeight;n<1?this.scrollBar.height=this.scrollBarBg.height:(this.scrollBar.height=this.scrollBarBg.height/n,this.scrollBar.height=Math.max(t,this.scrollBar.height)),this.scrollBar.fallbackToBoundary()}},{key:"scrollTo",value:function(e){var t=this.scrollBarBg.height-this.scrollBar.height,n=0;0!==t&&(n=t*e),this.scrollBar.y=n,this.scrollMainView()}},{key:"toString",value:function(){return"window"}},{key:"scrollPercent",get:function(){var e=this.scrollBarBg.height-this.scrollBar.height;return 0===e?1:this.scrollBar.y/e}},{key:"windowWidth",get:function(){return this._windowWidth}},{key:"windowHeight",get:function(){return this._windowHeight}}]),l}();n.default=a},{"../lib/PIXI":15,"./Window":38,"./Wrapper":39}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("../lib/PIXI"),l=i(e("../lib/Vector")),u=i(e("keyboardjs")),c=e("../config/control");function i(e){return e&&e.__esModule?e:{default:e}}var o=[c.RIGHT,c.LEFT,c.UP,c.DOWN],a=function(e){function a(e){var t=e.x,n=e.y,r=e.radius;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));i.position.set(t,n);var o=new s.Graphics;return o.beginFill(15921906,.5),o.drawCircle(0,0,r),o.endFill(),i.addChild(o),i.radius=r,i.setupTouch(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,s.Container),r(a,[{key:"setupTouch",value:function(){this.interactive=!0;var e=this.onTouch.bind(this);this.on("touchstart",e),this.on("touchend",e),this.on("touchmove",e),this.on("touchendoutside",e)}},{key:"onTouch",value:function(e){var t=!1;switch(e.type){case"touchstart":this.drag=e.data.global.clone(),this.createDragPoint(),this.originPosition={x:this.x,y:this.y};break;case"touchend":case"touchendoutside":this.drag&&(this.drag=!1,this.destroyDragPoint(),this.releaseKeys());break;case"touchmove":if(!this.drag){t=!0;break}this.pressKeys(e.data.getLocalPosition(this))}t||e.stopPropagation()}},{key:"createDragPoint",value:function(){var e=new s.Graphics;e.beginFill(15921906,.5),e.drawCircle(0,0,20),e.endFill(),this.addChild(e),this.dragPoint=e}},{key:"destroyDragPoint",value:function(){this.removeChild(this.dragPoint),this.dragPoint.destroy()}},{key:"pressKeys",value:function(e){this.releaseKeys();var t=l.default.fromPoint(e),n=t.deg,r=t.length;if(!(r<30)){var i=Math.abs(n),o=i<67.5?c.RIGHT:112.5<i&&c.LEFT,a=!(i<22.5||157.5<i)&&(n<0?c.UP:c.DOWN);(o||a)&&(o&&u.default.pressKey(o),a&&u.default.pressKey(a),t.multiplyScalar(this.radius/r),this.dragPoint.position.set(t.x,t.y))}}},{key:"releaseKeys",value:function(){o.forEach(function(e){return u.default.releaseKey(e)})}},{key:"toString",value:function(){return"TouchControlPanel"}}]),a}();n.default=a},{"../config/control":9,"../lib/PIXI":15,"../lib/Vector":18,keyboardjs:2}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=e("../lib/PIXI");var i=function(e){function s(e){var t=e.x,n=e.y,r=e.width,i=e.height;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));o.position.set(t,n);var a=new l.Graphics;return a.beginFill(15921906),a.lineStyle(3,2236962,1),a.drawRoundedRect(0,0,r-3,i-3,5),a.endFill(),o.addChild(a),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,l.Container),r(s,[{key:"toString",value:function(){return"window"}}]),s}();n.default=i},{"../lib/PIXI":15}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var a=Symbol("opt");function i(){this.drag=!1,this.interactive=!0;var e=function(e){var t=e.type,n=!1;switch(t){case"touchstart":case"mousedown":this.drag=e.data.global.clone(),this.originPosition={x:this.x,y:this.y};break;case"touchend":case"touchendoutside":case"mouseup":case"mouseupoutside":this.drag=!1;break;case"touchmove":case"mousemove":if(!this.drag){n=!0;break}var r=e.data.global.clone();this.position.set(this.originPosition.x+r.x-this.drag.x,this.originPosition.y+r.y-this.drag.y),o.call(this),this.emit("drag")}n||e.stopPropagation()}.bind(this);this.on("touchstart",e),this.on("touchend",e),this.on("touchmove",e),this.on("touchendoutside",e),this.on("mousedown",e),this.on("mouseup",e),this.on("mousemove",e),this.on("mouseupoutside",e)}function o(){var e=this[a],t=e.width,n=void 0===t?this.width:t,r=e.height,i=void 0===r?this.height:r,o=e.boundary;this.x=Math.max(this.x,o.x),this.x=Math.min(this.x,o.x+o.width-n),this.y=Math.max(this.y,o.y),this.y=Math.min(this.y,o.y+o.height-i)}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"draggable",value:function(e,t){e[a]=t,i.call(e),e.fallbackToBoundary=o}}]),e}();n.default=s},{}]},{},[7]);
//# sourceMappingURL=bundle.min.js.map
