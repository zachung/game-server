!function i(a,u,c){function s(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=u[t]={exports:{}};a[t][0].call(r.exports,function(e){return s(a[t][1][e]||e)},r,r.exports,i,a,u,c)}return u[t].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){"use strict";var o=i(e("./lib/Application")),r=i(e("./scenes/LoadingScene"));function i(e){return e&&e.__esModule?e:{default:e}}var a=new o.default({width:256,height:256,antialias:!0,transparent:!1,resolution:1,autoStart:!1});a.renderer.view.style.position="absolute",a.renderer.view.style.display="block",a.renderer.autoResize=!0,a.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(a.view),a.start(),a.changeScene(r.default)},{"./lib/Application":4,"./scenes/LoadingScene":20}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=n.MOVE="move",r=n.CAMERA="camera",i=n.OPERATE=Symbol("operate");n.SLOTPARTS_ALL=[o,r,i],n.STATIC="static",n.STAY="stay",n.REPLY="reply"},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),u=e("./PIXI");var r=function(e){function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,u.Application),o(a,[{key:"changeScene",value:function(e,t){this.currentScene&&(this.currentScene.destroy(),this.stage.removeChild(this.currentScene));var n=new e(t);this.stage.addChild(n),n.create(),n.on("changeScene",this.changeScene.bind(this)),this.currentScene=n}},{key:"start",value:function(){for(var e,t=this,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"start",this)).call.apply(e,[this].concat(o));var i=this.renderer.view;this.stage.addChild((new u.Graphics).drawRect(0,0,i.width,i.height)),this.ticker.add(function(e){return t.gameLoop.bind(t)(e)})}},{key:"gameLoop",value:function(e){this.currentScene.tick(e)}}]),a}();n.default=r},{"./PIXI":8}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=new Bump(PIXI)},{}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("./PIXI"),l=e("../config/constants"),f=e("./utils"),a=e("../lib/Bump"),u=(o=a)&&o.__esModule?o:{default:o};var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.collideObjects=[],e.replyObjects=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Container),r(t,[{key:"load",value:function(e){for(var o=this,t=e.tiles,n=e.cols,r=e.rows,i=e.items,a=0;a<n;a++)for(var u=0;u<r;u++){var c=t[u*n+a],s=(0,f.instanceByItemId)(c);switch(s.position.set(16*a,16*u),s.type){case l.STAY:this.collideObjects.push(s)}this.addChild(s)}i.forEach(function(e,t){var n=(0,f.instanceByItemId)(e.Type,e.params);switch(n.position.set(16*e.pos[0],16*e.pos[1]),n.type){case l.STAY:o.collideObjects.push(n);break;default:o.replyObjects.push(n)}n.on("take",function(){o.removeChild(n),n.destroy();var e=o.replyObjects.indexOf(n);o.replyObjects.splice(e,1),delete i[t]}),n.on("use",function(){return o.emit("use",n)}),o.addChild(n)})}},{key:"addPlayer",value:function(e){this.addChild(e),this.player=e}},{key:"tick",value:function(e){var t=this;this.player.tick(e),this.collideObjects.forEach(function(e){u.default.rectangleCollision(t.player,e,!0)&&e.emit("collide",t.player)}),this.replyObjects.forEach(function(e){u.default.hitTestRectangle(t.player,e)&&e.emit("collide",t.player)})}}]),t}();n.default=c},{"../config/constants":2,"../lib/Bump":5,"./PIXI":8,"./utils":10}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}();var r=[],i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,null,[{key:"getList",value:function(){return r}},{key:"add",value:function(e){r.push(e),setTimeout(r.pop.bind(r),1e3)}}]),e}();n.default=i},{}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Application=PIXI.Application,n.Container=PIXI.Container,n.loader=PIXI.loader,n.resources=PIXI.loader.resources,n.Sprite=PIXI.Sprite,n.Text=PIXI.Text,n.TextStyle=PIXI.TextStyle,n.Graphics=PIXI.Graphics},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("./PIXI");var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Container),o(t,[{key:"create",value:function(){}},{key:"destroy",value:function(){}},{key:"tick",value:function(e){}}]),t}();n.default=i},{"./PIXI":8}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.instanceByItemId=function(e,t){return new f[e](t)},n.instanceBySlotId=function(e,t){return new p[e](t)};var o=l(e("../objects/Wall")),r=l(e("../objects/Grass")),i=l(e("../objects/Treasure")),a=l(e("../objects/Door")),u=l(e("../objects/slots/Move")),c=l(e("../objects/slots/Camera")),s=l(e("../objects/slots/Operate"));function l(e){return e&&e.__esModule?e:{default:e}}var f=[r.default,o.default,i.default,a.default],p=[u.default,c.default,s.default]},{"../objects/Door":12,"../objects/Grass":14,"../objects/Treasure":15,"../objects/Wall":16,"../objects/slots/Camera":17,"../objects/slots/Move":18,"../objects/slots/Operate":19}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../lib/PIXI"),i=u(e("./GameObject")),a=u(e("../keyboard"));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.resources["images/town_tiles.json"].textures["wall.png"]));return e.dx=0,e.dy=0,e.init(),e.tickAbilities={},e.abilities={},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"takeAbility",value:function(e){e.hasToReplace(this)&&e.carryBy(this)}},{key:"toString",value:function(){return"cat"}},{key:"init",value:function(){var e=this,t=(0,a.default)(65),n=(0,a.default)(87),o=(0,a.default)(68),r=(0,a.default)(83);t.press=function(){e.dx=-1,e.dy=0},t.release=function(){o.isDown||0!==e.dy||(e.dx=0)},n.press=function(){e.dy=-1,e.dx=0},n.release=function(){r.isDown||0!==e.dx||(e.dy=0)},o.press=function(){e.dx=1,e.dy=0},o.release=function(){t.isDown||0!==e.dy||(e.dx=0)},r.press=function(){e.dy=1,e.dx=0},r.release=function(){n.isDown||0!==e.dx||(e.dy=0)}}},{key:"tick",value:function(t){var n=this;Object.values(this.tickAbilities).forEach(function(e){return e.tick(t,n)})}}]),t}();n.default=c},{"../keyboard":3,"../lib/PIXI":8,"./GameObject":13}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("./GameObject"),u=(o=a)&&o.__esModule?o:{default:o},c=e("../config/constants");var s=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.resources["images/town_tiles.json"].textures["door.png"]));return t.map=e[0],t.toPosition=e[1],t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),r(n,[{key:"actionWith",value:function(e){var t=e.abilities[c.OPERATE];t?t.use(e,this):this.say([e.toString()," dosen't has ability to use this door ",this.map,"."].join(""))}},{key:c.OPERATE,value:function(){this.say(["Get in ",this.map," now."].join("")),this.emit("use")}},{key:"type",get:function(){return c.STAY}}]),n}();n.default=s},{"../config/constants":2,"../lib/PIXI":8,"./GameObject":13}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("../config/constants"),u=e("../lib/Messages"),c=(o=u)&&o.__esModule?o:{default:o};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Sprite),r(t,[{key:"say",value:function(e){c.default.add(e),console.log(e)}},{key:"type",get:function(){return a.STATIC}}]),t}();n.default=s},{"../config/constants":2,"../lib/Messages":7,"../lib/PIXI":8}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("./GameObject"),u=(o=a)&&o.__esModule?o:{default:o},c=e("../config/constants");var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.resources["images/town_tiles.json"].textures["grass.png"]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"type",get:function(){return c.STATIC}}]),t}();n.default=s},{"../config/constants":2,"../lib/PIXI":8,"./GameObject":13}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("./GameObject"),u=(o=a)&&o.__esModule?o:{default:o},c=e("../config/constants"),s=e("../lib/utils");var l=function(e){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,i.resources["images/town_tiles.json"].textures["treasure.png"]));return t.inventories=e.map(function(e){return(0,s.instanceBySlotId)(e[0],e[1])}),t.on("collide",t.actionWith.bind(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default),r(n,[{key:"toString",value:function(){return["treasure: [",this.inventories.join(", "),"]"].join("")}},{key:"actionWith",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"takeAbility";"function"==typeof t[n]&&(this.inventories.forEach(function(e){return t[n](e)}),this.say([t.toString()," taked ",this.toString()].join("")),this.emit("take"))}},{key:"type",get:function(){return c.REPLY}}]),n}();n.default=l},{"../config/constants":2,"../lib/PIXI":8,"../lib/utils":10,"./GameObject":13}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),i=e("../lib/PIXI"),a=e("./GameObject"),u=(o=a)&&o.__esModule?o:{default:o},c=e("../config/constants");var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.resources["images/town_tiles.json"].textures["wall.png"]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"type",get:function(){return c.STAY}}]),t}();n.default=s},{"../config/constants":2,"../lib/PIXI":8,"./GameObject":13}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../../config/constants");var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=r.CAMERA,this.x=e[0],this.y=e[1],this.width=e[2],this.height=e[3]}return o(t,[{key:"hasToReplace",value:function(e){var t=e.tickAbilities[this.type];return!t||this.width>=t.width&&this.height>=t.height}},{key:"carryBy",value:function(e){e.tickAbilities[this.type]=this}},{key:"tick",value:function(e,t,n){t.x+=t.dx*this.value*e,t.y+=t.dy*this.value*e}}]),t}();n.default=i},{"../../config/constants":2}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../../config/constants");var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=r.MOVE,this.value=e}return o(t,[{key:"hasToReplace",value:function(e){var t=e.tickAbilities[this.type];return!t||this.value>t.value}},{key:"carryBy",value:function(e){e.tickAbilities[this.type]=this}},{key:"tick",value:function(e,t){t.x+=t.dx*this.value*e,t.y+=t.dy*this.value*e}},{key:"toString",value:function(){return"move level: "+this.value}}]),t}();n.default=i},{"../../config/constants":2}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../../config/constants");var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=r.OPERATE,this.set=new Set([e])}return o(t,[{key:"hasToReplace",value:function(e){return!0}},{key:"carryBy",value:function(e){var t=e.abilities[this.type];if(!t)return t=this,void(e.abilities[this.type]=t);var n=t.set;this.set.forEach(n.add.bind(n))}},{key:"use",value:function(e,t){e.abilities[this.type].set.has(t.map)&&(e.say(e.toString()+" use ability to open "+t.map),t[this.type]())}},{key:"toString",value:function(){return["keys: ",Array.from(this.set).join(", ")].join("")}}]),t}();n.default=i},{"../../config/constants":2}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../lib/PIXI"),i=u(e("../lib/Scene")),a=u(e("./PlayScene"));function u(e){return e&&e.__esModule?e:{default:e}}var c="loading",s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.life=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"create",value:function(){var e=this,t=new r.TextStyle({fontFamily:"Arial",fontSize:36,fill:"white",stroke:"#ff3300",strokeThickness:4,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6});this.textLoading=new r.Text(c,t),this.addChild(this.textLoading),r.loader.add("images/town_tiles.json").load(function(){return e.emit("changeScene",a.default,{map:"E0N0",position:[1,1]})})}},{key:"tick",value:function(e){this.life+=e/30,this.textLoading.text=c+Array(Math.floor(this.life)%4+1).join(".")}}]),t}();n.default=s},{"../lib/PIXI":8,"../lib/Scene":9,"./PlayScene":21}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}}(),r=e("../lib/PIXI"),a=i(e("../lib/Scene")),u=i(e("../lib/Map")),c=i(e("../lib/Messages")),s=i(e("../objects/Cat")),l=i(e("../objects/slots/Move")),f=i(e("../objects/slots/Operate"));function i(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function i(e){var t=e.map,n=e.player,o=e.position;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return r.isLoaded=!1,r.cat=n,r.mapFile="world/"+t,r.toPosition=o,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),o(i,[{key:"create",value:function(){var e=this.mapFile;r.resources[e]?this.onLoaded():r.loader.add(e,e+".json").load(this.onLoaded.bind(this))}},{key:"onLoaded",value:function(){this.collideObjects=[],this.replyObjects=[],this.cat||(this.cat=new s.default,this.cat.takeAbility(new l.default(1)),this.cat.takeAbility(new f.default("E0N0")),this.cat.width=10,this.cat.height=10),this.cat.position.set(16*this.toPosition[0],16*this.toPosition[1]),this.spawnMap(r.resources[this.mapFile].data),this.map.addPlayer(this.cat),this.addChild(this.map),this.tipText(),this.isLoaded=!0}},{key:"spawnMap",value:function(e){var t=this,n=new u.default;n.load(e),n.on("use",function(e){t.emit("changeScene",i,{map:e.map,player:t.cat,position:e.toPosition})}),this.map=n}},{key:"tipText",value:function(){var e=new r.TextStyle({fontSize:12,fill:"white"});this.text=new r.Text("",e),this.text.x=100,this.addChild(this.text)}},{key:"tick",value:function(e){this.isLoaded&&(this.map.tick(e),this.text.text=c.default.getList().join(""))}}]),i}();n.default=p},{"../lib/Map":6,"../lib/Messages":7,"../lib/PIXI":8,"../lib/Scene":9,"../objects/Cat":11,"../objects/slots/Move":18,"../objects/slots/Operate":19}]},{},[1]);
//# sourceMappingURL=bundle.min.js.map
