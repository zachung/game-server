!function i(s,a,c){function l(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return l(s[t][1][e]||e)},o,o.exports,i,s,a,c)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){function s(){}t.exports=function(e,n,r){var o=!1;return r=r||s,0===(i.count=e)?n():i;function i(e,t){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,n(e),n=r):0!==i.count||o||n(null,t)}}},{}],2:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),r<n&&(n=r),r<=t||n<=t||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},{}],3:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(t.exports=r).prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],4:[function(e,t,n){!function(){"use strict";for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Uint8Array(256),e=0;e<i.length;e++)f[i.charCodeAt(e)]=e;n.encode=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=i[n[t]>>2],o+=i[(3&n[t])<<4|n[t+1]>>4],o+=i[(15&n[t+1])<<2|n[t+2]>>6],o+=i[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var t,n,r,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=f[e.charCodeAt(t)],r=f[e.charCodeAt(t+1)],o=f[e.charCodeAt(t+2)],i=f[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l}}()},{}],5:[function(e,t,n){"use strict";n.byteLength=function(e){var t=p(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=p(e),r=n[0],o=n[1],i=new d((l=r,u=o,3*(l+u)/4-u)),s=0,a=0<o?r-4:r,c=0;c<a;c+=4)t=f[e.charCodeAt(c)]<<18|f[e.charCodeAt(c+1)]<<12|f[e.charCodeAt(c+2)]<<6|f[e.charCodeAt(c+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;var l,u;2===o&&(t=f[e.charCodeAt(c)]<<2|f[e.charCodeAt(c+1)]>>4,i[s++]=255&t);1===o&&(t=f[e.charCodeAt(c)]<<10|f[e.charCodeAt(c+1)]<<4|f[e.charCodeAt(c+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t);return i},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,o=[],i=0,s=n-r;i<s;i+=16383)o.push(c(e,i,s<i+16383?s:i+16383));1===r?(t=e[n-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],f=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=r.length;o<i;++o)a[o]=r[o],f[r.charCodeAt(o)]=o;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var r,o,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(a[(o=r)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return i.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],6:[function(e,c,t){(function(e){var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,t=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),n=t&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),r=o&&o.prototype.append&&o.prototype.getBlob;function i(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}e[t]=r}}}function s(e,t){t=t||{};var n=new o;i(e);for(var r=0;r<e.length;r++)n.append(e[r]);return t.type?n.getBlob(t.type):n.getBlob()}function a(e,t){return i(e),new Blob(e,t||{})}c.exports=t?n?e.Blob:a:r?s:void 0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){"use strict";var r=e("base64-js"),i=e("ieee754");n.Buffer=f,n.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},n.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(o<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=f.prototype,t}function f(e,t,n){if("number"!=typeof e)return a(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=s(n),o=r.write(e,t);o!==n&&(r=r.slice(0,o));return r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=f.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return f.from(r,t,n);var o=function(e){if(f.isBuffer(e)){var t=0|d(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||L(e.length)?s(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return c(e),s(e<0?0:0|d(e))}function u(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(o<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return I(e).length;default:if(o)return r?-1:F(e).length;t=(""+t).toLowerCase(),o=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),L(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=f.from(t,r)),f.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var i,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=s=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var u=-1;for(i=n;i<a;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(a<n+c&&(n=a-c),i=n;0<=i;i--){for(var f=!0,d=0;d<c;d++)if(l(e,i+d)!==l(t,d)){f=!1;break}if(f)return i}return-1}function m(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?o<(r=Number(r))&&(r=o):r=o;var i=t.length;i/2<r&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(L(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return O(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,l=e[o],u=null,f=239<l?4:223<l?3:191<l?2:1;if(o+f<=n)switch(f){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[o+1]))&&127<(c=(31&l)<<6|63&i)&&(u=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&l)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(u=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(u=c)}null===u?(u=65533,f=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=x));return n}(r)}n.kMaxLength=o,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(e,t,n){return a(e,t,n)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,n){return o=t,i=n,c(r=e),r<=0?s(r):void 0!==o?"string"==typeof i?s(r).fill(o,i):s(r).fill(o):s(r);var r,o,i},f.allocUnsafe=function(e){return l(e)},f.allocUnsafeSlow=function(e){return l(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(N(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=f.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(N(i,Uint8Array)&&(i=f.from(i)),!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},f.byteLength=p,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return _(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,n,r,o){if(N(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(r,o),l=e.slice(t,n),u=0;u<a;++u)if(c[u]!==l[u]){i=c[u],s=l[u];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},f.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},f.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},f.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i,s,a,c,l,u,f,d,p,h=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return d=t,p=n,O(F(e,(f=this).length-d),f,d,p);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return c=this,l=t,u=n,O(I(e),c,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,a=n,O(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,(i=this).length-s),i,s,a);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function _(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o="",i=t;i<n;++i)o+=M(e[i]);return o}function S(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,o,i){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function P(e,t,n,r,o){return t=+t,n>>>=0,o||B(e,0,n,8),i.write(e,t,n,r,52,8),n+8}f.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=f.prototype,r},f.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},f.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},f.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},f.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},f.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||E(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},f.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||E(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},f.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);E(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},f.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var o=Math.pow(2,8*n-1);E(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},f.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},f.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},f.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},f.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},f.prototype.copy=function(e,t,n,r){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=o-1;0<=i;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},f.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!f.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&o<128||"latin1"===r)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=f.isBuffer(e)?e:f.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var T=/[^+/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function I(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function L(e){return e!=e}},{"base64-js":5,ieee754:32}],9:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],10:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}void 0!==t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],11:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],12:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":35}],13:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":14,"engine.io-parser":24}],14:[function(t,n,e){(function(r){var o=t("./transports/index"),e=t("component-emitter"),f=t("debug")("engine.io-client:socket"),i=t("indexof"),s=t("engine.io-parser"),a=t("parseuri"),c=t("parseqs");function d(e,t){if(!(this instanceof d))return new d(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:r.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;var n="object"==typeof r&&r;n.global===n&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(n.exports=d).priorWebsocketSuccess=!1,e(d.prototype),d.protocol=s.protocol,(d.Socket=d).Transport=t("./transport"),d.transports=t("./transports/index"),d.parser=t("engine.io-parser"),d.prototype.createTransport=function(e){f('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new o[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},d.prototype.open=function(){var e;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},d.prototype.setTransport=function(e){f("setting transport %s",e.name);var t=this;this.transport&&(f("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},d.prototype.probe=function(n){f('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),o=!1,i=this;function e(){if(i.onlyBinaryUpgrades){var e=!this.supportsBinary&&i.transport.supportsBinary;o=o||e}o||(f('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(e){if(!o)if("pong"===e.type&&"probe"===e.data){if(f('probe transport "%s" pong',n),i.upgrading=!0,i.emit("upgrading",r),!r)return;d.priorWebsocketSuccess="websocket"===r.name,f('pausing current transport "%s"',i.transport.name),i.transport.pause(function(){o||"closed"!==i.readyState&&(f("changing transport and sending upgrade packet"),u(),i.setTransport(r),r.send([{type:"upgrade"}]),i.emit("upgrade",r),r=null,i.upgrading=!1,i.flush())})}else{f('probe transport "%s" failed',n);var t=new Error("probe error");t.transport=r.name,i.emit("upgradeError",t)}}))}function s(){o||(o=!0,u(),r.close(),r=null)}function t(e){var t=new Error("probe error: "+e);t.transport=r.name,s(),f('probe transport "%s" failed because of error: %s',n,e),i.emit("upgradeError",t)}function a(){t("transport closed")}function c(){t("socket closed")}function l(e){r&&e.name!==r.name&&(f('"%s" works - aborting "%s"',e.name,r.name),s())}function u(){r.removeListener("open",e),r.removeListener("error",t),r.removeListener("close",a),i.removeListener("close",c),i.removeListener("upgrading",l)}d.priorWebsocketSuccess=!1,r.once("open",e),r.once("error",t),r.once("close",a),this.once("close",c),this.once("upgrading",l),r.open()},d.prototype.onOpen=function(){if(f("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){f("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},d.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(f('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else f('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},d.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){f("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},d.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(f("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},d.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}},d.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),f("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},d.prototype.onError=function(e){f("socket error %j",e),d.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},d.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){f('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},d.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~i(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":15,"./transports/index":16,"component-emitter":10,debug:22,"engine.io-parser":24,indexof:33,parseqs:44,parseuri:45}],15:[function(e,t,n){var r=e("engine.io-parser");function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e("component-emitter")((t.exports=o).prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":10,"engine.io-parser":24}],16:[function(t,e,n){(function(s){var a=t("xmlhttprequest-ssl"),c=t("./polling-xhr"),l=t("./polling-jsonp"),e=t("./websocket");n.polling=function(e){var t=!1,n=!1,r=!1!==e.jsonp;if(s.location){var o="https:"===location.protocol,i=location.port;i||(i=o?443:80),t=e.hostname!==location.hostname||i!==e.port,n=e.secure!==o}{if(e.xdomain=t,e.xscheme=n,"open"in new a(e)&&!e.forceJSONP)return new c(e);if(!r)throw new Error("JSONP disabled");return new l(e)}},n.websocket=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":17,"./polling-xhr":18,"./websocket":20,"xmlhttprequest-ssl":21}],17:[function(s,a,e){(function(n){var r=s("./polling"),e=s("component-inherit");a.exports=t;var o,l=/\n/g,u=/\\n/g;function i(){}function t(e){r.call(this,e),this.query=this.query||{},o||(n.___eio||(n.___eio=[]),o=n.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=i)},!1)}e(t,r),t.prototype.supportsBinary=!1,t.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},t.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},t.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function a(){c(),t()}function c(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),c(),e=e.replace(u,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&a()}:this.iframe.onload=a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":19,"component-inherit":11}],18:[function(u,f,e){(function(o){var i=u("xmlhttprequest-ssl"),r=u("./polling"),e=u("component-emitter"),t=u("component-inherit"),s=u("debug")("engine.io-client:polling-xhr");function n(){}function a(e){if(r.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,o.location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd=e.hostname!==o.location.hostname||n!==e.port,this.xs=e.secure!==t}}function c(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function l(){for(var e in c.requests)c.requests.hasOwnProperty(e)&&c.requests[e].abort()}f.exports=a,f.exports.Request=c,t(a,r),a.prototype.supportsBinary=!0,a.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new c(e)},a.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),o=this;r.on("success",t),r.on("error",function(e){o.onError("xhr post error",e)}),this.sendXhr=r},a.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},e(c.prototype),c.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}o.document&&(this.index=c.requestsCount++,c.requests[this.index]=this)},c.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},c.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},c.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},c.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(e){}o.document&&delete c.requests[this.index],this.xhr=null}},c.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},c.prototype.hasXDR=function(){return void 0!==o.XDomainRequest&&!this.xs&&this.enablesXDR},c.prototype.abort=function(){this.cleanup()},c.requestsCount=0,c.requests={},o.document&&(o.attachEvent?o.attachEvent("onunload",l):o.addEventListener&&o.addEventListener("beforeunload",l,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":19,"component-emitter":10,"component-inherit":11,debug:22,"xmlhttprequest-ssl":21}],19:[function(e,t,n){var r=e("../transport"),o=e("parseqs"),i=e("engine.io-parser"),s=e("component-inherit"),a=e("yeast"),c=e("debug")("engine.io-client:polling");t.exports=u;var l=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),r.call(this,e)}s(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||n()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||n()}))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var r=this;c("polling got data %s",e);i.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"===r.readyState&&r.onOpen(),"close"===e.type)return r.onClose(),!1;r.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};i.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":15,"component-inherit":11,debug:22,"engine.io-parser":24,parseqs:44,"xmlhttprequest-ssl":21,yeast:80}],20:[function(f,d,e){(function(s){var t,n=f("../transport"),a=f("engine.io-parser"),r=f("parseqs"),e=f("component-inherit"),o=f("yeast"),c=f("debug")("engine.io-client:websocket"),i=s.WebSocket||s.MozWebSocket;if("undefined"==typeof window)try{t=f("ws")}catch(e){}var l=i;function u(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(l=t),n.call(this,e)}l||"undefined"!=typeof window||(l=t),e(d.exports=u,n),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new l(e,t):new l(e):new l(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},u.prototype.write=function(e){var r=this;this.writable=!1;for(var o=e.length,t=0,n=o;t<n;t++)!function(n){a.encodePacket(n,r.supportsBinary,function(e){if(!r.usingBrowserWebSocket){var t={};if(n.options&&(t.compress=n.options.compress),r.perMessageDeflate)("string"==typeof e?s.Buffer.byteLength(e):e.length)<r.perMessageDeflate.threshold&&(t.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(e):r.ws.send(e,t)}catch(e){c("websocket closed before onclose event")}--o||i()})}(e[t]);function i(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}},u.prototype.onClose=function(){n.prototype.onClose.call(this)},u.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=o()),this.supportsBinary||(e.b64=1),(e=r.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},u.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===u.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":15,"component-inherit":11,debug:22,"engine.io-parser":24,parseqs:44,ws:7,yeast:80}],21:[function(e,t,n){(function(o){var i=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":31}],22:[function(n,r,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,n("_process"))},{"./debug":23,_process:46}],23:[function(e,t,c){function n(e){var r;function a(){if(a.enabled){var o=a,e=+new Date,t=e-(r||e);o.diff=t,o.prev=r,o.curr=e,r=e;for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];i[0]=c.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var s=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n=c.formatters[t];if("function"==typeof n){var r=i[s];e=n.call(o,r),i.splice(s,1),s--}return e}),c.formatArgs.call(o,i),(a.log||c.log||console.log.bind(console)).apply(o,i)}}return a.namespace=e,a.enabled=c.enabled(e),a.useColors=c.useColors(),a.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}(e),a.destroy=o,"function"==typeof c.init&&c.init(a),c.instances.push(a),a}function o(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}(c=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){var t;c.save(e),c.names=[],c.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var o=c.instances[t];o.enabled=c.enabled(o.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=e("ms"),c.instances=[],c.names=[],c.skips=[],c.formatters={}},{ms:43}],24:[function(r,e,g){(function(l){var o,e=r("./keys"),i=r("has-binary2"),d=r("arraybuffer.slice"),a=r("after"),u=r("./utf8");l&&l.ArrayBuffer&&(o=r("base64-arraybuffer"));var t="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),n="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=t||n;g.protocol=3;var p=g.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},s=e(p),h={type:"error",data:"parser error"},y=r("blob");function c(e,t,n){for(var o=new Array(e.length),r=a(e.length,n),i=function(n,e,r){t(e,function(e,t){o[n]=t,r(e,o)})},s=0;s<e.length;s++)i(s,e[s],r)}g.encodePacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof n&&(r=n,n=null);var o,i,s,a=void 0===e.data?void 0:e.data.buffer||e.data;if(l.ArrayBuffer&&a instanceof ArrayBuffer)return function(e,t,n){if(!t)return g.encodeBase64Packet(e,n);var r=e.data,o=new Uint8Array(r),i=new Uint8Array(1+r.byteLength);i[0]=p[e.type];for(var s=0;s<o.length;s++)i[s+1]=o[s];return n(i.buffer)}(e,t,r);if(y&&a instanceof l.Blob)return function(e,t,n){if(!t)return g.encodeBase64Packet(e,n);if(f)return function(e,t,n){if(!t)return g.encodeBase64Packet(e,n);var r=new FileReader;return r.onload=function(){e.data=r.result,g.encodePacket(e,t,!0,n)},r.readAsArrayBuffer(e.data)}(e,t,n);var r=new Uint8Array(1);r[0]=p[e.type];var o=new y([r.buffer,e.data]);return n(o)}(e,t,r);if(a&&a.base64)return o=e,i=r,s="b"+g.packets[o.type]+o.data.data,i(s);var c=p[e.type];return void 0!==e.data&&(c+=n?u.encode(String(e.data),{strict:!1}):String(e.data)),r(""+c)},g.encodeBase64Packet=function(t,n){var r,o="b"+g.packets[t.type];if(y&&t.data instanceof l.Blob){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];n(o+e)},i.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return o+=l.btoa(r),n(o)},g.decodePacket=function(e,t,n){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return g.decodeBase64Packet(e.substr(1),t);if(n&&!1===(e=function(e){try{e=u.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var r=e.charAt(0);return Number(r)==r&&s[r]?1<e.length?{type:s[r],data:e.substring(1)}:{type:s[r]}:h}r=new Uint8Array(e)[0];var o=d(e,1);return y&&"blob"===t&&(o=new y([o])),{type:s[r],data:o}},g.decodeBase64Packet=function(e,t){var n=s[e.charAt(0)];if(!o)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=o.decode(e.substr(1));return"blob"===t&&y&&(r=new y([r])),{type:n,data:r}},g.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=i(e);if(t&&r)return y&&!f?g.encodePayloadAsBlob(e,n):g.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");c(e,function(e,n){g.encodePacket(e,!!r&&t,!1,function(e){var t;n(null,(t=e).length+":"+t)})},function(e,t){return n(t.join(""))})},g.decodePayload=function(e,t,n){if("string"!=typeof e)return g.decodePayloadAsBinary(e,t,n);var r;if("function"==typeof t&&(n=t,t=null),""===e)return n(h,0,1);for(var o,i,s="",a=0,c=e.length;a<c;a++){var l=e.charAt(a);if(":"===l){if(""===s||s!=(o=Number(s)))return n(h,0,1);if(s!=(i=e.substr(a+1,o)).length)return n(h,0,1);if(i.length){if(r=g.decodePacket(i,t,!1),h.type===r.type&&h.data===r.data)return n(h,0,1);if(!1===n(r,a+o,c))return}a+=o,s=""}else s+=l}return""!==s?n(h,0,1):void 0},g.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));c(e,function(e,t){g.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),s=new Uint8Array(n),a=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);n=r.buffer}s[a++]=t?0:1;var i=n.byteLength.toString();for(o=0;o<i.length;o++)s[a++]=parseInt(i[o]);s[a++]=255;for(r=new Uint8Array(n),o=0;o<r.length;o++)s[a++]=r[o]}),r(s.buffer)})},g.encodePayloadAsBlob=function(e,n){c(e,function(e,a){g.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);e=n.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),i=new Uint8Array(o.length+1);for(r=0;r<o.length;r++)i[r]=parseInt(o[r]);if(i[o.length]=255,y){var s=new y([t.buffer,i.buffer,e]);a(null,s)}})},function(e,t){return n(new y(t))})},g.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var t=e,o=[];0<t.byteLength;){for(var i=new Uint8Array(t),s=0===i[0],a="",c=1;255!==i[c];c++){if(310<a.length)return r(h,0,1);a+=i[c]}t=d(t,2+a.length),a=parseInt(a);var l=d(t,0,a);if(s)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(e){var u=new Uint8Array(l);l="";for(c=0;c<u.length;c++)l+=String.fromCharCode(u[c])}o.push(l),t=d(t,a)}var f=o.length;o.forEach(function(e,t){r(g.decodePacket(e,n,!0),t,f)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":25,"./utf8":26,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:6,"has-binary2":29}],25:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],26:[function(e,v,b){(function(m){!function(e){var t="object"==typeof b&&b,n="object"==typeof v&&v&&v.exports==t&&v,r="object"==typeof m&&m;r.global!==r&&r.window!==r||(e=r);var i,s,a,c=String.fromCharCode;function l(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function o(e,t){if(55296<=e&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function u(e,t){return c(e>>t&63|128)}function f(e,t){if(0==(4294967168&e))return c(e);var n="";return 0==(4294965248&e)?n=c(e>>6&31|192):0==(4294901760&e)?(o(e,t)||(e=65533),n=c(e>>12&15|224),n+=u(e,6)):0==(4292870144&e)&&(n=c(e>>18&7|240),n+=u(e,12),n+=u(e,6)),n+=c(63&e|128)}function d(){if(s<=a)throw Error("Invalid byte index");var e=255&i[a];if(a++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(e){var t,n;if(s<a)throw Error("Invalid byte index");if(a==s)return!1;if(t=255&i[a],a++,0==(128&t))return t;if(192==(224&t)){if(128<=(n=(31&t)<<6|d()))return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(n=(15&t)<<12|d()<<6|d()))return o(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(n=(7&t)<<18|d()<<12|d()<<6|d())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var h={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=l(e),o=r.length,i=-1,s="";++i<o;)s+=f(r[i],n);return s},decode:function(e,t){var n=!1!==(t=t||{}).strict;i=l(e),s=i.length,a=0;for(var r,o=[];!1!==(r=p(n));)o.push(r);return function(e){for(var t,n=e.length,r=-1,o="";++r<n;)65535<(t=e[r])&&(o+=c((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=c(t);return o}(o)}};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return h});else if(t&&!t.nodeType)if(n)n.exports=h;else{var y={}.hasOwnProperty;for(var g in h)y.call(h,g)&&(t[g]=h[g])}else e.utf8=h}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,n){var c=Object.create||function(e){var t=function(){};return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0;var o,a=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),o=0===l.x}catch(e){o=!1}function u(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]):(i=e._events=c(null),e._eventsCount=0),s){if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(o=u(e))&&0<o&&s.length>o){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else s=i[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=i.call(d,r);return o.listener=n,r.wrapFn=o}function h(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):g(o,o.length):[]}function y(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');a=e}}):r.defaultMaxListeners=a,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return u(this)},r.prototype.emit=function(e){var t,n,r,o,i,s,a="error"===e;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=s[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,o=g(e,r),i=0;i<r;++i)o[i].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=g(e,o),s=0;s<o;++s)i[s].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,s=g(e,i),a=0;a<i;++a)s[a].call(n,r,o)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var s=e.length,a=g(e,s),c=0;c<s;++c)a[c].call(n,r,o,i)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];!function(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=g(e,o),s=0;s<o;++s)i[s].apply(n,r)}(n,l,this,o)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){return f(this,e,t,!1)},r.prototype.prependListener=function(e,t){return f(this,e,t,!0)},r.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,p(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,p(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,r,o,i,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=c(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,s||t)}return this},r.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=c(null):delete n[e]),this;if(0===arguments.length){var o,i=s(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},r.prototype.listeners=function(e){return h(this,e,!0)},r.prototype.rawListeners=function(e){return h(this,e,!1)},r.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},r.prototype.listenerCount=y,r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],28:[function(e,t,n){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],29:[function(t,n,e){(function(i){var s=t("isarray"),e=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===e.call(Blob),c="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===e.call(File);n.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(s(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if("function"==typeof i&&i.isBuffer&&i.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||a&&t instanceof Blob||c&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0;return!1}}).call(this,t("buffer").Buffer)},{buffer:8,isarray:30}],30:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],31:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],32:[function(e,t,n){n.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,l=c>>1,u=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-u)-1,p>>=-u,u+=a;0<u;i=256*i+e[t+f],f+=d,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;0<u;s=256*s+e[t+f],f+=d,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=l}return(p?-1:1)*s*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var s,a,c,l=8*i-o-1,u=(1<<l)-1,f=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(t+=1<=s+f?d/c:d*Math.pow(2,1-f))*c&&(s++,c/=2),u<=s+f?(a=0,s=u):1<=s+f?(a=(t*c-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));8<=o;e[n+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,l+=o;0<l;e[n+p]=255&s,p+=h,s/=256,l-=8);e[n+p-h]|=128*y}},{}],33:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],34:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],35:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))||!!e._isBuffer);var t}},{}],36:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],37:[function(e,t,n){var r=e("./lib/keyboard"),o=e("./lib/locale"),i=e("./lib/key-combo"),s=new r;s.setLocale("us",e("./locales/us")),(n=t.exports=s).Keyboard=r,n.Locale=o,n.KeyCombo=i},{"./lib/key-combo":38,"./lib/keyboard":39,"./lib/locale":40,"./locales/us":41}],38:[function(e,t,n){function c(e){this.sourceStr=e,this.subCombos=c.parseComboStr(e),this.keyNames=this.subCombos.reduce(function(e,t){return e.concat(t)},[])}c.sequenceDeliminator=">>",c.comboDeliminator=">",c.keyDeliminator="+",c.parseComboStr=function(e){for(var t=c._splitStr(e,c.comboDeliminator),n=[],r=0;r<t.length;r+=1)n.push(c._splitStr(t[r],c.keyDeliminator));return n},c.prototype.check=function(e){for(var t=0,n=0;n<this.subCombos.length;n+=1)if(-1===(t=this._checkSubCombo(this.subCombos[n],t,e)))return!1;return!0},c.prototype.isEqual=function(e){if(!e||"string"!=typeof e&&"object"!=typeof e)return!1;if("string"==typeof e&&(e=new c(e)),this.subCombos.length!==e.subCombos.length)return!1;for(var t=0;t<this.subCombos.length;t+=1)if(this.subCombos[t].length!==e.subCombos[t].length)return!1;for(t=0;t<this.subCombos.length;t+=1){for(var n=this.subCombos[t],r=e.subCombos[t].slice(0),o=0;o<n.length;o+=1){var i=n[o],s=r.indexOf(i);-1<s&&r.splice(s,1)}if(0!==r.length)return!1}return!0},c._splitStr=function(e,t){for(var n=e,r=t,o="",i=[],s=0;s<n.length;s+=1)0<s&&n[s]===r&&"\\"!==n[s-1]&&(i.push(o.trim()),o="",s+=1),o+=n[s];return o&&i.push(o.trim()),i},c.prototype._checkSubCombo=function(e,t,n){e=e.slice(0),n=n.slice(t);for(var r=t,o=0;o<e.length;o+=1){var i=e[o];if("\\"===i[0]){var s=i.slice(1);s!==c.comboDeliminator&&s!==c.keyDeliminator||(i=s)}var a=n.indexOf(i);if(-1<a&&(e.splice(o,1),o-=1,r<a&&(r=a),0===e.length))return r}return-1},t.exports=c},{}],39:[function(t,n,e){(function(a){var r=t("./locale"),u=t("./key-combo");function e(e,t,n,r){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(e,t,n,r)}e.prototype.setLocale=function(e,t){var n=null;"string"==typeof e?t?t(n=new r(e),this._targetPlatform,this._targetUserAgent):n=this._locales[e]||null:e=(n=e)._localeName,this._locale=n,(this._locales[e]=n)&&(this._locale.pressedKeys=n.pressedKeys)},e.prototype.getLocale=function(e){return e||(e=this._locale.localeName),this._locales[e]||null},e.prototype.addListener=e.prototype.bind=function(e,t,n,r){if(null!==e&&"function"!=typeof e||(r=n,n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var o=0;o<e.length;o+=1)this.bind(e[o],t,n);else this._listeners.push({keyCombo:e?new u(e):null,pressHandler:t||null,releaseHandler:n||null,preventRepeat:r||!1,preventRepeatByDefault:r||!1})},e.prototype.on=e.prototype.bind,e.prototype.removeListener=e.prototype.unbind=function(e,t,n){if(null!==e&&"function"!=typeof e||(n=t,t=e,e=null),e&&"object"==typeof e&&"number"==typeof e.length)for(var r=0;r<e.length;r+=1)this.unbind(e[r],t,n);else for(r=0;r<this._listeners.length;r+=1){var o=this._listeners[r],i=!e&&!o.keyCombo||o.keyCombo&&o.keyCombo.isEqual(e),s=!t&&!n||!t&&!o.pressHandler||t===o.pressHandler,a=!t&&!n||!n&&!o.releaseHandler||n===o.releaseHandler;i&&s&&a&&(this._listeners.splice(r,1),r-=1)}},e.prototype.off=e.prototype.unbind,e.prototype.setContext=function(e){this._locale&&this.releaseAllKeys(),this._contexts[e]||(this._contexts[e]=[]),this._listeners=this._contexts[e],this._currentContext=e},e.prototype.getContext=function(){return this._currentContext},e.prototype.withContext=function(e,t){var n=this.getContext();this.setContext(e),t(),this.setContext(n)},e.prototype.watch=function(e,t,n,r){var o=this;if(this.stop(),!e){if(!a.addEventListener&&!a.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");e=a}if("number"==typeof e.nodeType&&(r=n,n=t,t=e,e=a),!e.addEventListener&&!e.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!e.addEventListener;var i=e.navigator&&e.navigator.userAgent||"",s=e.navigator&&e.navigator.platform||"";t&&null!==t||(t=e.document),n&&null!==n||(n=s),r&&null!==r||(r=i),this._targetKeyDownBinding=function(e){o.pressKey(e.keyCode,e),o._handleCommandBug(e,s)},this._targetKeyUpBinding=function(e){o.releaseKey(e.keyCode,e)},this._targetResetBinding=function(e){o.releaseAllKeys(e)},this._bindEvent(t,"keydown",this._targetKeyDownBinding),this._bindEvent(t,"keyup",this._targetKeyUpBinding),this._bindEvent(e,"focus",this._targetResetBinding),this._bindEvent(e,"blur",this._targetResetBinding),this._targetElement=t,this._targetWindow=e,this._targetPlatform=n,this._targetUserAgent=r},e.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},e.prototype.pressKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(e),this._applyBindings(t)}},e.prototype.releaseKey=function(e,t){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(e),this._clearBindings(t)}},e.prototype.releaseAllKeys=function(e){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(e)}},e.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},e.prototype.resume=function(){this._paused=!1},e.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},e.prototype._bindEvent=function(e,t,n){return this._isModernBrowser?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},e.prototype._unbindEvent=function(e,t,n){return this._isModernBrowser?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},e.prototype._getGroupedListeners=function(){var r=[],o=[],e=this._listeners;return"global"!==this._currentContext&&(e=[].concat(e,this._contexts.global)),e.sort(function(e,t){return(t.keyCombo?t.keyCombo.keyNames.length:0)-(e.keyCombo?e.keyCombo.keyNames.length:0)}).forEach(function(e){for(var t=-1,n=0;n<o.length;n+=1)(null===o[n]&&null===e.keyCombo||null!==o[n]&&o[n].isEqual(e.keyCombo))&&(t=n);-1===t&&(t=o.length,o.push(e.keyCombo)),r[t]||(r[t]=[]),r[t].push(e)}),r},e.prototype._applyBindings=function(e){var t=!1;e||(e={}),e.preventRepeat=function(){t=!0},e.pressedKeys=this._locale.pressedKeys.slice(0);for(var n=this._locale.pressedKeys.slice(0),r=this._getGroupedListeners(),o=0;o<r.length;o+=1){var i=r[o],s=i[0].keyCombo;if(null===s||s.check(n)){for(var a=0;a<i.length;a+=1){var c=i[a];null===s&&(c={keyCombo:new u(n.join("+")),pressHandler:c.pressHandler,releaseHandler:c.releaseHandler,preventRepeat:c.preventRepeat,preventRepeatByDefault:c.preventRepeatByDefault}),c.pressHandler&&!c.preventRepeat&&(c.pressHandler.call(this,e),t&&(c.preventRepeat=t,t=!1)),c.releaseHandler&&-1===this._appliedListeners.indexOf(c)&&this._appliedListeners.push(c)}if(s)for(a=0;a<s.keyNames.length;a+=1){var l=n.indexOf(s.keyNames[a]);-1!==l&&(n.splice(l,1),a-=1)}}}},e.prototype._clearBindings=function(e){e||(e={});for(var t=0;t<this._appliedListeners.length;t+=1){var n=this._appliedListeners[t],r=n.keyCombo;if(null===r||!r.check(this._locale.pressedKeys)){if(this._callerHandler!==n.releaseHandler){var o=this._callerHandler;this._callerHandler=n.releaseHandler,n.preventRepeat=n.preventRepeatByDefault,n.releaseHandler.call(this,e),this._callerHandler=o}this._appliedListeners.splice(t,1),t-=1}}},e.prototype._handleCommandBug=function(e,t){t.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(e.keyCode)[0])&&this._targetKeyUpBinding(e)},n.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./key-combo":38,"./locale":40}],40:[function(e,t,n){var o=e("./key-combo");function r(e){this.localeName=e,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}r.prototype.bindKeyCode=function(e,t){"string"==typeof t&&(t=[t]),this._keyMap[e]=t},r.prototype.bindMacro=function(e,t){"string"==typeof t&&(t=[t]);var n=null;"function"==typeof t&&(n=t,t=null);var r={keyCombo:new o(e),keyNames:t,handler:n};this._macros.push(r)},r.prototype.getKeyCodes=function(e){var t=[];for(var n in this._keyMap){-1<this._keyMap[n].indexOf(e)&&t.push(0|n)}return t},r.prototype.getKeyNames=function(e){return this._keyMap[e]||[]},r.prototype.setKillKey=function(e){if("string"!=typeof e)this._killKeyCodes.push(e);else for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.setKillKey(t[n])},r.prototype.pressKey=function(e){if("string"!=typeof e){var t=this.getKeyNames(e);for(r=0;r<t.length;r+=1)-1===this.pressedKeys.indexOf(t[r])&&this.pressedKeys.push(t[r]);this._applyMacros()}else for(var n=this.getKeyCodes(e),r=0;r<n.length;r+=1)this.pressKey(n[r])},r.prototype.releaseKey=function(e){if("string"==typeof e)for(var t=this.getKeyCodes(e),n=0;n<t.length;n+=1)this.releaseKey(t[n]);else{var r=this.getKeyNames(e);if(-1<this._killKeyCodes.indexOf(e))this.pressedKeys.length=0;else for(n=0;n<r.length;n+=1){var o=this.pressedKeys.indexOf(r[n]);-1<o&&this.pressedKeys.splice(o,1)}this._clearMacros()}},r.prototype._applyMacros=function(){for(var e=this._macros.slice(0),t=0;t<e.length;t+=1){var n=e[t];if(n.keyCombo.check(this.pressedKeys)){n.handler&&(n.keyNames=n.handler(this.pressedKeys));for(var r=0;r<n.keyNames.length;r+=1)-1===this.pressedKeys.indexOf(n.keyNames[r])&&this.pressedKeys.push(n.keyNames[r]);this._appliedMacros.push(n)}}},r.prototype._clearMacros=function(){for(var e=0;e<this._appliedMacros.length;e+=1){var t=this._appliedMacros[e];if(!t.keyCombo.check(this.pressedKeys)){for(var n=0;n<t.keyNames.length;n+=1){var r=this.pressedKeys.indexOf(t.keyNames[n]);-1<r&&this.pressedKeys.splice(r,1)}t.handler&&(t.keyNames=null),this._appliedMacros.splice(e,1),e-=1}}},t.exports=r},{"./key-combo":38}],41:[function(e,t,n){t.exports=function(e,t,n){e.bindKeyCode(3,["cancel"]),e.bindKeyCode(8,["backspace"]),e.bindKeyCode(9,["tab"]),e.bindKeyCode(12,["clear"]),e.bindKeyCode(13,["enter"]),e.bindKeyCode(16,["shift"]),e.bindKeyCode(17,["ctrl"]),e.bindKeyCode(18,["alt","menu"]),e.bindKeyCode(19,["pause","break"]),e.bindKeyCode(20,["capslock"]),e.bindKeyCode(27,["escape","esc"]),e.bindKeyCode(32,["space","spacebar"]),e.bindKeyCode(33,["pageup"]),e.bindKeyCode(34,["pagedown"]),e.bindKeyCode(35,["end"]),e.bindKeyCode(36,["home"]),e.bindKeyCode(37,["left"]),e.bindKeyCode(38,["up"]),e.bindKeyCode(39,["right"]),e.bindKeyCode(40,["down"]),e.bindKeyCode(41,["select"]),e.bindKeyCode(42,["printscreen"]),e.bindKeyCode(43,["execute"]),e.bindKeyCode(44,["snapshot"]),e.bindKeyCode(45,["insert","ins"]),e.bindKeyCode(46,["delete","del"]),e.bindKeyCode(47,["help"]),e.bindKeyCode(145,["scrolllock","scroll"]),e.bindKeyCode(187,["equal","equalsign","="]),e.bindKeyCode(188,["comma",","]),e.bindKeyCode(190,["period","."]),e.bindKeyCode(191,["slash","forwardslash","/"]),e.bindKeyCode(192,["graveaccent","`"]),e.bindKeyCode(219,["openbracket","["]),e.bindKeyCode(220,["backslash","\\"]),e.bindKeyCode(221,["closebracket","]"]),e.bindKeyCode(222,["apostrophe","'"]),e.bindKeyCode(48,["zero","0"]),e.bindKeyCode(49,["one","1"]),e.bindKeyCode(50,["two","2"]),e.bindKeyCode(51,["three","3"]),e.bindKeyCode(52,["four","4"]),e.bindKeyCode(53,["five","5"]),e.bindKeyCode(54,["six","6"]),e.bindKeyCode(55,["seven","7"]),e.bindKeyCode(56,["eight","8"]),e.bindKeyCode(57,["nine","9"]),e.bindKeyCode(96,["numzero","num0"]),e.bindKeyCode(97,["numone","num1"]),e.bindKeyCode(98,["numtwo","num2"]),e.bindKeyCode(99,["numthree","num3"]),e.bindKeyCode(100,["numfour","num4"]),e.bindKeyCode(101,["numfive","num5"]),e.bindKeyCode(102,["numsix","num6"]),e.bindKeyCode(103,["numseven","num7"]),e.bindKeyCode(104,["numeight","num8"]),e.bindKeyCode(105,["numnine","num9"]),e.bindKeyCode(106,["nummultiply","num*"]),e.bindKeyCode(107,["numadd","num+"]),e.bindKeyCode(108,["numenter"]),e.bindKeyCode(109,["numsubtract","num-"]),e.bindKeyCode(110,["numdecimal","num."]),e.bindKeyCode(111,["numdivide","num/"]),e.bindKeyCode(144,["numlock","num"]),e.bindKeyCode(112,["f1"]),e.bindKeyCode(113,["f2"]),e.bindKeyCode(114,["f3"]),e.bindKeyCode(115,["f4"]),e.bindKeyCode(116,["f5"]),e.bindKeyCode(117,["f6"]),e.bindKeyCode(118,["f7"]),e.bindKeyCode(119,["f8"]),e.bindKeyCode(120,["f9"]),e.bindKeyCode(121,["f10"]),e.bindKeyCode(122,["f11"]),e.bindKeyCode(123,["f12"]),e.bindMacro("shift + `",["tilde","~"]),e.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),e.bindMacro("shift + 2",["at","@"]),e.bindMacro("shift + 3",["number","#"]),e.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),e.bindMacro("shift + 5",["percent","%"]),e.bindMacro("shift + 6",["caret","^"]),e.bindMacro("shift + 7",["ampersand","and","&"]),e.bindMacro("shift + 8",["asterisk","*"]),e.bindMacro("shift + 9",["openparen","("]),e.bindMacro("shift + 0",["closeparen",")"]),e.bindMacro("shift + -",["underscore","_"]),e.bindMacro("shift + =",["plus","+"]),e.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),e.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),e.bindMacro("shift + \\",["verticalbar","|"]),e.bindMacro("shift + ;",["colon",":"]),e.bindMacro("shift + '",["quotationmark","'"]),e.bindMacro("shift + !,",["openanglebracket","<"]),e.bindMacro("shift + .",["closeanglebracket",">"]),e.bindMacro("shift + /",["questionmark","?"]),t.match("Mac")?e.bindMacro("command",["mod","modifier"]):e.bindMacro("ctrl",["mod","modifier"]);for(var r=65;r<=90;r+=1){var o=String.fromCharCode(r+32),i=String.fromCharCode(r);e.bindKeyCode(r,o),e.bindMacro("shift + "+o,i),e.bindMacro("capslock + "+o,i)}var s,a,c=n.match("Firefox")?59:186,l=n.match("Firefox")?173:189;t.match("Mac")&&(n.match("Safari")||n.match("Chrome"))?(s=91,a=93):t.match("Mac")&&n.match("Opera")?a=s=17:t.match("Mac")&&n.match("Firefox")&&(a=s=224),e.bindKeyCode(c,["semicolon",";"]),e.bindKeyCode(l,["dash","-"]),e.bindKeyCode(s,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),e.bindKeyCode(a,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),e.setKillKey("command")}},{}],42:[function(f,t,r){(function(n){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).Matter=e()}}(function(){return function i(s,a,c){function l(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof f&&f;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return l(s[t][1][e]||e)},o,o.exports,i,s,a,c)}return a[t].exports}for(var u="function"==typeof f&&f,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){var l={};t.exports=l;var u=e("../geometry/Vertices"),f=e("../geometry/Vector"),o=e("../core/Sleeping"),i=(e("../render/Render"),e("../core/Common")),d=e("../geometry/Bounds"),p=e("../geometry/Axes");!function(){l._inertiaScale=4,l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,l.create=function(e){var t={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},n=i.extend(t,e);return r(n,e),n},l.nextGroup=function(e){return e?l._nextNonCollidingGroupId--:l._nextCollidingGroupId++},l.nextCategory=function(){return l._nextCategory=l._nextCategory<<1,l._nextCategory};var r=function(e,t){t=t||{},l.set(e,{bounds:e.bounds||d.create(e.vertices),positionPrev:e.positionPrev||f.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),u.rotate(e.vertices,e.angle,e.position),p.rotate(e.axes,e.angle),d.update(e.bounds,e.vertices,e.velocity),l.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#2e2b44":i.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||"#000",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};l.set=function(e,t,n){var r;for(r in"string"==typeof t&&(r=t,(t={})[r]=n),t)if(n=t[r],t.hasOwnProperty(r))switch(r){case"isStatic":l.setStatic(e,n);break;case"isSleeping":o.set(e,n);break;case"mass":l.setMass(e,n);break;case"density":l.setDensity(e,n);break;case"inertia":l.setInertia(e,n);break;case"vertices":l.setVertices(e,n);break;case"position":l.setPosition(e,n);break;case"angle":l.setAngle(e,n);break;case"velocity":l.setVelocity(e,n);break;case"angularVelocity":l.setAngularVelocity(e,n);break;case"parts":l.setParts(e,n);break;default:e[r]=n}},l.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var r=e.parts[n];(r.isStatic=t)?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,delete r._original)}},l.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},l.setDensity=function(e,t){l.setMass(e,t*e.area),e.density=t},l.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},l.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=u.create(t,e),e.axes=p.fromVertices(e.vertices),e.area=u.area(e.vertices),l.setMass(e,e.density*e.area);var n=u.centre(e.vertices);u.translate(e.vertices,n,-1),l.setInertia(e,l._inertiaScale*u.inertia(e.vertices,e.mass)),u.translate(e.vertices,e.position),d.update(e.bounds,e.vertices,e.velocity)},l.setParts=function(e,t,n){var r;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var o=t[r];o!==e&&(o.parent=e).parts.push(o)}if(1!==e.parts.length){if(n=void 0===n||n){var i=[];for(r=0;r<t.length;r++)i=i.concat(t[r].vertices);u.clockwiseSort(i);var s=u.hull(i),a=u.centre(s);l.setVertices(e,s),u.translate(e.vertices,a)}var c=l._totalProperties(e);e.area=c.area,(e.parent=e).position.x=c.centre.x,e.position.y=c.centre.y,e.positionPrev.x=c.centre.x,e.positionPrev.y=c.centre.y,l.setMass(e,c.mass),l.setInertia(e,c.inertia),l.setPosition(e,c.centre)}},l.setPosition=function(e,t){var n=f.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.position.x+=n.x,o.position.y+=n.y,u.translate(o.vertices,n),d.update(o.bounds,o.vertices,e.velocity)}},l.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.angle+=n,u.rotate(o.vertices,n,e.position),p.rotate(o.axes,n),d.update(o.bounds,o.vertices,e.velocity),0<r&&f.rotateAbout(o.position,n,e.position,o.position)}},l.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=f.magnitude(e.velocity)},l.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},l.translate=function(e,t){l.setPosition(e,f.add(e.position,t))},l.rotate=function(e,t,n){if(n){var r=Math.cos(t),o=Math.sin(t),i=e.position.x-n.x,s=e.position.y-n.y;l.setPosition(e,{x:n.x+(i*r-s*o),y:n.y+(i*o+s*r)}),l.setAngle(e,e.angle+t)}else l.setAngle(e,e.angle+t)},l.scale=function(e,t,n,r){var o=0,i=0;r=r||e.position;for(var s=0;s<e.parts.length;s++){var a=e.parts[s];u.scale(a.vertices,t,n,r),a.axes=p.fromVertices(a.vertices),a.area=u.area(a.vertices),l.setMass(a,e.density*a.area),u.translate(a.vertices,{x:-a.position.x,y:-a.position.y}),l.setInertia(a,l._inertiaScale*u.inertia(a.vertices,a.mass)),u.translate(a.vertices,{x:a.position.x,y:a.position.y}),0<s&&(o+=a.area,i+=a.inertia),a.position.x=r.x+(a.position.x-r.x)*t,a.position.y=r.y+(a.position.y-r.y)*n,d.update(a.bounds,a.vertices,e.velocity)}1<e.parts.length&&(e.area=o,e.isStatic||(l.setMass(e,e.density*o),l.setInertia(e,i))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},l.update=function(e,t,n,r){var o=Math.pow(t*n*e.timeScale,2),i=1-e.frictionAir*n*e.timeScale,s=e.position.x-e.positionPrev.x,a=e.position.y-e.positionPrev.y;e.velocity.x=s*i*r+e.force.x/e.mass*o,e.velocity.y=a*i*r+e.force.y/e.mass*o,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*i*r+e.torque/e.inertia*o,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=f.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var c=0;c<e.parts.length;c++){var l=e.parts[c];u.translate(l.vertices,e.velocity),0<c&&(l.position.x+=e.velocity.x,l.position.y+=e.velocity.y),0!==e.angularVelocity&&(u.rotate(l.vertices,e.angularVelocity,e.position),p.rotate(l.axes,e.angularVelocity),0<c&&f.rotateAbout(l.position,e.angularVelocity,e.position,l.position)),d.update(l.bounds,l.vertices,e.velocity)}},l.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var r=t.x-e.position.x,o=t.y-e.position.y;e.torque+=r*n.y-o*n.x},l._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var r=e.parts[n],o=r.mass!==1/0?r.mass:1;t.mass+=o,t.area+=r.area,t.inertia+=r.inertia,t.centre=f.add(t.centre,f.mult(r.position,o))}return t.centre=f.div(t.centre,t.mass),t}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,n){var f={};t.exports=f;var s=e("../core/Events"),i=e("../core/Common"),a=e("../geometry/Bounds"),d=e("./Body");f.create=function(e){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},f.setModified=function(e,t,n,r){if(e.isModified=t,n&&e.parent&&f.setModified(e.parent,t,n,r),r)for(var o=0;o<e.composites.length;o++){var i=e.composites[o];f.setModified(i,t,n,r)}},f.add=function(e,t){var n=[].concat(t);s.trigger(e,"beforeAdd",{object:t});for(var r=0;r<n.length;r++){var o=n[r];switch(o.type){case"body":if(o.parent!==o){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}f.addBody(e,o);break;case"constraint":f.addConstraint(e,o);break;case"composite":f.addComposite(e,o);break;case"mouseConstraint":f.addConstraint(e,o.constraint)}}return s.trigger(e,"afterAdd",{object:t}),e},f.remove=function(e,t,n){var r=[].concat(t);s.trigger(e,"beforeRemove",{object:t});for(var o=0;o<r.length;o++){var i=r[o];switch(i.type){case"body":f.removeBody(e,i,n);break;case"constraint":f.removeConstraint(e,i,n);break;case"composite":f.removeComposite(e,i,n);break;case"mouseConstraint":f.removeConstraint(e,i.constraint)}}return s.trigger(e,"afterRemove",{object:t}),e},f.addComposite=function(e,t){return e.composites.push(t),t.parent=e,f.setModified(e,!0,!0,!1),e},f.removeComposite=function(e,t,n){var r=i.indexOf(e.composites,t);if(-1!==r&&(f.removeCompositeAt(e,r),f.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)f.removeComposite(e.composites[o],t,!0);return e},f.removeCompositeAt=function(e,t){return e.composites.splice(t,1),f.setModified(e,!0,!0,!1),e},f.addBody=function(e,t){return e.bodies.push(t),f.setModified(e,!0,!0,!1),e},f.removeBody=function(e,t,n){var r=i.indexOf(e.bodies,t);if(-1!==r&&(f.removeBodyAt(e,r),f.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)f.removeBody(e.composites[o],t,!0);return e},f.removeBodyAt=function(e,t){return e.bodies.splice(t,1),f.setModified(e,!0,!0,!1),e},f.addConstraint=function(e,t){return e.constraints.push(t),f.setModified(e,!0,!0,!1),e},f.removeConstraint=function(e,t,n){var r=i.indexOf(e.constraints,t);if(-1!==r&&f.removeConstraintAt(e,r),n)for(var o=0;o<e.composites.length;o++)f.removeConstraint(e.composites[o],t,!0);return e},f.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),f.setModified(e,!0,!0,!1),e},f.clear=function(e,t,n){if(n)for(var r=0;r<e.composites.length;r++)f.clear(e.composites[r],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,f.setModified(e,!0,!0,!1),e},f.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(f.allBodies(e.composites[n]));return t},f.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(f.allConstraints(e.composites[n]));return t},f.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(f.allComposites(e.composites[n]));return t},f.get=function(e,t,n){var r,o;switch(n){case"body":r=f.allBodies(e);break;case"constraint":r=f.allConstraints(e);break;case"composite":r=f.allComposites(e).concat(e)}return r?0===(o=r.filter(function(e){return e.id.toString()===t.toString()})).length?null:o[0]:null},f.move=function(e,t,n){return f.remove(e,t),f.add(n,t),e},f.rebase=function(e){for(var t=f.allBodies(e).concat(f.allConstraints(e)).concat(f.allComposites(e)),n=0;n<t.length;n++)t[n].id=i.nextId();return f.setModified(e,!0,!0,!1),e},f.translate=function(e,t,n){for(var r=n?f.allBodies(e):e.bodies,o=0;o<r.length;o++)d.translate(r[o],t);return f.setModified(e,!0,!0,!1),e},f.rotate=function(e,t,n,r){for(var o=Math.cos(t),i=Math.sin(t),s=r?f.allBodies(e):e.bodies,a=0;a<s.length;a++){var c=s[a],l=c.position.x-n.x,u=c.position.y-n.y;d.setPosition(c,{x:n.x+(l*o-u*i),y:n.y+(l*i+u*o)}),d.rotate(c,t)}return f.setModified(e,!0,!0,!1),e},f.scale=function(e,t,n,r,o){for(var i=o?f.allBodies(e):e.bodies,s=0;s<i.length;s++){var a=i[s],c=a.position.x-r.x,l=a.position.y-r.y;d.setPosition(a,{x:r.x+c*t,y:r.y+l*n}),d.scale(a,t,n)}return f.setModified(e,!0,!0,!1),e},f.bounds=function(e){for(var t=f.allBodies(e),n=[],r=0;r<t.length;r+=1){var o=t[r];n.push(o.bounds.min,o.bounds.max)}return a.create(n)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,n){var r={};t.exports=r;var o=e("./Composite"),i=(e("../constraint/Constraint"),e("../core/Common"));r.create=function(e){var t=o.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return i.extend(t,n,e)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,n){var r={};(t.exports=r).create=function(e){return{id:r.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},r.id=function(e){return e.body.id+"_"+e.index}},{}],5:[function(e,t,n){var h={};t.exports=h;var y=e("./SAT"),g=e("./Pair"),m=e("../geometry/Bounds");h.collisions=function(e,t){for(var n=[],r=t.pairs.table,o=0;o<e.length;o++){var i=e[o][0],s=e[o][1];if((!i.isStatic&&!i.isSleeping||!s.isStatic&&!s.isSleeping)&&h.canCollide(i.collisionFilter,s.collisionFilter)&&m.overlaps(i.bounds,s.bounds))for(var a=1<i.parts.length?1:0;a<i.parts.length;a++)for(var c=i.parts[a],l=1<s.parts.length?1:0;l<s.parts.length;l++){var u=s.parts[l];if(c===i&&u===s||m.overlaps(c.bounds,u.bounds)){var f,d=r[g.id(c,u)];f=d&&d.isActive?d.collision:null;var p=y.collides(c,u,f);p.collided&&n.push(p)}}}return n},h.canCollide=function(e,t){return e.group===t.group&&0!==e.group?0<e.group:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,n){var m={};t.exports=m;var a=e("./Pair"),r=e("./Detector"),c=e("../core/Common");m.create=function(e){var t={controller:m,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(t,e)},m.update=function(e,t,n,r){var o,i,s,a,c,l=n.world,u=e.buckets,f=!1;for(o=0;o<t.length;o++){var d=t[o];if((!d.isSleeping||r)&&!(d.bounds.max.x<l.bounds.min.x||d.bounds.min.x>l.bounds.max.x||d.bounds.max.y<l.bounds.min.y||d.bounds.min.y>l.bounds.max.y)){var p=m._getRegion(e,d);if(!d.region||p.id!==d.region.id||r){d.region&&!r||(d.region=p);var h=m._regionUnion(p,d.region);for(i=h.startCol;i<=h.endCol;i++)for(s=h.startRow;s<=h.endRow;s++){a=u[c=m._getBucketId(i,s)];var y=i>=p.startCol&&i<=p.endCol&&s>=p.startRow&&s<=p.endRow,g=i>=d.region.startCol&&i<=d.region.endCol&&s>=d.region.startRow&&s<=d.region.endRow;!y&&g&&g&&a&&m._bucketRemoveBody(e,a,d),(d.region===p||y&&!g||r)&&(a||(a=m._createBucket(u,c)),m._bucketAddBody(e,a,d))}d.region=p,f=!0}}}f&&(e.pairsList=m._createActivePairsList(e))},m.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},m._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),r=Math.max(e.endCol,t.endCol),o=Math.min(e.startRow,t.startRow),i=Math.max(e.endRow,t.endRow);return m._createRegion(n,r,o,i)},m._getRegion=function(e,t){var n=t.bounds,r=Math.floor(n.min.x/e.bucketWidth),o=Math.floor(n.max.x/e.bucketWidth),i=Math.floor(n.min.y/e.bucketHeight),s=Math.floor(n.max.y/e.bucketHeight);return m._createRegion(r,o,i,s)},m._createRegion=function(e,t,n,r){return{id:e+","+t+","+n+","+r,startCol:e,endCol:t,startRow:n,endRow:r}},m._getBucketId=function(e,t){return"C"+e+"R"+t},m._createBucket=function(e,t){return e[t]=[]},m._bucketAddBody=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];if(!(n.id===o.id||n.isStatic&&o.isStatic)){var i=a.id(n,o),s=e.pairs[i];s?s[2]+=1:e.pairs[i]=[n,o,1]}}t.push(n)},m._bucketRemoveBody=function(e,t,n){t.splice(c.indexOf(t,n),1);for(var r=0;r<t.length;r++){var o=t[r],i=a.id(n,o),s=e.pairs[i];s&&(s[2]-=1)}},m._createActivePairsList=function(e){var t,n,r=[];t=c.keys(e.pairs);for(var o=0;o<t.length;o++)0<(n=e.pairs[t[o]])[2]?r.push(n):delete e.pairs[t[o]];return r}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,n){var d={};t.exports=d;var p=e("./Contact");d.create=function(e,t){var n=e.bodyA,r=e.bodyB,o=e.parentA,i=e.parentB,s={id:d.id(n,r),bodyA:n,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:o.inverseMass+i.inverseMass,friction:Math.min(o.friction,i.friction),frictionStatic:Math.max(o.frictionStatic,i.frictionStatic),restitution:Math.max(o.restitution,i.restitution),slop:Math.max(o.slop,i.slop)};return d.update(s,e,t),s},d.update=function(e,t,n){var r=e.contacts,o=t.supports,i=e.activeContacts,s=t.parentA,a=t.parentB;if(e.collision=t,e.inverseMass=s.inverseMass+a.inverseMass,e.friction=Math.min(s.friction,a.friction),e.frictionStatic=Math.max(s.frictionStatic,a.frictionStatic),e.restitution=Math.max(s.restitution,a.restitution),e.slop=Math.max(s.slop,a.slop),i.length=0,t.collided){for(var c=0;c<o.length;c++){var l=o[c],u=p.id(l),f=r[u];f?i.push(f):i.push(r[u]=p.create(l))}e.separation=t.depth,d.setActive(e,!0,n)}else!0===e.isActive&&d.setActive(e,!1,n)},d.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},d.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":4}],8:[function(e,t,n){var l={};t.exports=l;var p=e("./Pair"),h=e("../core/Common");l._pairMaxIdleLife=1e3,l.create=function(e){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},l.update=function(e,t,n){var r,o,i,s,a=e.list,c=e.table,l=e.collisionStart,u=e.collisionEnd,f=e.collisionActive,d=[];for(l.length=0,u.length=0,s=f.length=0;s<t.length;s++)(r=t[s]).collided&&(o=p.id(r.bodyA,r.bodyB),d.push(o),(i=c[o])?(i.isActive?f.push(i):l.push(i),p.update(i,r,n)):(i=p.create(r,n),c[o]=i,l.push(i),a.push(i)));for(s=0;s<a.length;s++)(i=a[s]).isActive&&-1===h.indexOf(d,i.id)&&(p.setActive(i,!1,n),u.push(i))},l.removeOld=function(e,t){var n,r,o,i,s=e.list,a=e.table,c=[];for(i=0;i<s.length;i++)(r=(n=s[i]).collision).bodyA.isSleeping||r.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>l._pairMaxIdleLife&&c.push(i);for(i=0;i<c.length;i++)delete a[(n=s[o=c[i]-i]).id],s.splice(o,1)},l.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":14,"./Pair":7}],9:[function(e,t,n){var d={};t.exports=d;var p=e("../geometry/Vector"),c=e("./SAT"),l=e("../geometry/Bounds"),h=e("../factory/Bodies"),a=e("../geometry/Vertices");d.collides=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(l.overlaps(o.bounds,e.bounds))for(var i=1===o.parts.length?0:1;i<o.parts.length;i++){var s=o.parts[i];if(l.overlaps(s.bounds,e.bounds)){var a=c.collides(s,e);if(a.collided){n.push(a);break}}}}return n},d.ray=function(e,t,n,r){r=r||1e-100;for(var o=p.angle(t,n),i=p.magnitude(p.sub(t,n)),s=.5*(n.x+t.x),a=.5*(n.y+t.y),c=h.rectangle(s,a,i,r,{angle:o}),l=d.collides(c,e),u=0;u<l.length;u+=1){var f=l[u];f.body=f.bodyB=f.bodyA}return l},d.region=function(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o],s=l.overlaps(i.bounds,t);(s&&!n||!s&&n)&&r.push(i)}return r},d.point=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(l.contains(o.bounds,t))for(var i=1===o.parts.length?0:1;i<o.parts.length;i++){var s=o.parts[i];if(l.contains(s.bounds,t)&&a.contains(s.vertices,t)){n.push(o);break}}}return n}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,n){var D={};t.exports=D;var i=e("../geometry/Vertices"),q=e("../geometry/Vector"),U=e("../core/Common"),s=e("../geometry/Bounds");D._restingThresh=4,D._restingThreshTangent=6,D._positionDampen=.9,D._positionWarming=.8,D._frictionNormalMultiplier=5,D.preSolvePosition=function(e){var t,n,r;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},D.solvePosition=function(e,t){var n,r,o,i,s,a,c,l,u,f=q._temp[0],d=q._temp[1],p=q._temp[2],h=q._temp[3];for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(i=(o=r.collision).parentA,s=o.parentB,a=o.normal,c=q.sub(q.add(s.positionImpulse,s.position,f),q.add(i.positionImpulse,q.sub(s.position,o.penetration,d),p),h),r.separation=q.dot(a,c));for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(i=(o=r.collision).parentA,s=o.parentB,a=o.normal,u=(r.separation-r.slop)*t,(i.isStatic||s.isStatic)&&(u*=2),i.isStatic||i.isSleeping||(l=D._positionDampen/i.totalContacts,i.positionImpulse.x+=a.x*u*l,i.positionImpulse.y+=a.y*u*l),s.isStatic||s.isSleeping||(l=D._positionDampen/s.totalContacts,s.positionImpulse.x-=a.x*u*l,s.positionImpulse.y-=a.y*u*l))},D.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if((n.totalContacts=0)!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var r=0;r<n.parts.length;r++){var o=n.parts[r];i.translate(o.vertices,n.positionImpulse),s.update(o.bounds,o.vertices,n.velocity),o.position.x+=n.positionImpulse.x,o.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,q.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=D._positionWarming,n.positionImpulse.y*=D._positionWarming)}}},D.preSolveVelocity=function(e){var t,n,r,o,i,s,a,c,l,u,f,d,p,h,y=q._temp[0],g=q._temp[1];for(t=0;t<e.length;t++)if((r=e[t]).isActive&&!r.isSensor)for(o=r.activeContacts,s=(i=r.collision).parentA,a=i.parentB,c=i.normal,l=i.tangent,n=0;n<o.length;n++)f=(u=o[n]).vertex,d=u.normalImpulse,p=u.tangentImpulse,0===d&&0===p||(y.x=c.x*d+l.x*p,y.y=c.y*d+l.y*p,s.isStatic||s.isSleeping||(h=q.sub(f,s.position,g),s.positionPrev.x+=y.x*s.inverseMass,s.positionPrev.y+=y.y*s.inverseMass,s.anglePrev+=q.cross(h,y)*s.inverseInertia),a.isStatic||a.isSleeping||(h=q.sub(f,a.position,g),a.positionPrev.x-=y.x*a.inverseMass,a.positionPrev.y-=y.y*a.inverseMass,a.anglePrev-=q.cross(h,y)*a.inverseInertia))},D.solveVelocity=function(e,t){for(var n=t*t,r=q._temp[0],o=q._temp[1],i=q._temp[2],s=q._temp[3],a=q._temp[4],c=q._temp[5],l=0;l<e.length;l++){var u=e[l];if(u.isActive&&!u.isSensor){var f=u.collision,d=f.parentA,p=f.parentB,h=f.normal,y=f.tangent,g=u.activeContacts,m=1/g.length;d.velocity.x=d.position.x-d.positionPrev.x,d.velocity.y=d.position.y-d.positionPrev.y,p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,p.angularVelocity=p.angle-p.anglePrev;for(var v=0;v<g.length;v++){var b=g[v],w=b.vertex,x=q.sub(w,d.position,o),C=q.sub(w,p.position,i),_=q.add(d.velocity,q.mult(q.perp(x),d.angularVelocity),s),k=q.add(p.velocity,q.mult(q.perp(C),p.angularVelocity),a),S=q.sub(_,k,c),A=q.dot(h,S),E=q.dot(y,S),B=Math.abs(E),R=U.sign(E),P=(1+u.restitution)*A,T=U.clamp(u.separation+A,0,1)*D._frictionNormalMultiplier,M=E,F=1/0;B>u.friction*u.frictionStatic*T*n&&(F=B,M=U.clamp(u.friction*R*n,-F,F));var I=q.cross(x,h),O=q.cross(C,h),N=m/(d.inverseMass+p.inverseMass+d.inverseInertia*I*I+p.inverseInertia*O*O);if(P*=N,M*=N,A<0&&A*A>D._restingThresh*n)b.normalImpulse=0;else{var L=b.normalImpulse;b.normalImpulse=Math.min(b.normalImpulse+P,0),P=b.normalImpulse-L}if(E*E>D._restingThreshTangent*n)b.tangentImpulse=0;else{var j=b.tangentImpulse;b.tangentImpulse=U.clamp(b.tangentImpulse+M,-F,F),M=b.tangentImpulse-j}r.x=h.x*P+y.x*M,r.y=h.y*P+y.y*M,d.isStatic||d.isSleeping||(d.positionPrev.x+=r.x*d.inverseMass,d.positionPrev.y+=r.y*d.inverseMass,d.anglePrev+=q.cross(x,r)*d.inverseInertia),p.isStatic||p.isSleeping||(p.positionPrev.x-=r.x*p.inverseMass,p.positionPrev.y-=r.y*p.inverseMass,p.anglePrev-=q.cross(C,r)*p.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,n){var m={};t.exports=m;var v=e("../geometry/Vertices"),b=e("../geometry/Vector");m.collides=function(e,t,n){var r,o,i,s,a=!1;if(n){var c=e.parent,l=t.parent,u=c.speed*c.speed+c.angularSpeed*c.angularSpeed+l.speed*l.speed+l.angularSpeed*l.angularSpeed;a=n&&n.collided&&u<.2,s=n}else s={collided:!1,bodyA:e,bodyB:t};if(n&&a){var f=s.axisBody,d=f===e?t:e,p=[f.axes[n.axisNumber]];if(i=m._overlapAxes(f.vertices,d.vertices,p),s.reused=!0,i.overlap<=0)return s.collided=!1,s}else{if((r=m._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return s.collided=!1,s;if((o=m._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return s.collided=!1,s;r.overlap<o.overlap?(i=r,s.axisBody=e):(i=o,s.axisBody=t),s.axisNumber=i.axisNumber}s.bodyA=e.id<t.id?e:t,s.bodyB=e.id<t.id?t:e,s.collided=!0,s.depth=i.overlap,s.parentA=s.bodyA.parent,s.parentB=s.bodyB.parent,e=s.bodyA,t=s.bodyB,b.dot(i.axis,b.sub(t.position,e.position))<0?s.normal={x:i.axis.x,y:i.axis.y}:s.normal={x:-i.axis.x,y:-i.axis.y},s.tangent=b.perp(s.normal),s.penetration=s.penetration||{},s.penetration.x=s.normal.x*s.depth,s.penetration.y=s.normal.y*s.depth;var h=m._findSupports(e,t,s.normal),y=[];if(v.contains(e.vertices,h[0])&&y.push(h[0]),v.contains(e.vertices,h[1])&&y.push(h[1]),y.length<2){var g=m._findSupports(t,e,b.neg(s.normal));v.contains(t.vertices,g[0])&&y.push(g[0]),y.length<2&&v.contains(t.vertices,g[1])&&y.push(g[1])}return y.length<1&&(y=[h[0]]),s.supports=y,s},m._overlapAxes=function(e,t,n){for(var r,o,i=b._temp[0],s=b._temp[1],a={overlap:Number.MAX_VALUE},c=0;c<n.length;c++){if(o=n[c],m._projectToAxis(i,e,o),m._projectToAxis(s,t,o),(r=Math.min(i.max-s.min,s.max-i.min))<=0)return a.overlap=r,a;r<a.overlap&&(a.overlap=r,a.axis=o,a.axisNumber=c)}return a},m._projectToAxis=function(e,t,n){for(var r=b.dot(t[0],n),o=r,i=1;i<t.length;i+=1){var s=b.dot(t[i],n);o<s?o=s:s<r&&(r=s)}e.min=r,e.max=o},m._findSupports=function(e,t,n){for(var r,o,i,s,a=Number.MAX_VALUE,c=b._temp[0],l=t.vertices,u=e.position,f=0;f<l.length;f++)o=l[f],c.x=o.x-u.x,c.y=o.y-u.y,(r=-b.dot(n,c))<a&&(a=r,i=o);return o=l[0<=i.index-1?i.index-1:l.length-1],c.x=o.x-u.x,c.y=o.y-u.y,a=-b.dot(n,c),s=o,o=l[(i.index+1)%l.length],c.x=o.x-u.x,c.y=o.y-u.y,(r=-b.dot(n,c))<a&&(s=o),[i,s]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,n){var x={};t.exports=x;var s=e("../geometry/Vertices"),C=e("../geometry/Vector"),a=e("../core/Sleeping"),c=e("../geometry/Bounds"),l=e("../geometry/Axes"),u=e("../core/Common");x._warming=.4,x._torqueDampen=1,x._minLength=1e-6,x.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?C.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?C.add(t.bodyB.position,t.pointB):t.pointB,o=C.magnitude(C.sub(n,r));t.length=void 0!==t.length?t.length:o,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(0<t.length?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var i={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&.1<t.stiffness?(i.type="pin",i.anchors=!1):t.stiffness<.9&&(i.type="spring"),t.render=u.extend(i,t.render),t},x.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},x.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n],o=!r.bodyA||r.bodyA&&r.bodyA.isStatic,i=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(o||i)&&x.solve(e[n],t)}for(n=0;n<e.length;n+=1)o=!(r=e[n]).bodyA||r.bodyA&&r.bodyA.isStatic,i=!r.bodyB||r.bodyB&&r.bodyB.isStatic,o||i||x.solve(e[n],t)},x.solve=function(e,t){var n=e.bodyA,r=e.bodyB,o=e.pointA,i=e.pointB;if(n||r){n&&!n.isStatic&&(C.rotate(o,n.angle-e.angleA,o),e.angleA=n.angle),r&&!r.isStatic&&(C.rotate(i,r.angle-e.angleB,i),e.angleB=r.angle);var s=o,a=i;if(n&&(s=C.add(n.position,o)),r&&(a=C.add(r.position,i)),s&&a){var c=C.sub(s,a),l=C.magnitude(c);l<x._minLength&&(l=x._minLength);var u,f,d,p,h,y=(l-e.length)/l,g=e.stiffness<1?e.stiffness*t:e.stiffness,m=C.mult(c,y*g),v=(n?n.inverseMass:0)+(r?r.inverseMass:0),b=v+((n?n.inverseInertia:0)+(r?r.inverseInertia:0));if(e.damping){var w=C.create();d=C.div(c,l),h=C.sub(r&&C.sub(r.position,r.positionPrev)||w,n&&C.sub(n.position,n.positionPrev)||w),p=C.dot(d,h)}n&&!n.isStatic&&(f=n.inverseMass/v,n.constraintImpulse.x-=m.x*f,n.constraintImpulse.y-=m.y*f,n.position.x-=m.x*f,n.position.y-=m.y*f,e.damping&&(n.positionPrev.x-=e.damping*d.x*p*f,n.positionPrev.y-=e.damping*d.y*p*f),u=C.cross(o,m)/b*x._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=u,n.angle-=u),r&&!r.isStatic&&(f=r.inverseMass/v,r.constraintImpulse.x+=m.x*f,r.constraintImpulse.y+=m.y*f,r.position.x+=m.x*f,r.position.y+=m.y*f,e.damping&&(r.positionPrev.x+=e.damping*d.x*p*f,r.positionPrev.y+=e.damping*d.y*p*f),u=C.cross(i,m)/b*x._torqueDampen*r.inverseInertia*(1-e.angularStiffness),r.constraintImpulse.angle+=u,r.angle+=u)}}},x.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.constraintImpulse;if(!(n.isStatic||0===r.x&&0===r.y&&0===r.angle)){a.set(n,!1);for(var o=0;o<n.parts.length;o++){var i=n.parts[o];s.translate(i.vertices,r),0<o&&(i.position.x+=r.x,i.position.y+=r.y),0!==r.angle&&(s.rotate(i.vertices,r.angle,n.position),l.rotate(i.axes,r.angle),0<o&&C.rotateAbout(i.position,r.angle,n.position,i.position)),c.update(i.bounds,i.vertices,n.velocity)}r.angle*=x._warming,r.x*=x._warming,r.y*=x._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,n){var i={};t.exports=i;var c=e("../geometry/Vertices"),l=e("../core/Sleeping"),s=e("../core/Mouse"),u=e("../core/Events"),f=e("../collision/Detector"),a=e("./Constraint"),d=e("../body/Composite"),p=e("../core/Common"),h=e("../geometry/Bounds");i.create=function(t,e){var n=(t?t.mouse:null)||(e?e.mouse:null);n||(t&&t.render&&t.render.canvas?n=s.create(t.render.canvas):e&&e.element?n=s.create(e.element):(n=s.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var r={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:a.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},o=p.extend(r,e);return u.on(t,"beforeUpdate",function(){var e=d.allBodies(t.world);i.update(o,e),i._triggerEvents(o)}),o},i.update=function(e,t){var n=e.mouse,r=e.constraint,o=e.body;if(0===n.button){if(r.bodyB)l.set(r.bodyB,!1),r.pointA=n.position;else for(var i=0;i<t.length;i++)if(o=t[i],h.contains(o.bounds,n.position)&&f.canCollide(o.collisionFilter,e.collisionFilter))for(var s=1<o.parts.length?1:0;s<o.parts.length;s++){var a=o.parts[s];if(c.contains(a.vertices,n.position)){r.pointA=n.position,r.bodyB=e.body=o,r.pointB={x:n.position.x-o.position.x,y:n.position.y-o.position.y},r.angleB=o.angle,l.set(o,!1),u.trigger(e,"startdrag",{mouse:n,body:o});break}}}else r.bodyB=e.body=null,r.pointB=null,o&&u.trigger(e,"enddrag",{mouse:n,body:o})},i._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&u.trigger(e,"mousemove",{mouse:t}),n.mousedown&&u.trigger(e,"mousedown",{mouse:t}),n.mouseup&&u.trigger(e,"mouseup",{mouse:t}),s.clearSourceEvents(t)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(o,e,t){(function(r){var c={};e.exports=c,function(){c._nextId=0,c._seed=0,c._nowStartTime=+new Date,c.extend=function(e,t){var n,r;r="boolean"==typeof t?(n=2,t):(n=1,!0);for(var o=n;o<arguments.length;o++){var i=arguments[o];if(i)for(var s in i)r&&i[s]&&i[s].constructor===Object?e[s]&&e[s].constructor!==Object?e[s]=i[s]:(e[s]=e[s]||{},c.extend(e[s],r,i[s])):e[s]=i[s]}return e},c.clone=function(e,t){return c.extend({},t,e)},c.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},c.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}for(var o in e)t.push(e[o]);return t},c.get=function(e,t,n,r){t=t.split(".").slice(n,r);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},c.set=function(e,t,n,r,o){var i=t.split(".").slice(r,o);return c.get(e,t,0,-1)[i[i.length-1]]=n},c.shuffle=function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(c.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},c.choose=function(e){return e[Math.floor(c.random()*e.length)]},c.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},c.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isFunction=function(e){return"function"==typeof e},c.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},c.isString=function(e){return"[object String]"===toString.call(e)},c.clamp=function(e,t,n){return e<t?t:n<e?n:e},c.sign=function(e){return e<0?-1:1},c.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-c._nowStartTime},c.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+n()*(t-e)};var n=function(){return c._seed=(9301*c._seed+49297)%233280,c._seed/233280};c.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},c.logLevel=1,c.log=function(){console&&0<c.logLevel&&c.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.info=function(){console&&0<c.logLevel&&c.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warn=function(){console&&0<c.logLevel&&c.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.nextId=function(){return c._nextId++},c.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c.map=function(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n},c.topologicalSort=function(e){var t=[],n=[],r=[];for(var o in e)n[o]||r[o]||c._topologicalSort(o,n,r,e,t);return t},c._topologicalSort=function(e,t,n,r,o){var i=r[e]||[];n[e]=!0;for(var s=0;s<i.length;s+=1){var a=i[s];n[a]||(t[a]||c._topologicalSort(a,t,n,r,o))}n[e]=!1,t[e]=!0,o.push(e)},c.chain=function(){for(var i=[],e=0;e<arguments.length;e+=1){var t=arguments[e];t._chained?i.push.apply(i,t._chained):i.push(t)}var n=function(){for(var e,t=new Array(arguments.length),n=0,r=arguments.length;n<r;n++)t[n]=arguments[n];for(n=0;n<i.length;n+=1){var o=i[n].apply(e,t);void 0!==o&&(e=o)}return e};return n._chained=i,n},c.chainPathBefore=function(e,t,n){return c.set(e,t,c.chain(n,c.get(e,t)))},c.chainPathAfter=function(e,t,n){return c.set(e,t,c.chain(c.get(e,t),n))},c._requireGlobal=function(e,t){return("undefined"!=typeof window?window[e]:void 0!==r?r[e]:null)||o(t)}}()}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){var h={};t.exports=h;var i=e("../body/World"),y=e("./Sleeping"),g=e("../collision/Resolver"),s=e("../render/Render"),m=e("../collision/Pairs"),a=(e("./Metrics"),e("../collision/Grid")),v=e("./Events"),b=e("../body/Composite"),w=e("../constraint/Constraint"),c=e("./Common"),l=e("../body/Body");h.create=function(e,t){t=(t=c.isElement(e)?t:e)||{},((e=c.isElement(e)?e:null)||t.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:a}},r=c.extend(n,t);if(e||r.render){var o={element:e,controller:s};r.render=c.extend(o,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=t.world||i.create(r.world),r.pairs=m.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},h.update=function(e,t,n){t=t||1e3/60,n=n||1;var r,o=e.world,i=e.timing,s=e.broadphase,a=[];i.timestamp+=t*i.timeScale;var c={timestamp:i.timestamp};v.trigger(e,"beforeUpdate",c);var l=b.allBodies(o),u=b.allConstraints(o);for(e.enableSleeping&&y.update(l,i.timeScale),h._bodiesApplyGravity(l,o.gravity),h._bodiesUpdate(l,t,i.timeScale,n,o.bounds),w.preSolveAll(l),r=0;r<e.constraintIterations;r++)w.solveAll(u,i.timeScale);w.postSolveAll(l),a=s.controller?(o.isModified&&s.controller.clear(s),s.controller.update(s,l,e,o.isModified),s.pairsList):l,o.isModified&&b.setModified(o,!1,!1,!0);var f=s.detector(a,e),d=e.pairs,p=i.timestamp;for(m.update(d,f,p),m.removeOld(d,p),e.enableSleeping&&y.afterCollisions(d.list,i.timeScale),0<d.collisionStart.length&&v.trigger(e,"collisionStart",{pairs:d.collisionStart}),g.preSolvePosition(d.list),r=0;r<e.positionIterations;r++)g.solvePosition(d.list,i.timeScale);for(g.postSolvePosition(l),w.preSolveAll(l),r=0;r<e.constraintIterations;r++)w.solveAll(u,i.timeScale);for(w.postSolveAll(l),g.preSolveVelocity(d.list),r=0;r<e.velocityIterations;r++)g.solveVelocity(d.list,i.timeScale);return 0<d.collisionActive.length&&v.trigger(e,"collisionActive",{pairs:d.collisionActive}),0<d.collisionEnd.length&&v.trigger(e,"collisionEnd",{pairs:d.collisionEnd}),h._bodiesClearForces(l),v.trigger(e,"afterUpdate",c),e},h.merge=function(e,t){if(c.extend(e,t),t.world){e.world=t.world,h.clear(e);for(var n=b.allBodies(e.world),r=0;r<n.length;r++){var o=n[r];y.set(o,!1),o.id=c.nextId()}}},h.clear=function(e){var t=e.world;m.clear(e.pairs);var n=e.broadphase;if(n.controller){var r=b.allBodies(t);n.controller.clear(n),n.controller.update(n,r,e,!0)}},h._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},h._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var r=0;r<e.length;r++){var o=e[r];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},h._bodiesUpdate=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var s=e[i];s.isStatic||s.isSleeping||l.update(s,t,n,r)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,n){var r={};t.exports=r;var l=e("./Common");r.on=function(e,t,n){for(var r,o=t.split(" "),i=0;i<o.length;i++)r=o[i],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(n);return n},r.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=l.keys(e.events).join(" "));for(var r=t.split(" "),o=0;o<r.length;o++){var i=e.events[r[o]],s=[];if(n&&i)for(var a=0;a<i.length;a++)i[a]!==n&&s.push(i[a]);e.events[r[o]]=s}}else e.events={}},r.trigger=function(e,t,n){var r,o,i,s;if(e.events){n||(n={}),r=t.split(" ");for(var a=0;a<r.length;a++)if(o=r[a],i=e.events[o]){(s=l.clone(n,!1)).name=o,s.source=e;for(var c=0;c<i.length;c++)i[c].apply(e,[s])}}}},{"./Common":14}],17:[function(e,t,n){var r={};t.exports=r;var o=e("./Plugin"),i=e("./Common");r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathAfter(r,e,t)}},{"./Common":14,"./Plugin":20}],18:[function(e,t,n){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,n){var r={};t.exports=r;var o=e("../core/Common");r.create=function(e){var n={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=e||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=n.element.getAttribute("data-pixel-ratio")||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&(n.button=0,e.preventDefault()),n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=e},n.mousedown=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches?(n.button=0,e.preventDefault()):n.button=e.button,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=e},n.mouseup=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&e.preventDefault(),n.button=-1,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=e},n.mousewheel=function(e){n.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(n,n.element),n},r.setElement=function(e,t){(e.element=t).addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r._getRelativeMousePosition=function(e,t,n){var r,o,i=t.getBoundingClientRect(),s=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:s.scrollLeft,c=void 0!==window.pageYOffset?window.pageYOffset:s.scrollTop,l=e.changedTouches;return o=l?(r=l[0].pageX-i.left-a,l[0].pageY-i.top-c):(r=e.pageX-i.left-a,e.pageY-i.top-c),{x:r/(t.clientWidth/(t.width||t.clientWidth)*n),y:o/(t.clientHeight/(t.height||t.clientHeight)*n)}}},{"../core/Common":14}],20:[function(e,t,n){var a={};t.exports=a;var c=e("./Common");a._registry={},a.register=function(e){if(a.isPlugin(e)||c.warn("Plugin.register:",a.toString(e),"does not implement all required fields."),e.name in a._registry){var t=a._registry[e.name],n=a.versionParse(e.version).number,r=a.versionParse(t.version).number;r<n?(c.warn("Plugin.register:",a.toString(t),"was upgraded to",a.toString(e)),a._registry[e.name]=e):n<r?c.warn("Plugin.register:",a.toString(t),"can not be downgraded to",a.toString(e)):e!==t&&c.warn("Plugin.register:",a.toString(e),"is already registered to different plugin object")}else a._registry[e.name]=e;return e},a.resolve=function(e){return a._registry[a.dependencyParse(e).name]},a.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},a.isPlugin=function(e){return e&&e.name&&e.version&&e.install},a.isUsed=function(e,t){return-1<e.used.indexOf(t)},a.isFor=function(e,t){var n=e.for&&a.dependencyParse(e.for);return!e.for||t.name===n.name&&a.versionSatisfies(t.version,n.range)},a.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=a.dependencies(e),r=c.topologicalSort(n),o=[],i=0;i<r.length;i+=1)if(r[i]!==e.name){var s=a.resolve(r[i]);s?a.isUsed(e,s.name)||(a.isFor(s,e)||(c.warn("Plugin.use:",a.toString(s),"is for",s.for,"but installed on",a.toString(e)+"."),s._warned=!0),s.install?s.install(e):(c.warn("Plugin.use:",a.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(o.push("🔶 "+a.toString(s)),delete s._warned):o.push("✅ "+a.toString(s)),e.used.push(s.name)):o.push("❌ "+r[i])}0<o.length&&c.info(o.join("  "))}else c.warn("Plugin.use:",a.toString(e),"does not specify any dependencies to install.")},a.dependencies=function(r,e){var o=a.dependencyParse(r),t=o.name;if(!(t in(e=e||{}))){r=a.resolve(r)||r,e[t]=c.map(r.uses||[],function(e){a.isPlugin(e)&&a.register(e);var t=a.dependencyParse(e),n=a.resolve(e);return n&&!a.versionSatisfies(n.version,t.range)?(c.warn("Plugin.dependencies:",a.toString(n),"does not satisfy",a.toString(t),"used by",a.toString(o)+"."),n._warned=!0,r._warned=!0):n||(c.warn("Plugin.dependencies:",a.toString(e),"used by",a.toString(o),"could not be resolved."),r._warned=!0),t.name});for(var n=0;n<e[t].length;n+=1)a.dependencies(e[t][n],e);return e}},a.dependencyParse=function(e){return c.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||c.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},a.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||c.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=e.split("-");e=t[0];var n=isNaN(Number(e[0])),r=n?e.substr(1):e,o=c.map(r.split("."),function(e){return Number(e)});return{isRange:n,version:r,range:e,operator:n?e[0]:"",parts:o,prerelease:t[1],number:1e8*o[0]+1e4*o[1]+o[2]}},a.versionSatisfies=function(e,t){t=t||"*";var n=a.versionParse(t),r=n.parts,o=a.versionParse(e),i=o.parts;if(n.isRange){if("*"===n.operator||"*"===e)return!0;if("~"===n.operator)return i[0]===r[0]&&i[1]===r[1]&&i[2]>=r[2];if("^"===n.operator)return 0<r[0]?i[0]===r[0]&&o.number>=n.number:0<r[1]?i[1]===r[1]&&i[2]>=r[2]:i[2]===r[2]}return e===t||"*"===e}},{"./Common":14}],21:[function(e,t,n){var i={};t.exports=i;var a=e("./Events"),c=e("./Engine"),r=e("./Common");!function(){var o,t,n;("undefined"!=typeof window&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o)||(o=function(e){n=setTimeout(function(){e(r.now())},1e3/60)},t=function(){clearTimeout(n)});i.create=function(e){var t=r.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},i.run=function(n,r){return void 0!==n.positionIterations&&(r=n,n=i.create()),function e(t){n.frameRequestId=o(e),t&&n.enabled&&i.tick(n,r,t)}(),n},i.tick=function(e,t,n){var r,o=t.timing,i=1,s={timestamp:o.timestamp};a.trigger(e,"beforeTick",s),a.trigger(t,"beforeTick",s),e.isFixed?r=e.delta:(r=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(r),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),i=(r=(r=(r=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:r)>e.deltaMax?e.deltaMax:r)/e.delta,e.delta=r),0!==e.timeScalePrev&&(i*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(i=0),e.timeScalePrev=o.timeScale,e.correction=i,e.frameCounter+=1,1e3<=n-e.counterTimestamp&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),a.trigger(e,"tick",s),a.trigger(t,"tick",s),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),a.trigger(e,"beforeUpdate",s),c.update(t,r,i),a.trigger(e,"afterUpdate",s),t.render&&t.render.controller&&(a.trigger(e,"beforeRender",s),a.trigger(t,"beforeRender",s),t.render.controller.world(t.render),a.trigger(e,"afterRender",s),a.trigger(t,"afterRender",s)),a.trigger(e,"afterTick",s),a.trigger(t,"afterTick",s)},i.stop=function(e){t(e.frameRequestId)},i.start=function(e,t){i.run(e,t)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,n){var u={};t.exports=u;var r=e("./Events");u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var o=e[r],i=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var s=Math.min(o.motion,i),a=Math.max(o.motion,i);o.motion=u._minBias*s+(1-u._minBias)*a,0<o.sleepThreshold&&o.motion<u._motionSleepThreshold*n?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&u.set(o,!0)):0<o.sleepCounter&&(o.sleepCounter-=1)}else u.set(o,!1)}},u.afterCollisions=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var o=e[r];if(o.isActive){var i=o.collision,s=i.bodyA.parent,a=i.bodyB.parent;if(!(s.isSleeping&&a.isSleeping||s.isStatic||a.isStatic)&&(s.isSleeping||a.isSleeping)){var c=s.isSleeping&&!s.isStatic?s:a,l=c===s?a:s;!c.isStatic&&l.motion>u._motionWakeThreshold*n&&u.set(c,!1)}}}},u.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&r.trigger(e,"sleepEnd"))}},{"./Events":16}],23:[function(e,t,n){var h={};t.exports=h;var S,A=e("../geometry/Vertices"),E=e("../core/Common"),B=e("../body/Body"),R=e("../geometry/Bounds"),P=e("../geometry/Vector");h.rectangle=function(e,t,n,r,o){o=o||{};var i={label:"Rectangle Body",position:{x:e,y:t},vertices:A.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(o.chamfer){var s=o.chamfer;i.vertices=A.chamfer(i.vertices,s.radius,s.quality,s.qualityMin,s.qualityMax),delete o.chamfer}return B.create(E.extend({},i,o))},h.trapezoid=function(e,t,n,r,o,i){i=i||{};var s,a=n*(o*=.5),c=a+(1-2*o)*n,l=c+a;s=o<.5?"L 0 0 L "+a+" "+-r+" L "+c+" "+-r+" L "+l+" 0":"L 0 0 L "+c+" "+-r+" L "+l+" 0";var u={label:"Trapezoid Body",position:{x:e,y:t},vertices:A.fromPath(s)};if(i.chamfer){var f=i.chamfer;u.vertices=A.chamfer(u.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete i.chamfer}return B.create(E.extend({},u,i))},h.circle=function(e,t,n,r,o){r=r||{};var i={label:"Circle Body",circleRadius:n};o=o||25;var s=Math.ceil(Math.max(10,Math.min(o,n)));return s%2==1&&(s+=1),h.polygon(e,t,s,n,E.extend({},i,r))},h.polygon=function(e,t,n,r,o){if(o=o||{},n<3)return h.circle(e,t,r,o);for(var i=2*Math.PI/n,s="",a=.5*i,c=0;c<n;c+=1){var l=a+c*i,u=Math.cos(l)*r,f=Math.sin(l)*r;s+="L "+u.toFixed(3)+" "+f.toFixed(3)+" "}var d={label:"Polygon Body",position:{x:e,y:t},vertices:A.fromPath(s)};if(o.chamfer){var p=o.chamfer;d.vertices=A.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete o.chamfer}return B.create(E.extend({},d,o))},h.fromVertices=function(e,t,n,r,o,i,s){var a,c,l,u,f,d,p,h,y;for(S||(S=E._requireGlobal("decomp","poly-decomp")),r=r||{},c=[],o=void 0!==o&&o,i=void 0!==i?i:.01,s=void 0!==s?s:10,S||E.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),E.isArray(n[0])||(n=[n]),h=0;h<n.length;h+=1)if(u=n[h],(l=A.isConvex(u))||!S)u=l?A.clockwiseSort(u):A.hull(u),c.push({position:{x:e,y:t},vertices:u});else{var g=u.map(function(e){return[e.x,e.y]});S.makeCCW(g),!1!==i&&S.removeCollinearPoints(g,i);var m=S.quickDecomp(g);for(f=0;f<m.length;f++){var v=m[f].map(function(e){return{x:e[0],y:e[1]}});0<s&&A.area(v)<s||c.push({position:A.centre(v),vertices:v})}}for(f=0;f<c.length;f++)c[f]=B.create(E.extend(c[f],r));if(o)for(f=0;f<c.length;f++){var b=c[f];for(d=f+1;d<c.length;d++){var w=c[d];if(R.overlaps(b.bounds,w.bounds)){var x=b.vertices,C=w.vertices;for(p=0;p<b.vertices.length;p++)for(y=0;y<w.vertices.length;y++){var _=P.magnitudeSquared(P.sub(x[(p+1)%x.length],C[y])),k=P.magnitudeSquared(P.sub(x[p],C[(y+1)%C.length]));_<5&&k<5&&(x[p].isInternal=!0,C[y].isInternal=!0)}}}}return 1<c.length?(a=B.create(E.extend({parts:c.slice(0)},r)),B.setPosition(a,{x:e,y:t}),a):c[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,n){var p={};t.exports=p;var v=e("../body/Composite"),y=e("../constraint/Constraint"),g=e("../core/Common"),b=e("../body/Body"),h=e("./Bodies");p.stack=function(e,t,n,r,o,i,s){for(var a,c=v.create({label:"Stack"}),l=e,u=t,f=0,d=0;d<r;d++){for(var p=0,h=0;h<n;h++){var y=s(l,u,h,d,a,f);if(y){var g=y.bounds.max.y-y.bounds.min.y,m=y.bounds.max.x-y.bounds.min.x;p<g&&(p=g),b.translate(y,{x:.5*m,y:.5*g}),l=y.bounds.max.x+o,v.addBody(c,y),a=y,f+=1}else l+=o}u+=p+i,l=e}return c},p.chain=function(e,t,n,r,o,i){for(var s=e.bodies,a=1;a<s.length;a++){var c=s[a-1],l=s[a],u=c.bounds.max.y-c.bounds.min.y,f=c.bounds.max.x-c.bounds.min.x,d=l.bounds.max.y-l.bounds.min.y,p={bodyA:c,pointA:{x:f*t,y:u*n},bodyB:l,pointB:{x:(l.bounds.max.x-l.bounds.min.x)*r,y:d*o}},h=g.extend(p,i);v.addConstraint(e,y.create(h))}return e.label+=" Chain",e},p.mesh=function(e,t,n,r,o){var i,s,a,c,l,u=e.bodies;for(i=0;i<n;i++){for(s=1;s<t;s++)a=u[s-1+i*t],c=u[s+i*t],v.addConstraint(e,y.create(g.extend({bodyA:a,bodyB:c},o)));if(0<i)for(s=0;s<t;s++)a=u[s+(i-1)*t],c=u[s+i*t],v.addConstraint(e,y.create(g.extend({bodyA:a,bodyB:c},o))),r&&0<s&&(l=u[s-1+(i-1)*t],v.addConstraint(e,y.create(g.extend({bodyA:l,bodyB:c},o)))),r&&s<t-1&&(l=u[s+1+(i-1)*t],v.addConstraint(e,y.create(g.extend({bodyA:l,bodyB:c},o))))}return e.label+=" Mesh",e},p.pyramid=function(c,e,l,u,f,t,d){return p.stack(c,e,l,u,f,t,function(e,t,n,r,o,i){var s=Math.min(u,Math.ceil(l/2)),a=o?o.bounds.max.x-o.bounds.min.x:0;if(!(s<r||n<(r=s-r)||l-1-r<n))return 1===i&&b.translate(o,{x:(n+(l%2==1?1:-1))*a,y:0}),d(c+(o?n*a:0)+n*f,t,n,r,o,i)})},p.newtonsCradle=function(e,t,n,r,o){for(var i=v.create({label:"Newtons Cradle"}),s=0;s<n;s++){var a=h.circle(e+s*(1.9*r),t+o,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=y.create({pointA:{x:e+s*(1.9*r),y:t},bodyB:a});v.addBody(i,a),v.addConstraint(i,c)}return i},p.car=function(e,t,n,r,o){var i=b.nextGroup(!0),s=.5*-n+20,a=.5*n-20,c=v.create({label:"Car"}),l=h.rectangle(e,t,n,r,{collisionFilter:{group:i},chamfer:{radius:.5*r},density:2e-4}),u=h.circle(e+s,t+0,o,{collisionFilter:{group:i},friction:.8}),f=h.circle(e+a,t+0,o,{collisionFilter:{group:i},friction:.8}),d=y.create({bodyB:l,pointB:{x:s,y:0},bodyA:u,stiffness:1,length:0}),p=y.create({bodyB:l,pointB:{x:a,y:0},bodyA:f,stiffness:1,length:0});return v.addBody(c,l),v.addBody(c,u),v.addBody(c,f),v.addConstraint(c,d),v.addConstraint(c,p),c},p.softBody=function(e,t,n,r,o,i,s,a,c,l){c=g.extend({inertia:1/0},c),l=g.extend({stiffness:.2,render:{type:"line",anchors:!1}},l);var u=p.stack(e,t,n,r,o,i,function(e,t){return h.circle(e,t,a,c)});return p.mesh(u,n,r,s,l),u.label="Soft Body",u}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,n){var r={};t.exports=r;var s=e("../geometry/Vector"),a=e("../core/Common");r.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var r=(n+1)%e.length,o=s.normalise({x:e[r].y-e[n].y,y:e[n].x-e[r].x}),i=0===o.y?1/0:o.x/o.y;t[i=i.toFixed(3).toString()]=o}return a.values(t)},r.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),r=Math.sin(t),o=0;o<e.length;o++){var i,s=e[o];i=s.x*n-s.y*r,s.y=s.x*r+s.y*n,s.x=i}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,n){var r={};(t.exports=r).create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(t,e),t},r.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var o=t[r];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(0<n.x?e.max.x+=n.x:e.min.x+=n.x,0<n.y?e.max.y+=n.y:e.min.y+=n.y)},r.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},r.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},r.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},r.shift=function(e,t){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+r}},{}],27:[function(e,t,n){var b={};t.exports=b;e("../geometry/Bounds");var w=e("../core/Common");b.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||w.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,r,o,i,s,a,c,l,u,f,d,p=[],h=0,y=0,g=0;t=t||15;var m=function(e,t,n){var r=n%2==1&&1<n;if(!u||e!=u.x||t!=u.y){d=u&&r?(f=u.x,u.y):f=0;var o={x:f+e,y:d+t};!r&&u||(u=o),p.push(o),y=f+e,g=d+t}},v=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":y=e.x,g=e.y;break;case"H":y=e.x;break;case"V":g=e.y}m(y,g,e.pathSegType)}};for(b._svgPathToAbsolute(e),o=e.getTotalLength(),a=[],n=0;n<e.pathSegList.numberOfItems;n+=1)a.push(e.pathSegList.getItem(n));for(c=a.concat();h<o;){if((s=a[e.getPathSegAtLength(h)])!=l){for(;c.length&&c[0]!=s;)v(c.shift());l=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=e.getPointAtLength(h),m(i.x,i.y,0)}h+=t}for(n=0,r=c.length;n<r;++n)v(c[n]);return p},b._svgPathToAbsolute=function(e){for(var t,n,r,o,i,s,a=e.pathSegList,c=0,l=0,u=a.numberOfItems,f=0;f<u;++f){var d=a.getItem(f),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(c=d.x),"y"in d&&(l=d.y);else switch("x1"in d&&(r=c+d.x1),"x2"in d&&(i=c+d.x2),"y1"in d&&(o=l+d.y1),"y2"in d&&(s=l+d.y2),"x"in d&&(c+=d.x),"y"in d&&(l+=d.y),p){case"m":a.replaceItem(e.createSVGPathSegMovetoAbs(c,l),f);break;case"l":a.replaceItem(e.createSVGPathSegLinetoAbs(c,l),f);break;case"h":a.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(c),f);break;case"v":a.replaceItem(e.createSVGPathSegLinetoVerticalAbs(l),f);break;case"c":a.replaceItem(e.createSVGPathSegCurvetoCubicAbs(c,l,r,o,i,s),f);break;case"s":a.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(c,l,i,s),f);break;case"q":a.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(c,l,r,o),f);break;case"t":a.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(c,l),f);break;case"a":a.replaceItem(e.createSVGPathSegArcAbs(c,l,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),f);break;case"z":case"Z":c=t,l=n}"M"!=p&&"m"!=p||(t=c,n=l)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,n){var r={};(t.exports=r).create=function(e,t){return{x:e||0,y:t||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n||(n={});var i=e.x*r-e.y*o;return n.y=e.x*o+e.y*r,n.x=i,n},r.rotateAbout=function(e,t,n,r){var o=Math.cos(t),i=Math.sin(t);r||(r={});var s=n.x+((e.x-n.x)*o-(e.y-n.y)*i);return r.y=n.y+((e.x-n.x)*i+(e.y-n.y)*o),r.x=s,r},r.normalise=function(e){var t=r.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.cross=function(e,t){return e.x*t.y-e.y*t.x},r.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},r.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},r.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},r.mult=function(e,t){return{x:e.x*t,y:e.y*t}},r.div=function(e,t){return{x:e.x/t,y:e.y/t}},r.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},{}],29:[function(e,t,n){var a={};t.exports=a;var w=e("../geometry/Vector"),x=e("../core/Common");a.create=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i={x:o.x,y:o.y,index:r,body:t,isInternal:!1};n.push(i)}return n},a.fromPath=function(e,t){var r=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(e,t,n){r.push({x:parseFloat(t),y:parseFloat(n)})}),a.create(r,t)},a.centre=function(e){for(var t,n,r,o=a.area(e,!0),i={x:0,y:0},s=0;s<e.length;s++)r=(s+1)%e.length,t=w.cross(e[s],e[r]),n=w.mult(w.add(e[s],e[r]),t),i=w.add(i,n);return w.div(i,6*o)},a.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return w.div(t,e.length)},a.area=function(e,t){for(var n=0,r=e.length-1,o=0;o<e.length;o++)n+=(e[r].x-e[o].x)*(e[r].y+e[o].y),r=o;return t?n/2:Math.abs(n)/2},a.inertia=function(e,t){for(var n,r,o=0,i=0,s=e,a=0;a<s.length;a++)r=(a+1)%s.length,o+=(n=Math.abs(w.cross(s[r],s[a])))*(w.dot(s[r],s[r])+w.dot(s[r],s[a])+w.dot(s[a],s[a])),i+=n;return t/6*(o/i)},a.translate=function(e,t,n){var r;if(n)for(r=0;r<e.length;r++)e[r].x+=t.x*n,e[r].y+=t.y*n;else for(r=0;r<e.length;r++)e[r].x+=t.x,e[r].y+=t.y;return e},a.rotate=function(e,t,n){if(0!==t){for(var r=Math.cos(t),o=Math.sin(t),i=0;i<e.length;i++){var s=e[i],a=s.x-n.x,c=s.y-n.y;s.x=n.x+(a*r-c*o),s.y=n.y+(a*o+c*r)}return e}},a.contains=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=e[(n+1)%e.length];if(0<(t.x-r.x)*(o.y-r.y)+(t.y-r.y)*(r.x-o.x))return!1}return!0},a.scale=function(e,t,n,r){if(1===t&&1===n)return e;var o,i;r=r||a.centre(e);for(var s=0;s<e.length;s++)o=e[s],i=w.sub(o,r),e[s].x=r.x+i.x*t,e[s].y=r.y+i.y*n;return e},a.chamfer=function(e,t,n,r,o){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,r=r||2,o=o||14;for(var i=[],s=0;s<e.length;s++){var a=e[0<=s-1?s-1:e.length-1],c=e[s],l=e[(s+1)%e.length],u=t[s<t.length?s:t.length-1];if(0!==u){var f=w.normalise({x:c.y-a.y,y:a.x-c.x}),d=w.normalise({x:l.y-c.y,y:c.x-l.x}),p=Math.sqrt(2*Math.pow(u,2)),h=w.mult(x.clone(f),u),y=w.normalise(w.mult(w.add(f,d),.5)),g=w.sub(c,w.mult(y,p)),m=n;-1===n&&(m=1.75*Math.pow(u,.32)),(m=x.clamp(m,r,o))%2==1&&(m+=1);for(var v=Math.acos(w.dot(f,d))/m,b=0;b<m;b++)i.push(w.add(w.rotate(h,v*b),g))}else i.push(c)}return i},a.clockwiseSort=function(e){var n=a.mean(e);return e.sort(function(e,t){return w.angle(n,e)-w.angle(n,t)}),e},a.isConvex=function(e){var t,n,r,o,i=0,s=e.length;if(s<3)return null;for(t=0;t<s;t++)if(r=(t+2)%s,o=(e[n=(t+1)%s].x-e[t].x)*(e[r].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[r].x-e[n].x))<0?i|=1:0<o&&(i|=2),3===i)return!1;return 0!==i||null},a.hull=function(e){var t,n,r=[],o=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];2<=o.length&&w.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}for(n=e.length-1;0<=n;n-=1){for(t=e[n];2<=r.length&&w.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}return r.pop(),o.pop(),r.concat(o)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,n){var r=t.exports=e("../core/Matter");r.Body=e("../body/Body"),r.Composite=e("../body/Composite"),r.World=e("../body/World"),r.Contact=e("../collision/Contact"),r.Detector=e("../collision/Detector"),r.Grid=e("../collision/Grid"),r.Pairs=e("../collision/Pairs"),r.Pair=e("../collision/Pair"),r.Query=e("../collision/Query"),r.Resolver=e("../collision/Resolver"),r.SAT=e("../collision/SAT"),r.Constraint=e("../constraint/Constraint"),r.MouseConstraint=e("../constraint/MouseConstraint"),r.Common=e("../core/Common"),r.Engine=e("../core/Engine"),r.Events=e("../core/Events"),r.Mouse=e("../core/Mouse"),r.Runner=e("../core/Runner"),r.Sleeping=e("../core/Sleeping"),r.Plugin=e("../core/Plugin"),r.Bodies=e("../factory/Bodies"),r.Composites=e("../factory/Composites"),r.Axes=e("../geometry/Axes"),r.Bounds=e("../geometry/Bounds"),r.Svg=e("../geometry/Svg"),r.Vector=e("../geometry/Vector"),r.Vertices=e("../geometry/Vertices"),r.Render=e("../render/Render"),r.RenderPixi=e("../render/RenderPixi"),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,n){var w={};t.exports=w;var g=e("../core/Common"),x=e("../body/Composite"),C=e("../geometry/Bounds"),_=e("../core/Events"),k=e("../collision/Grid"),S=e("../geometry/Vector"),A=e("../core/Mouse");!function(){var r,t;"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(g.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),w.create=function(e){var t={controller:w,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=g.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||o(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},1!==n.options.pixelRatio&&w.setPixelRatio(n,n.options.pixelRatio),g.isElement(n.element)?n.element.appendChild(n.canvas):n.canvas.parentNode||g.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),n},w.run=function(n){!function e(t){n.frameRequestId=r(e),w.world(n)}()},w.stop=function(e){t(e.frameRequestId)},w.setPixelRatio=function(e,t){var n=e.options,r=e.canvas;"auto"===t&&(t=i(r)),n.pixelRatio=t,r.setAttribute("data-pixel-ratio",t),r.width=n.width*t,r.height=n.height*t,r.style.width=n.width+"px",r.style.height=n.height+"px",e.context.scale(t,t)},w.lookAt=function(e,t,n,r){r=void 0===r||r,t=g.isArray(t)?t:[t],n=n||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},i=0;i<t.length;i+=1){var s=t[i],a=s.bounds?s.bounds.min:s.min||s.position||s,c=s.bounds?s.bounds.max:s.max||s.position||s;a&&c&&(a.x<o.min.x&&(o.min.x=a.x),c.x>o.max.x&&(o.max.x=c.x),a.y<o.min.y&&(o.min.y=a.y),c.y>o.max.y&&(o.max.y=c.y))}var l=o.max.x-o.min.x+2*n.x,u=o.max.y-o.min.y+2*n.y,f=e.canvas.height,d=e.canvas.width/f,p=l/u,h=1,y=1;d<p?y=p/d:h=d/p,e.options.hasBounds=!0,e.bounds.min.x=o.min.x,e.bounds.max.x=o.min.x+l*h,e.bounds.min.y=o.min.y,e.bounds.max.y=o.min.y+u*y,r&&(e.bounds.min.x+=.5*l-l*h*.5,e.bounds.max.x+=.5*l-l*h*.5,e.bounds.min.y+=.5*u-u*y*.5,e.bounds.max.y+=.5*u-u*y*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(A.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),A.setOffset(e.mouse,e.bounds.min))},w.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,r=t/e.options.width,o=n/e.options.height;e.context.scale(1/r,1/o),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},w.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},w.world=function(e){var t,n=e.engine,r=n.world,o=e.canvas,i=e.context,s=e.options,a=x.allBodies(r),c=x.allConstraints(r),l=s.wireframes?s.wireframeBackground:s.background,u=[],f=[],d={timestamp:n.timing.timestamp};if(_.trigger(e,"beforeRender",d),e.currentBackground!==l&&b(e,l),i.globalCompositeOperation="source-in",i.fillStyle="transparent",i.fillRect(0,0,o.width,o.height),i.globalCompositeOperation="source-over",s.hasBounds){for(t=0;t<a.length;t++){var p=a[t];C.overlaps(p.bounds,e.bounds)&&u.push(p)}for(t=0;t<c.length;t++){var h=c[t],y=h.bodyA,g=h.bodyB,m=h.pointA,v=h.pointB;y&&(m=S.add(y.position,h.pointA)),g&&(v=S.add(g.position,h.pointB)),m&&v&&((C.contains(e.bounds,m)||C.contains(e.bounds,v))&&f.push(h))}w.startViewTransform(e),e.mouse&&(A.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),A.setOffset(e.mouse,e.bounds.min))}else f=c,u=a;!s.wireframes||n.enableSleeping&&s.showSleeping?w.bodies(e,u,i):(s.showConvexHulls&&w.bodyConvexHulls(e,u,i),w.bodyWireframes(e,u,i)),s.showBounds&&w.bodyBounds(e,u,i),(s.showAxes||s.showAngleIndicator)&&w.bodyAxes(e,u,i),s.showPositions&&w.bodyPositions(e,u,i),s.showVelocity&&w.bodyVelocity(e,u,i),s.showIds&&w.bodyIds(e,u,i),s.showSeparations&&w.separations(e,n.pairs.list,i),s.showCollisions&&w.collisions(e,n.pairs.list,i),s.showVertexNumbers&&w.vertexNumbers(e,u,i),s.showMousePosition&&w.mousePosition(e,e.mouse,i),w.constraints(f,i),s.showBroadphase&&n.broadphase.controller===k&&w.grid(e,n.broadphase,i),s.showDebug&&w.debug(e,i),s.hasBounds&&w.endViewTransform(e),_.trigger(e,"afterRender",d)},w.debug=function(e,t){var n=t,r=e.engine,o=r.world,i=r.metrics,s=e.options;x.allBodies(o);if(500<=r.timing.timestamp-(e.debugTimestamp||0)){var a="";i.timing&&(a+="fps: "+Math.round(i.timing.fps)+"    "),e.debugString=a,e.debugTimestamp=r.timing.timestamp}if(e.debugString){n.font="12px Arial",s.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var c=e.debugString.split("\n"),l=0;l<c.length;l++)n.fillText(c[l],50,50+18*l)}},w.constraints=function(e,t){for(var n=t,r=0;r<e.length;r++){var o=e[r];if(o.render.visible&&o.pointA&&o.pointB){var i,s,a=o.bodyA,c=o.bodyB;if(i=a?S.add(a.position,o.pointA):o.pointA,"pin"===o.render.type)n.beginPath(),n.arc(i.x,i.y,3,0,2*Math.PI),n.closePath();else{if(s=c?S.add(c.position,o.pointB):o.pointB,n.beginPath(),n.moveTo(i.x,i.y),"spring"===o.render.type)for(var l,u=S.sub(s,i),f=S.perp(S.normalise(u)),d=Math.ceil(g.clamp(o.length/5,12,20)),p=1;p<d;p+=1)l=p%2==0?1:-1,n.lineTo(i.x+u.x*(p/d)+f.x*l*4,i.y+u.y*(p/d)+f.y*l*4);n.lineTo(s.x,s.y)}o.render.lineWidth&&(n.lineWidth=o.render.lineWidth,n.strokeStyle=o.render.strokeStyle,n.stroke()),o.render.anchors&&(n.fillStyle=o.render.strokeStyle,n.beginPath(),n.arc(i.x,i.y,3,0,2*Math.PI),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},w.bodyShadows=function(e,t,n){for(var r=n,o=(e.engine,0);o<t.length;o++){var i=t[o];if(i.render.visible){if(i.circleRadius)r.beginPath(),r.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI),r.closePath();else{r.beginPath(),r.moveTo(i.vertices[0].x,i.vertices[0].y);for(var s=1;s<i.vertices.length;s++)r.lineTo(i.vertices[s].x,i.vertices[s].y);r.closePath()}var a=i.position.x-.5*e.options.width,c=i.position.y-.2*e.options.height,l=Math.abs(a)+Math.abs(c);r.shadowColor="rgba(0,0,0,0.15)",r.shadowOffsetX=.05*a,r.shadowOffsetY=.05*c,r.shadowBlur=1+12*Math.min(1,l/1e3),r.fill(),r.shadowColor=null,r.shadowOffsetX=null,r.shadowOffsetY=null,r.shadowBlur=null}}},w.bodies=function(e,t,n){var r,o,i,s,a=n,c=(e.engine,e.options),l=c.showInternalEdges||!c.wireframes;for(i=0;i<t.length;i++)if((r=t[i]).render.visible)for(s=1<r.parts.length?1:0;s<r.parts.length;s++)if((o=r.parts[s]).render.visible){if(c.showSleeping&&r.isSleeping?a.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(a.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!c.wireframes){var u=o.render.sprite,f=p(e,u.texture);a.translate(o.position.x,o.position.y),a.rotate(o.angle),a.drawImage(f,f.width*-u.xOffset*u.xScale,f.height*-u.yOffset*u.yScale,f.width*u.xScale,f.height*u.yScale),a.rotate(-o.angle),a.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)a.beginPath(),a.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(o.vertices[0].x,o.vertices[0].y);for(var d=1;d<o.vertices.length;d++)!o.vertices[d-1].isInternal||l?a.lineTo(o.vertices[d].x,o.vertices[d].y):a.moveTo(o.vertices[d].x,o.vertices[d].y),o.vertices[d].isInternal&&!l&&a.moveTo(o.vertices[(d+1)%o.vertices.length].x,o.vertices[(d+1)%o.vertices.length].y);a.lineTo(o.vertices[0].x,o.vertices[0].y),a.closePath()}c.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=o.render.fillStyle,o.render.lineWidth&&(a.lineWidth=o.render.lineWidth,a.strokeStyle=o.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},w.bodyWireframes=function(e,t,n){var r,o,i,s,a,c=n,l=e.options.showInternalEdges;for(c.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(a=1<r.parts.length?1:0;a<r.parts.length;a++){for(o=r.parts[a],c.moveTo(o.vertices[0].x,o.vertices[0].y),s=1;s<o.vertices.length;s++)!o.vertices[s-1].isInternal||l?c.lineTo(o.vertices[s].x,o.vertices[s].y):c.moveTo(o.vertices[s].x,o.vertices[s].y),o.vertices[s].isInternal&&!l&&c.moveTo(o.vertices[(s+1)%o.vertices.length].x,o.vertices[(s+1)%o.vertices.length].y);c.lineTo(o.vertices[0].x,o.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},w.bodyConvexHulls=function(e,t,n){var r,o,i,s=n;for(s.beginPath(),o=0;o<t.length;o++)if((r=t[o]).render.visible&&1!==r.parts.length){for(s.moveTo(r.vertices[0].x,r.vertices[0].y),i=1;i<r.vertices.length;i++)s.lineTo(r.vertices[i].x,r.vertices[i].y);s.lineTo(r.vertices[0].x,r.vertices[0].y)}s.lineWidth=1,s.strokeStyle="rgba(255,255,255,0.2)",s.stroke()},w.vertexNumbers=function(e,t,n){var r,o,i,s=n;for(r=0;r<t.length;r++){var a=t[r].parts;for(i=1<a.length?1:0;i<a.length;i++){var c=a[i];for(o=0;o<c.vertices.length;o++)s.fillStyle="rgba(255,255,255,0.2)",s.fillText(r+"_"+o,c.position.x+.8*(c.vertices[o].x-c.position.x),c.position.y+.8*(c.vertices[o].y-c.position.y))}}},w.mousePosition=function(e,t,n){var r=n;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},w.bodyBounds=function(e,t,n){var r=n,o=(e.engine,e.options);r.beginPath();for(var i=0;i<t.length;i++){if(t[i].render.visible)for(var s=t[i].parts,a=1<s.length?1:0;a<s.length;a++){var c=s[a];r.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}o.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},w.bodyAxes=function(e,t,n){var r,o,i,s,a=n,c=(e.engine,e.options);for(a.beginPath(),o=0;o<t.length;o++){var l=t[o],u=l.parts;if(l.render.visible)if(c.showAxes)for(i=1<u.length?1:0;i<u.length;i++)for(r=u[i],s=0;s<r.axes.length;s++){var f=r.axes[s];a.moveTo(r.position.x,r.position.y),a.lineTo(r.position.x+20*f.x,r.position.y+20*f.y)}else for(i=1<u.length?1:0;i<u.length;i++)for(r=u[i],s=0;s<r.axes.length;s++)a.moveTo(r.position.x,r.position.y),a.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}c.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},w.bodyPositions=function(e,t,n){var r,o,i,s,a=n,c=(e.engine,e.options);for(a.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(s=0;s<r.parts.length;s++)o=r.parts[s],a.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),a.closePath();for(c.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),i=0;i<t.length;i++)(r=t[i]).render.visible&&(a.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},w.bodyVelocity=function(e,t,n){var r=n;r.beginPath();for(var o=0;o<t.length;o++){var i=t[o];i.render.visible&&(r.moveTo(i.position.x,i.position.y),r.lineTo(i.position.x+2*(i.position.x-i.positionPrev.x),i.position.y+2*(i.position.y-i.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},w.bodyIds=function(e,t,n){var r,o,i=n;for(r=0;r<t.length;r++)if(t[r].render.visible){var s=t[r].parts;for(o=1<s.length?1:0;o<s.length;o++){var a=s[o];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(a.id,a.position.x+10,a.position.y-10)}}},w.collisions=function(e,t,n){var r,o,i,s,a=n,c=e.options;for(a.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive)for(o=r.collision,s=0;s<r.activeContacts.length;s++){var l=r.activeContacts[s].vertex;a.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(c.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive&&(o=r.collision,0<r.activeContacts.length)){var u=r.activeContacts[0].vertex.x,f=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(u=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,f=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?a.moveTo(u-8*o.normal.x,f-8*o.normal.y):a.moveTo(u+8*o.normal.x,f+8*o.normal.y),a.lineTo(u,f)}c.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},w.separations=function(e,t,n){var r,o,i,s,a,c=n,l=e.options;for(c.beginPath(),a=0;a<t.length;a++)if((r=t[a]).isActive){i=(o=r.collision).bodyA;var u=1;(s=o.bodyB).isStatic||i.isStatic||(u=.5),s.isStatic&&(u=0),c.moveTo(s.position.x,s.position.y),c.lineTo(s.position.x-o.penetration.x*u,s.position.y-o.penetration.y*u),u=1,s.isStatic||i.isStatic||(u=.5),i.isStatic&&(u=0),c.moveTo(i.position.x,i.position.y),c.lineTo(i.position.x+o.penetration.x*u,i.position.y+o.penetration.y*u)}l.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},w.grid=function(e,t,n){var r=n;e.options.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var o=g.keys(t.buckets),i=0;i<o.length;i++){var s=o[i];if(!(t.buckets[s].length<2)){var a=s.split(/C|R/);r.rect(.5+parseInt(a[1],10)*t.bucketWidth,.5+parseInt(a[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}r.lineWidth=1,r.stroke()},w.inspector=function(e,t){e.engine;var n,r=e.selected,o=e.render,i=o.options;if(i.hasBounds){var s=o.bounds.max.x-o.bounds.min.x,a=o.bounds.max.y-o.bounds.min.y,c=s/o.options.width,l=a/o.options.height;t.scale(1/c,1/l),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var u=0;u<r.length;u++){var f=r[u].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),f.type){case"body":n=f.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var d=f.pointA;f.bodyA&&(d=f.pointB),t.beginPath(),t.arc(d.x,d.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),i.hasBounds&&t.setTransform(1,0,0,1,0,0)};var o=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},i=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},p=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},b=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,n){var b={};t.exports=b;var w=e("../geometry/Bounds"),x=e("../body/Composite"),p=e("../core/Common"),o=e("../core/Events"),C=e("../geometry/Vector");!function(){var r,t;"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(p.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),b.create=function(e){p.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:b,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=p.extend(t,e),r=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:r,antialias:!0,backgroundColor:e.background},n.mouse=e.mouse,n.engine=e.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},o.on(n.engine,"beforeUpdate",function(){b.clear(n)}),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),p.isElement(n.element)?n.element.appendChild(n.canvas):p.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},b.run=function(n){!function e(t){n.frameRequestId=r(e),b.world(n)}()},b.stop=function(e){t(e.frameRequestId)},b.clear=function(e){for(var t=e.container,n=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var r=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},(e.sprites["bg-0"]=r)&&t.addChildAt(r,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},b.setBackground=function(e,t){if(e.currentBackground!==t){var n=t.indexOf&&-1!==t.indexOf("#"),r=e.sprites["bg-0"];if(n){var o=p.colorToNumber(t);e.renderer.backgroundColor=o,r&&e.container.removeChild(r)}else if(!r){var i=s(e,t);(r=e.sprites["bg-0"]=new PIXI.Sprite(i)).position.x=0,r.position.y=0,e.container.addChildAt(r,0)}e.currentBackground=t}},b.world=function(e){var t,n=e.engine.world,r=e.renderer,o=e.container,i=e.options,s=x.allBodies(n),a=x.allConstraints(n),c=[];i.wireframes?b.setBackground(e,i.wireframeBackground):b.setBackground(e,i.background);var l=e.bounds.max.x-e.bounds.min.x,u=e.bounds.max.y-e.bounds.min.y,f=l/e.options.width,d=u/e.options.height;if(i.hasBounds){for(t=0;t<s.length;t++){var p=s[t];p.render.sprite.visible=w.overlaps(p.bounds,e.bounds)}for(t=0;t<a.length;t++){var h=a[t],y=h.bodyA,g=h.bodyB,m=h.pointA,v=h.pointB;y&&(m=C.add(y.position,h.pointA)),g&&(v=C.add(g.position,h.pointB)),m&&v&&((w.contains(e.bounds,m)||w.contains(e.bounds,v))&&c.push(h))}o.scale.set(1/f,1/d),o.position.set(-e.bounds.min.x*(1/f),-e.bounds.min.y*(1/d))}else c=a;for(t=0;t<s.length;t++)b.body(e,s[t]);for(t=0;t<c.length;t++)b.constraint(e,c[t]);r.render(o)},b.constraint=function(e,t){e.engine;var n=t.bodyA,r=t.bodyB,o=t.pointA,i=t.pointB,s=e.container,a=t.render,c="c-"+t.id,l=e.primitives[c];l||(l=e.primitives[c]=new PIXI.Graphics),a.visible&&t.pointA&&t.pointB?(-1===p.indexOf(s.children,l)&&s.addChild(l),l.clear(),l.beginFill(0,0),l.lineStyle(a.lineWidth,p.colorToNumber(a.strokeStyle),1),n?l.moveTo(n.position.x+o.x,n.position.y+o.y):l.moveTo(o.x,o.y),r?l.lineTo(r.position.x+i.x,r.position.y+i.y):l.lineTo(i.x,i.y),l.endFill()):l.clear()},b.body=function(e,t){e.engine;var n=t.render;if(n.visible)if(n.sprite&&n.sprite.texture){var r="b-"+t.id,o=e.sprites[r],i=e.spriteContainer;o||(o=e.sprites[r]=l(e,t)),-1===p.indexOf(i.children,o)&&i.addChild(o),o.position.x=t.position.x,o.position.y=t.position.y,o.rotation=t.angle,o.scale.x=n.sprite.xScale||1,o.scale.y=n.sprite.yScale||1}else{var s="b-"+t.id,a=e.primitives[s],c=e.container;a||((a=e.primitives[s]=u(e,t)).initialAngle=t.angle),-1===p.indexOf(c.children,a)&&c.addChild(a),a.position.x=t.position.x,a.position.y=t.position.y,a.rotation=t.angle-a.initialAngle}};var l=function(e,t){var n=t.render.sprite.texture,r=s(e,n),o=new PIXI.Sprite(r);return o.anchor.x=t.render.sprite.xOffset,o.anchor.y=t.render.sprite.yOffset,o},u=function(e,t){var n,r=t.render,o=e.options,i=new PIXI.Graphics,s=p.colorToNumber(r.fillStyle),a=p.colorToNumber(r.strokeStyle),c=p.colorToNumber(r.strokeStyle),l=p.colorToNumber("#bbb"),u=p.colorToNumber("#CD5C5C");i.clear();for(var f=1<t.parts.length?1:0;f<t.parts.length;f++){n=t.parts[f],o.wireframes?(i.beginFill(0,0),i.lineStyle(1,l,1)):(i.beginFill(s,1),i.lineStyle(r.lineWidth,a,1)),i.moveTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y);for(var d=1;d<n.vertices.length;d++)i.lineTo(n.vertices[d].x-t.position.x,n.vertices[d].y-t.position.y);i.lineTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y),i.endFill(),(o.showAngleIndicator||o.showAxes)&&(i.beginFill(0,0),o.wireframes?i.lineStyle(1,u,1):i.lineStyle(1,c),i.moveTo(n.position.x-t.position.x,n.position.y-t.position.y),i.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2-t.position.x,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2-t.position.y),i.endFill())}return i},s=function(e,t){var n=e.textures[t];return n||(n=e.textures[t]=PIXI.Texture.fromImage(t)),n}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(e,t,n){var o=36e5,i=864e5;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*i;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?s(n=e,i,"day")||s(n,o,"hour")||s(n,6e4,"minute")||s(n,1e3,"second")||n+" ms":function(e){if(i<=e)return Math.round(e/i)+"d";if(o<=e)return Math.round(e/o)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],44:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},{}],45:[function(e,t,n){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,c=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var o=a.exec(e||""),i={},s=14;s--;)i[c[s]]=o[s]||"";return-1!=n&&-1!=r&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i}},{}],46:[function(e,t,n){var r,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,u=[],f=!1,d=-1;function p(){f&&l&&(f=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!f){var e=c(p);f=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,f=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new y(e,t)),1!==u.length||f||c(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],47:[function(e,t,n){(function(o,i){"use strict";var s=e("safe-buffer").Buffer,a=i.crypto||i.msCrypto;a&&a.getRandomValues?t.exports=function(e,t){if(65536<e)throw new Error("requested too many random bytes");var n=new i.Uint8Array(e);0<e&&a.getRandomValues(n);var r=s.from(n.buffer);return"function"!=typeof t?r:o.nextTick(function(){t(null,r)})}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:46,"safe-buffer":58}],48:[function(e,t,n){"use strict";var r=e("process-nextick-args"),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=f;var i=e("core-util-is");i.inherits=e("inherits");var s=e("./_stream_readable"),a=e("./_stream_writable");i.inherits(f,s);for(var c=o(a.prototype),l=0;l<c.length;l++){var u=c[l];f.prototype[u]||(f.prototype[u]=a.prototype[u])}function f(e){if(!(this instanceof f))return new f(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":50,"./_stream_writable":52,"core-util-is":12,inherits:34,"process-nextick-args":56}],49:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_transform"),o=e("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}o.inherits=e("inherits"),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":51,"core-util-is":12,inherits:34}],50:[function(F,I,e){(function(g,e){"use strict";var m=F("process-nextick-args");I.exports=d;var s,v=F("isarray");d.ReadableState=i;F("events").EventEmitter;var b=function(e,t){return e.listeners(t).length},o=F("./internal/streams/stream"),l=F("safe-buffer").Buffer,u=e.Uint8Array||function(){};var t=F("core-util-is");t.inherits=F("inherits");var n=F("util"),w=void 0;w=n&&n.debuglog?n.debuglog("stream"):function(){};var a,c=F("./internal/streams/BufferList"),r=F("./internal/streams/destroy");t.inherits(d,o);var f=["error","close","destroy","pause","resume"];function i(e,t){e=e||{};var n=t instanceof(s=s||F("./_stream_duplex"));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a||(a=F("string_decoder/").StringDecoder),this.decoder=new a(e.encoding),this.encoding=e.encoding)}function d(e){if(s=s||F("./_stream_duplex"),!(this instanceof d))return new d(e);this._readableState=new i(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function p(e,t,n,r,o){var i,s,a,c=e._readableState;null===t?(c.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,C(e)}(e,c)):(o||(i=function(e,t){var n;r=t,l.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(c,t)),i?e.emit("error",i):c.objectMode||t&&0<t.length?("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===l.prototype||(s=t,t=l.from(s)),r?c.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):h(e,c,t,!0):c.ended?e.emit("error",new Error("stream.push() after EOF")):(c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?h(e,c,t,!1):k(e,c)):h(e,c,t,!1))):r||(c.reading=!1));return!(a=c).ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),k(e,t)}Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),d.prototype.destroy=r.destroy,d.prototype._undestroy=r.undestroy,d.prototype._destroy=function(e,t){this.push(null),t(e)},d.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),p(this,e,t,!1,n)},d.prototype.unshift=function(e){return p(this,e,null,!0,!1)},d.prototype.isPaused=function(){return!1===this._readableState.flowing},d.prototype.setEncoding=function(e){return a||(a=F("string_decoder/").StringDecoder),this._readableState.decoder=new a(e),this._readableState.encoding=e,this};var y=8388608;function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=(y<=(n=e)?n=y:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function C(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(w("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?m.nextTick(_,e):_(e))}function _(e){w("emit readable"),e.emit("readable"),B(e)}function k(e,t){t.readingMore||(t.readingMore=!0,m.nextTick(S,e,t))}function S(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(w("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function A(e){w("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(w("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(w("flow",t.flowing);t.flowing&&null!==e.read(););}function R(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var i=n.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=i.slice(s);break}++r}return t.length-=r,o}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,s),0===(e-=s)){s===i.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=i.slice(s);break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function P(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,m.nextTick(T,t,e))}function T(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function M(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}d.prototype.read=function(e){w("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return w("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):C(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&P(this),null;var r,o=t.needReadable;return w("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&w("length less than watermark",o=!0),t.ended||t.reading?w("reading or ended",o=!1):o&&(w("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=0<e?R(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&P(this)),null!==r&&this.emit("data",r),r},d.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},d.prototype.pipe=function(n,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=n;break;case 1:o.pipes=[o.pipes,n];break;default:o.pipes.push(n)}o.pipesCount+=1,w("pipe count=%d opts=%j",o.pipesCount,e);var t=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?s:y;function i(e,t){w("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,w("cleanup"),n.removeListener("close",p),n.removeListener("finish",h),n.removeListener("drain",c),n.removeListener("error",d),n.removeListener("unpipe",i),r.removeListener("end",s),r.removeListener("end",y),r.removeListener("data",f),l=!0,!o.awaitDrain||n._writableState&&!n._writableState.needDrain||c())}function s(){w("onend"),n.end()}o.endEmitted?m.nextTick(t):r.once("end",t),n.on("unpipe",i);var a,c=(a=r,function(){var e=a._readableState;w("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&b(a,"data")&&(e.flowing=!0,B(a))});n.on("drain",c);var l=!1;var u=!1;function f(e){w("ondata"),(u=!1)!==n.write(e)||u||((1===o.pipesCount&&o.pipes===n||1<o.pipesCount&&-1!==M(o.pipes,n))&&!l&&(w("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,u=!0),r.pause())}function d(e){w("onerror",e),y(),n.removeListener("error",d),0===b(n,"error")&&n.emit("error",e)}function p(){n.removeListener("finish",h),y()}function h(){w("onfinish"),n.removeListener("close",p),y()}function y(){w("unpipe"),r.unpipe(n)}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?v(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",d),n.once("close",p),n.once("finish",h),n.emit("pipe",r),o.flowing||(w("pipe resume"),r.resume()),n},d.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var s=M(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},d.prototype.addListener=d.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&C(this):m.nextTick(A,this))}return n},d.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(w("resume"),n.flowing=!0,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,m.nextTick(E,e,t))),this},d.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(t){var n=this,r=this._readableState,o=!1;for(var e in t.on("end",function(){if(w("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){(w("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e)||(r.objectMode||e&&e.length)&&(n.push(e)||(o=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var i=0;i<f.length;i++)t.on(f[i],this.emit.bind(this,f[i]));return this._read=function(e){w("wrapped _read",e),o&&(o=!1,t.resume())},this},Object.defineProperty(d.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),d._fromList=R}).call(this,F("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":48,"./internal/streams/BufferList":53,"./internal/streams/destroy":54,"./internal/streams/stream":55,_process:46,"core-util-is":12,events:27,inherits:34,isarray:36,"process-nextick-args":56,"safe-buffer":58,"string_decoder/":76,util:7}],51:[function(e,t,n){"use strict";t.exports=i;var r=e("./_stream_duplex"),o=e("core-util-is");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){a(n,e,t)}):a(this,null,null)}function a(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=e("inherits"),o.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{"./_stream_duplex":48,"core-util-is":12,inherits:34}],52:[function(_,k,e){(function(e,t,n){"use strict";var m=_("process-nextick-args");function f(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}k.exports=u;var a,d=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?n:m.nextTick;u.WritableState=l;var r=_("core-util-is");r.inherits=_("inherits");var o={deprecate:_("util-deprecate")},i=_("./internal/streams/stream"),v=_("safe-buffer").Buffer,b=t.Uint8Array||function(){};var s,c=_("./internal/streams/destroy");function w(){}function l(e,t){a=a||_("./_stream_duplex"),e=e||{};var n=t instanceof a;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,o=e.writableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(o||0===o)?o:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(f=n,f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0,t)s=e,a=n,c=r,l=t,u=o,--a.pendingcb,c?(m.nextTick(u,l),m.nextTick(C,s,a),s._writableState.errorEmitted=!0,s.emit("error",l)):(u(l),s._writableState.errorEmitted=!0,s.emit("error",l),C(s,a));else{var i=y(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||h(e,n),r?d(p,e,n,i,o):p(e,n,i,o)}var s,a,c,l,u;var f}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function u(e){if(a=a||_("./_stream_duplex"),!(s.call(u,this)||this instanceof a))return new u(e);this._writableState=new l(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function x(e,t,n,r,o,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function p(e,t,n,r){var o,i;n||(o=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,o.emit("drain"))),t.pendingcb--,r(),C(e,t)}function h(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var s=0,a=!0;n;)(o[s]=n).isBuf||(a=!1),n=n.next,s+=1;o.allBuffers=a,x(e,t,!0,t.length,o,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new f(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,u=n.callback;if(x(e,t,!1,t.objectMode?1:c.length,c,l,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function g(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),C(t,n)})}function C(e,t){var n,r,o=y(t);return o&&(n=e,(r=t).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,m.nextTick(g,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),o}r.inherits(u,i),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===u&&(e&&e._writableState instanceof l)}})):s=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,n){var r,o,i,s,a,c,l,u,f,d,p,h=this._writableState,y=!1,g=!h.objectMode&&(r=e,v.isBuffer(r)||r instanceof b);return g&&!v.isBuffer(e)&&(o=e,e=v.from(o)),"function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=h.defaultEncoding),"function"!=typeof n&&(n=w),h.ended?(f=this,d=n,p=new Error("write after end"),f.emit("error",p),m.nextTick(d,p)):(g||(i=this,s=h,c=n,u=!(l=!0),null===(a=e)?u=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||s.objectMode||(u=new TypeError("Invalid non-string/buffer chunk")),u&&(i.emit("error",u),m.nextTick(c,u),l=!1),l))&&(h.pendingcb++,y=function(e,t,n,r,o,i){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=v.from(t,n));return t}(t,r,o);r!==s&&(n=!0,o="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,a,r,o,i);return c}(this,h,g,e,t,n)),y},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||h(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,C(e,t),n&&(t.finished?m.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=c.destroy,u.prototype._undestroy=c.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_("timers").setImmediate)},{"./_stream_duplex":48,"./internal/streams/destroy":54,"./internal/streams/stream":55,_process:46,"core-util-is":12,inherits:34,"process-nextick-args":56,"safe-buffer":58,timers:77,"util-deprecate":79}],53:[function(e,t,n){"use strict";var a=e("safe-buffer").Buffer,r=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return a.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,o=a.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=i.data,n=o,r=s,t.copy(n,r),s+=i.data.length,i=i.next;return o},e}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":58,util:7}],54:[function(e,t,n){"use strict";var i=e("process-nextick-args");function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return r||o?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(s,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i.nextTick(s,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":56}],55:[function(e,t,n){t.exports=e("events").EventEmitter},{events:27}],56:[function(e,t,n){(function(a){"use strict";!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(e);case 2:return a.nextTick(function(){e.call(null,t)});case 3:return a.nextTick(function(){e.call(null,t,n)});case 4:return a.nextTick(function(){e.call(null,t,n,r)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return a.nextTick(function(){e.apply(null,o)})}}}:t.exports=a}).call(this,e("_process"))},{_process:46}],57:[function(e,t,n){(((n=t.exports=e("./lib/_stream_readable.js")).Stream=n).Readable=n).Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":48,"./lib/_stream_passthrough.js":49,"./lib/_stream_readable.js":50,"./lib/_stream_transform.js":51,"./lib/_stream_writable.js":52}],58:[function(e,t,n){var r=e("buffer"),o=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,n),n.Buffer=s),i(o,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:8}],59:[function(c,u,e){(function(n){u.exports=s;var t=c("debug")("simple-peer"),r=c("get-browser-rtc"),e=c("inherits"),o=c("randombytes"),i=c("readable-stream");function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t._id=o(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),i.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,t._isChromium="undefined"!=typeof window&&!!window.webkitRTCPeerConnection,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||s.channelConfig,t.config=e.config||s.config,t.constraints=t._transformConstraints(e.constraints||s.constraints),t.offerConstraints=t._transformConstraints(e.offerConstraints||{}),t.answerConstraints=t._transformConstraints(e.answerConstraints||{}),t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=void 0===e.trickle||e.trickle,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:r(),!t._wrtc)throw"undefined"==typeof window?l("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):l("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!1,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new WeakMap,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},"addTrack"in t._pc&&(t.streams&&t.streams.forEach(function(e){t.addStream(e)}),t._pc.ontrack=function(e){t._onTrack(e)}),t.initiator&&t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function l(e,t){var n=new Error(e);return n.code=t,n}function a(){}e(s,i.Duplex),s.WEBRTC_SUPPORT=!!r(),s.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}]},s.constraints={},s.channelConfig={},Object.defineProperty(s.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),s.prototype.address=function(){return{port:this.localPort,family:"IPv4",address:this.localAddress}},s.prototype.signal=function(t){var n=this;if(n.destroyed)throw l("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}n._debug("signal()"),t.renegotiate&&(n._debug("got request to renegotiate"),n._needsNegotiation()),t.candidate&&(n._pc.remoteDescription&&n._pc.remoteDescription.type?n._addIceCandidate(t.candidate):n._pendingCandidates.push(t.candidate)),t.sdp&&n._pc.setRemoteDescription(new n._wrtc.RTCSessionDescription(t),function(){n.destroyed||(n._pendingCandidates.forEach(function(e){n._addIceCandidate(e)}),n._pendingCandidates=[],"offer"===n._pc.remoteDescription.type&&n._createAnswer())},function(e){n.destroy(l(e,"ERR_SET_REMOTE_DESCRIPTION"))}),t.sdp||t.candidate||t.renegotiate||n.destroy(l("signal() called with invalid signal data","ERR_SIGNALING"))},s.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),a,function(e){t.destroy(l(e,"ERR_ADD_ICE_CANDIDATE"))})}catch(e){t.destroy(l("error adding candidate: "+e.message,"ERR_ADD_ICE_CANDIDATE"))}},s.prototype.send=function(e){this._channel.send(e)},s.prototype.addStream=function(t){var n=this;n._debug("addStream()"),t.getTracks().forEach(function(e){n.addTrack(e,t)})},s.prototype.addTrack=function(e,t){this._debug("addTrack()");var n=this._pc.addTrack(e,t),r=this._senderMap.get(e)||new WeakMap;r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()},s.prototype.removeTrack=function(e,t){var n=this;n._debug("removeSender()");var r=n._senderMap.get(e),o=r?r.get(t):null;o||n.destroy(new Error("Cannot remove track that was never added."));try{n._pc.removeTrack(o)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?n._sendersAwaitingStable.push(o):n.destroy(e)}},s.prototype.removeStream=function(t){var n=this;n._debug("removeSenders()"),t.getTracks().forEach(function(e){n.removeTrack(e,t)})},s.prototype._needsNegotiation=function(){var e=this;e._debug("_needsNegotiation"),e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout(function(){e._batchedNegotiation=!1,e._debug("starting batched negotiation"),e.negotiate()},0))},s.prototype.negotiate=function(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),this._createOffer()):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0},s.prototype.destroy=function(e){this._destroy(e,function(){})},s.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,n._remoteTracks=null,n._remoteStreams=null,n._senderMap=null,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}if(n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"addTrack"in n._pc&&(n._pc.ontrack=null),n._pc.ondatachannel=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close"),t()}},s.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(l("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=65536),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(l(e,"ERR_DATA_CHANNEL"))}},s.prototype._read=function(){},s.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(l("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(r.connected){try{r.send(e)}catch(e){return r.destroy(l(e,"ERR_DATA_CHANNEL"))}65536<r._channel.bufferedAmount?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},s.prototype._onFinish=function(){var e=this;function t(){setTimeout(function(){e.destroy()},1e3)}e.destroyed||(e.connected?t():e.once("connect",t))},s.prototype._createOffer=function(){var n=this;n.destroyed||n._pc.createOffer(function(t){function e(){var e=n._pc.localDescription||t;n._debug("signal"),n.emit("signal",{type:e.type,sdp:e.sdp})}n.destroyed||(t.sdp=n.sdpTransform(t.sdp),n._pc.setLocalDescription(t,function(){if(n._debug("createOffer success"),n.destroyed)return;n.trickle||n._iceComplete?e():n.once("_iceComplete",e)},function(e){n.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))}))},function(e){n.destroy(l(e,"ERR_CREATE_OFFER"))},n.offerConstraints)},s.prototype._createAnswer=function(){var n=this;n.destroyed||n._pc.createAnswer(function(t){function e(){var e=n._pc.localDescription||t;n._debug("signal"),n.emit("signal",{type:e.type,sdp:e.sdp})}n.destroyed||(t.sdp=n.sdpTransform(t.sdp),n._pc.setLocalDescription(t,function(){if(n.destroyed)return;n.trickle||n._iceComplete?e():n.once("_iceComplete",e)},function(e){n.destroy(l(e,"ERR_SET_LOCAL_DESCRIPTION"))}))},function(e){n.destroy(l(e,"ERR_CREATE_ANSWER"))},n.answerConstraints)},s.prototype._onIceStateChange=function(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(l("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(new Error("Ice connection closed."))}},s.prototype.getStats=function(n){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(e){var t=[];e.forEach(function(e){t.push(e)}),n(null,t)},function(e){n(e)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(e){var t=[];e.forEach(function(e){t.push(e)}),n(null,t)},function(e){n(e)}):0<t._pc.getStats.length?t._pc.getStats(function(e){if(!t.destroyed){var r=[];e.result().forEach(function(t){var n={};t.names().forEach(function(e){n[e]=t.stat(e)}),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(n)}),n(null,r)}},function(e){n(e)}):n(null,[])},s.prototype._maybeReady=function(){var c=this;c._debug("maybeReady pc %s channel %s",c._pcReady,c._channelReady),!c.connected&&!c._connecting&&c._pcReady&&c._channelReady&&(c._connecting=!0,function a(){c.destroyed||c.getStats(function(e,t){if(!c.destroyed){e&&(t=[]);var r={},o={},n={},i=!1;if(t.forEach(function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(r[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(n[e.id]=e)}),t.forEach(function(e){"transport"===e.type&&e.selectedCandidatePairId&&s(n[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&s(e)}),i||Object.keys(n).length&&!Object.keys(o).length){if(c._connecting=!1,c.connected=!0,c._chunk){try{c.send(c._chunk)}catch(e){return c.destroy(l(e,"ERR_DATA_CHANNEL"))}c._chunk=null,c._debug('sent chunk from "write before connect"'),(0,c._cb)(c._cb=null)}"number"!=typeof c._channel.bufferedAmountLowThreshold&&(c._interval=setInterval(function(){c._onInterval()},150),c._interval.unref&&c._interval.unref()),c._debug("connect"),c.emit("connect")}else setTimeout(a,100)}function s(e){i=!0;var t=o[e.localCandidateId];t&&t.ip?(c.localAddress=t.ip,c.localPort=Number(t.port)):t&&t.ipAddress?(c.localAddress=t.ipAddress,c.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),c.localAddress=t[0],c.localPort=Number(t[1]));var n=r[e.remoteCandidateId];n&&n.ip?(c.remoteAddress=n.ip,c.remotePort=Number(n.port)):n&&n.ipAddress?(c.remoteAddress=n.ipAddress,c.remotePort=Number(n.portNumber)):"string"==typeof e.googRemoteAddress&&(n=e.googRemoteAddress.split(":"),c.remoteAddress=n[0],c.remotePort=Number(n[1])),c.remoteFamily="IPv4",c._debug("connect local: %s:%s remote: %s:%s",c.localAddress,c.localPort,c.remoteAddress,c.remotePort)}})}())},s.prototype._onInterval=function(){!this._cb||!this._channel||65536<this._channel.bufferedAmount||this._onChannelBufferedAmountLow()},s.prototype._onSignalingStateChange=function(){var t=this;t.destroyed||("stable"===t._pc.signalingState&&(t._isNegotiating=!1,t._debug("flushing sender queue",t._sendersAwaitingStable),t._sendersAwaitingStable.forEach(function(e){t.removeTrack(e),t._queuedNegotiation=!0}),t._sendersAwaitingStable=[],t._queuedNegotiation&&(t._debug("flushing negotiation queue"),t._queuedNegotiation=!1,t._needsNegotiation()),t._debug("negotiate"),t.emit("negotiate")),t._debug("signalingStateChange %s",t._pc.signalingState),t.emit("signalingStateChange",t._pc.signalingState))},s.prototype._onIceCandidate=function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(this._iceComplete=!0,this.emit("_iceComplete")))},s.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}},s.prototype._onChannelBufferedAmountLow=function(){!this.destroyed&&this._cb&&(this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount),(0,this._cb)(this._cb=null))},s.prototype._onChannelOpen=function(){this.connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())},s.prototype._onChannelClose=function(){this.destroyed||(this._debug("on channel close"),this.destroy())},s.prototype._onTrack=function(e){var n=this;n.destroyed||e.streams.forEach(function(t){n._debug("on track"),n.emit("track",e.track,t),n._remoteTracks.push({track:e.track,stream:t}),n._remoteStreams.some(function(e){return e.id===t.id})||(n._remoteStreams.push(t),setTimeout(function(){n.emit("stream",t)},0))})},s.prototype._debug=function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],t.apply(null,e)},s.prototype._transformConstraints=function(e){if(0===Object.keys(e).length)return e;if(!e.mandatory&&!e.optional||this._isChromium)return e.mandatory||e.optional||!this._isChromium?e:(void 0!==e.offerToReceiveVideo&&(e.OfferToReceiveVideo=e.offerToReceiveVideo,delete e.offerToReceiveVideo),void 0!==e.offerToReceiveAudio&&(e.OfferToReceiveAudio=e.offerToReceiveAudio,delete e.offerToReceiveAudio),{mandatory:e});var t=Object.assign({},e.optional,e.mandatory);return void 0!==t.OfferToReceiveVideo&&(t.offerToReceiveVideo=t.OfferToReceiveVideo,delete t.OfferToReceiveVideo),void 0!==t.OfferToReceiveAudio&&(t.offerToReceiveAudio=t.OfferToReceiveAudio,delete t.OfferToReceiveAudio),t}}).call(this,c("buffer").Buffer)},{buffer:8,debug:60,"get-browser-rtc":28,inherits:34,randombytes:47,"readable-stream":57}],60:[function(e,o,r){(function(t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&(e=console).log.apply(e,arguments)},r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+o.exports.humanize(this.diff),!this.useColors)return;var t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){var e;try{e=r.storage.getItem("debug")}catch(e){}!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG);return e},r.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage=function(){try{return localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.exports=e("./common")(r),o.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,e("_process"))},{"./common":61,_process:46}],61:[function(e,t,n){"use strict";t.exports=function(t){function n(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return l.colors[Math.abs(t)%l.colors.length]}function l(e){var a;function c(){if(c.enabled){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];var i=c,n=Number(new Date),r=n-(a||n);i.diff=r,i.prev=a,i.curr=n,a=n,o[0]=l.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n=l.formatters[t];if("function"==typeof n){var r=o[s];e=n.call(i,r),o.splice(s,1),s--}return e}),l.formatArgs.call(i,o),(i.log||l.log).apply(i,o)}}return c.namespace=e,c.enabled=l.enabled(e),c.useColors=l.useColors(),c.color=n(e),c.destroy=r,c.extend=o,"function"==typeof l.init&&l.init(c),l.instances.push(c),c}function r(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}function o(e,t){return l(this.namespace+(void 0===t?":":t)+e)}return((l.debug=l).default=l).coerce=function(e){return e instanceof Error?e.stack||e.message:e},l.disable=function(){l.enable("")},l.enable=function(e){var t;l.save(e),l.names=[],l.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(t=0;t<l.instances.length;t++){var o=l.instances[t];o.enabled=l.enabled(o.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=e("ms"),Object.keys(t).forEach(function(e){l[e]=t[e]}),l.instances=[],l.names=[],l.skips=[],l.formatters={},l.selectColor=n,l.enable(l.load()),l}},{ms:62}],62:[function(e,t,n){var r=864e5;function o(e,t,n,r){var o=1.5*n<=t;return Math.round(e/n)+" "+r+(o?"s":"")}t.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(r<=t)return o(e,t,r,"day");if(36e5<=t)return o(e,t,36e5,"hour");if(6e4<=t)return o(e,t,6e4,"minute");if(1e3<=t)return o(e,t,1e3,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(r<=t)return Math.round(e/r)+"d";if(36e5<=t)return Math.round(e/36e5)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],63:[function(e,t,n){var c=e("./url"),r=e("socket.io-parser"),l=e("./manager"),u=e("debug")("socket.io-client");t.exports=n=o;var f=n.managers={};function o(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r=c(e),o=r.source,i=r.id,s=r.path,a=f[i]&&s in f[i].nsps;return n=t.forceNew||t["force new connection"]||!1===t.multiplex||a?(u("ignoring socket cache for %s",o),l(o,t)):(f[i]||(u("new io instance for %s",o),f[i]=l(o,t)),f[i]),r.query&&!t.query&&(t.query=r.query),n.socket(r.path,t)}n.protocol=r.protocol,n.connect=o,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":64,"./socket":66,"./url":67,debug:68,"socket.io-parser":71}],64:[function(e,t,n){var c=e("engine.io-client"),i=e("./socket"),r=e("component-emitter"),o=e("socket.io-parser"),l=e("./on"),s=e("component-bind"),u=e("debug")("socket.io-client:manager"),a=e("indexof"),f=e("backo2"),d=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(t.exports=p).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},r(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(n,e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=c(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=l(t,"open",function(){r.onopen(),n&&n()}),i=l(t,"error",function(e){if(u("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),n){var t=new Error("Connection error");t.data=e,n(t)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var a=setTimeout(function(){u("connect attempt timed out after %d",s),o.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(o),this.subs.push(i),this},p.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(l(e,"data",s(this,"ondata"))),this.subs.push(l(e,"ping",s(this,"onping"))),this.subs.push(l(e,"pong",s(this,"onpong"))),this.subs.push(l(e,"error",s(this,"onerror"))),this.subs.push(l(e,"close",s(this,"onclose"))),this.subs.push(l(this.decoder,"decoded",s(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&o()}function o(){~a(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=a(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(n){u("writing packet %j",n);var r=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),r.encoding?r.packetBuffer.push(n):(r.encoding=!0,this.encoder.encode(n,function(e){for(var t=0;t<e.length;t++)r.engine.write(e[t],n.options);r.encoding=!1,r.processPacketQueue()}))},p.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":65,"./socket":66,backo2:3,"component-bind":9,"component-emitter":10,debug:68,"engine.io-client":13,indexof:33,"socket.io-parser":71}],65:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],66:[function(e,t,n){var o=e("socket.io-parser"),r=e("component-emitter"),i=e("to-array"),s=e("./on"),a=e("component-bind"),c=e("debug")("socket.io-client:socket"),l=e("parseqs"),u=e("has-binary2");t.exports=p;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=r.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=i(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?o.BINARY_EVENT:o.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:o.CONNECT,query:e})}else this.packet({type:o.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===o.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case o.CONNECT:this.onconnect();break;case o.EVENT:case o.BINARY_EVENT:this.onevent(e);break;case o.ACK:case o.BINARY_ACK:this.onack(e);break;case o.DISCONNECT:this.ondisconnect();break;case o.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(t){var n=this,r=!1;return function(){if(!r){r=!0;var e=i(arguments);c("sending ack %j",e),n.packet({type:u(e)?o.BINARY_ACK:o.ACK,id:t,data:e})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:o.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},{"./on":65,"component-bind":9,"component-emitter":10,debug:68,"has-binary2":29,parseqs:44,"socket.io-parser":71,"to-array":78}],67:[function(e,t,n){(function(o){var i=e("parseuri"),s=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e;t=t||o.location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),s("parse %s",e),n=i(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:68,parseuri:45}],68:[function(n,r,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,n("_process"))},{"./debug":69,_process:46}],69:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23,ms:43}],70:[function(n,e,r){(function(e){var u=n("isarray"),f=n("./is-buffer"),t=Object.prototype.toString,d="function"==typeof e.Blob||"[object BlobConstructor]"===t.call(e.Blob),p="function"==typeof e.File||"[object FileConstructor]"===t.call(e.File);r.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=function e(t,n){if(!t)return t;{if(f(t)){var r={_placeholder:!0,num:n.length};return n.push(t),r}if(u(t)){for(var o=new Array(t.length),i=0;i<t.length;i++)o[i]=e(t[i],n);return o}if("object"==typeof t&&!(t instanceof Date)){var o={};for(var s in t)o[s]=e(t[s],n);return o}}return t}(n,t),r.attachments=t.length,{packet:r,buffers:t}},r.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;{if(t&&t._placeholder)return n[t.num];if(u(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var o in t)t[o]=e(t[o],n)}return t}(e.data,t),e.attachments=void 0,e},r.removeBlobs=function(e,a){var c=0,l=e;!function e(t,n,r){if(!t)return t;if(d&&t instanceof Blob||p&&t instanceof File){c++;var o=new FileReader;o.onload=function(){r?r[n]=this.result:l=this.result,--c||a(l)},o.readAsArrayBuffer(t)}else if(u(t))for(var i=0;i<t.length;i++)e(t[i],i,t);else if("object"==typeof t&&!f(t))for(var s in t)e(t[s],s,t)}(l),c||a(l)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":72,isarray:75}],71:[function(e,t,c){var l=e("debug")("socket.io-parser"),n=e("component-emitter"),i=e("./binary"),u=e("isarray"),r=e("./is-buffer");function o(){}c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=o,c.Decoder=f;var s=c.ERROR+'"encode error"';function a(e){var t=""+e.type;if(c.BINARY_EVENT!==e.type&&c.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return s;t+=n}return l("encoded %j as %s",e,t),t}function f(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:c.ERROR,data:"parser error: "+e}}o.prototype.encode=function(e,t){var n,o;(l("encoding packet %j",e),c.BINARY_EVENT===e.type||c.BINARY_ACK===e.type)?(n=e,o=t,i.removeBlobs(n,function(e){var t=i.deconstructPacket(e),n=a(t.packet),r=t.buffers;r.unshift(n),o(r)})):t([a(e)])},n(f.prototype),f.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,n={type:Number(e.charAt(0))};if(null==c.types[n.type])return p("unknown packet type "+n.type);if(c.BINARY_EVENT===n.type||c.BINARY_ACK===n.type){for(var r="";"-"!==e.charAt(++t)&&(r+=e.charAt(t),t!=e.length););if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1))for(n.nsp="";++t;){var o=e.charAt(t);if(","===o)break;if(n.nsp+=o,t===e.length)break}else n.nsp="/";var i=e.charAt(t+1);if(""!==i&&Number(i)==i){for(n.id="";++t;){var o=e.charAt(t);if(null==o||Number(o)!=o){--t;break}if(n.id+=e.charAt(t),t===e.length)break}n.id=Number(n.id)}if(e.charAt(++t)){var s=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t)),a=!1!==s&&(n.type===c.ERROR||u(s));if(!a)return p("invalid payload");n.data=s}return l("decoded %s as %j",e,n),n}(e),c.BINARY_EVENT===t.type||c.BINARY_ACK===t.type?(this.reconstructor=new d(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!r(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length!==this.reconPack.attachments)return null;var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":70,"./is-buffer":72,"component-emitter":10,debug:73,isarray:75}],72:[function(e,i,t){(function(t){i.exports=function(e){return n&&t.Buffer.isBuffer(e)||r&&(e instanceof t.ArrayBuffer||o(e))};var n="function"==typeof t.Buffer&&"function"==typeof t.Buffer.isBuffer,r="function"==typeof t.ArrayBuffer,o=r&&"function"==typeof t.ArrayBuffer.isView?t.ArrayBuffer.isView:function(e){return e.buffer instanceof t.ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],73:[function(n,r,i){(function(t){function e(){var e;try{e=i.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(i=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},i.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+i.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,o=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n)},i.save=function(e){try{null==e?i.storage.removeItem("debug"):i.storage.debug=e}catch(e){}},i.load=e,i.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},i.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},i.enable(e())}).call(this,n("_process"))},{"./debug":74,_process:46}],74:[function(e,t,n){arguments[4][23][0].apply(n,arguments)},{dup:23,ms:43}],75:[function(e,t,n){arguments[4][30][0].apply(n,arguments)},{dup:30}],76:[function(e,t,n){"use strict";var r=e("safe-buffer").Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}(n.StringDecoder=i).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=s(t[r]);if(0<=o)return 0<o&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if(0<=(o=s(t[r])))return 0<o&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if(0<=(o=s(t[r])))return 0<o&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":58}],77:[function(c,e,l){(function(e,t){var r=c("process/browser.js").nextTick,n=Function.prototype.apply,o=Array.prototype.slice,i={},s=0;function a(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new a(n.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new a(n.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof e?e:function(e){var t=s++,n=!(arguments.length<2)&&o.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof t?t:function(e){delete i[e]}}).call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":46,timers:77}],78:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},{}],79:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],80:[function(e,t,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,s={},a=0,c=0;function l(e){for(var t="";t=o[e%i]+t,0<(e=Math.floor(e/i)););return t}function u(){var e=l(+new Date);return e!==r?(a=0,r=e):e+"."+l(a++)}for(;c<i;c++)s[o[c]]=c;u.encode=l,u.decode=function(e){var t=0;for(c=0;c<e.length;c++)t=t*i+s[e.charAt(c)];return t},t.exports=u},{}],81:[function(e,t,n){"use strict";var r=e("./lib/utils"),o=a(e("./lib/Game")),i=e("./lib/Room"),s=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var c=document.getElementById("my_name"),l=document.getElementById("host"),u=document.getElementById("join"),f=document.getElementById("copy_button"),d=document.getElementById("room_id"),p=document.getElementById("peers_ul"),h=document.getElementById("send"),y=document.getElementById("to_name"),g=document.getElementById("message"),m=document.getElementById("chat_messages"),v=document.getElementById("is_ready"),b=document.getElementById("message_form"),w=document.getElementById("start"),x="chat-message",C="chat-private-message",_="is-ready",k="start",S="fuchsia",A="red",E=new s.default;function B(e,t){var n=document.createElement("li"),r=R(e),o=document.createElement("input");o.setAttribute("id","checkbox-peer-"+e),o.setAttribute("type","checkbox"),t&&(r.style.color="mediumvioletred"),n.appendChild(r),n.appendChild(o),p.appendChild(n),p[e]=n,L([e," joined"].join("")),q(v.isReady)}function R(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,n=document.createElement("label");return n.innerHTML=e,n.addEventListener("click",function(){y.value=e,g.focus()}),n.style.cursor="pointer",t&&(n.style.color=t),n}function P(e){var t=p[e];p.removeChild(t),L([e," leaved"].join("")),D()}function T(e,t){document.getElementById("checkbox-peer-"+e).checked=t,D()}function M(e){L("Room connected."),E.on(i.E.PEER_JOINED,B),E.on(i.E.PEER_LEAVED,P),c.value=e}function F(){L("Room closed.")}function I(e){j(!1),L(e,A)}function O(e,t,n){var r=document.createElement("span"),o=R(e);r.textContent=t,n&&(o.style.color=S,r.style.color=S),N(r,o)}function N(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("li");t&&(n.appendChild(document.createTextNode("[")),n.appendChild(t),n.appendChild(document.createTextNode("]: "))),n.appendChild(e),m.insertBefore(n,m.firstChild)}function L(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"yellowgreen",n=document.createElement("span");n.style.color=t,n.textContent=e,N(n)}function j(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];l.disabled=e,u.disabled=e,""===c.value&&(c.value=(65536*(1+Math.random())|0).toString(16).substring(1)),E.setMyName(c.value),c.readOnly=e,d.readOnly=e}function D(){var e=!Array.from(document.querySelectorAll('[id^="checkbox-peer"]')).some(function(e){return!e.checked});return e&&L("all peers is ready."),w.disabled=!e,e}function q(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];v.isReady=e,v.innerHTML=e?"unReady":"Ready",E.sendToPeers(_,e),D()}function U(e,t){O(e,t,!1)}function K(e,t){O(e,t,!0)}function V(){E.off(i.E.ROOM_CREATED,M),E.off(i.E.ROOM_CLOSED,F),E.off(i.E.ROOM_ERROR,I),E.off(i.E.PEER_JOINED,B),E.off(i.E.PEER_LEAVED,P),E.peersOff(x,U),E.peersOff(C,K),E.peersOff(_,T),E.peersOff(k,V);var e=new o.default(E);e.start(),e.initPlayers()}E.on(i.E.ROOM_CREATED,M),E.on(i.E.ROOM_CLOSED,F),E.on(i.E.ROOM_ERROR,I),E.peersOn(x,U),E.peersOn(C,K),E.peersOn(_,T),E.peersOn(k,V),l.addEventListener("click",function(){j(),E.host(function(e){d.value=e}),w.style.display="inherit",B(c.value,!0),L("Waiting for other clients.")}),u.addEventListener("click",function(){j();var e=d.value;E.client(e),E.once(i.E.ROOM_CREATED,function(e){B(e,!1)}),L(["Connecting to room(",e,")..."].join(""))}),f.addEventListener("click",function(){(0,r.copyToClipboard)(d)}),h.addEventListener("click",function(){var e=g.value,t=y.value,n=document.createElement("span"),r=document.createElement("span");if(r.textContent=e,""!==t){if(t===c.value)return void L("You can't talk with yourself");if(!E.sendToSinglePeer(C,t,e))return void L([t," not in this chat."].join(""));n.appendChild(document.createTextNode("to")),n.appendChild(R(t)),n.style.color=S,r.style.color=S}else E.sendToPeers(x,e),n.appendChild(document.createTextNode("me"));N(r,n),g.value=""}),v.addEventListener("click",function(){var e=!v.isReady;q(document.getElementById("checkbox-peer-"+c.value).checked=e)}),b.addEventListener("submit",function(e){return e.preventDefault()}),w.addEventListener("click",function(){E.sendToPeers(k),V()})},{"./lib/Game":83,"./lib/Room":88,"./lib/utils":90}],82:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o,i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("events"),a=(o=s)&&o.__esModule?o:{default:o};var c=function(e){function t(o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.on("close",function(){i.emit("close")}),o.on("data",function(e){try{var t=JSON.parse(e),n=t.type,r=t.data;i.emit(n,r,o.otherName)}catch(e){console.error("data parse error",e)}}),i._peer=o,i.myName=o.myName,i.otherName=o.otherName,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"send",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=JSON.stringify({type:e,data:t});this._peer.send(n)}},{key:"off",value:function(){this.removeListener.apply(this,arguments)}}]),t}();n.default=c},{events:27}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("./Matter"),i=r(e("keyboardjs")),a=r(e("./Vector")),c=e("./utils");function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=Symbol("keys"),d="key-in",p=function(){function r(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){};u(this,r),this._x=e,this._y=t,this.fn=n}return o(r,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this.fn()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this.fn()}}]),r}(),h=function(){function t(e){var i=this;u(this,t),this.room=e,this.room.peersOn(d,function(e,t){var n=t.key,r=t.type;console.log(e,n,r)}),this.room.peersOn("location",function(e,t){var n=t.x,r=t.y,o=i.players[e];s.Body.setPosition(o,{x:n,y:r})})}return o(t,[{key:"initPlayers",value:function(){var t=this;this.players={},this.room.peers.forEach(function(e){return t._addPlayer(e.otherName)});var e=this._addPlayer(this.room.myName);this._setup(e)}},{key:"_addPlayer",value:function(e){console.log(e,"added");var t=(0,c.getRndInteger)(25,175),n=(0,c.getRndInteger)(25,175),r=s.Bodies.rectangle(t,n,20,20);return s.World.add(this.engine.world,[r]),this.players[e]=r}},{key:"_setup",value:function(t){var n=this;t.position=new p(t.position.x,t.position.y,function(){n.room.sendToPeers("location",{x:t.position.x,y:t.position.y})});var r={},o=function(t){r[t]=0;var e=function(e){e.preventRepeat(),r[t]=1,n.room.sendToPeers(d,{key:e.key,type:e.type})};return i.default.bind(t,e,function(e){r[t]=0,n.room.sendToPeers(d,{key:e.key,type:e.type})}),e};i.default.setContext("ingame"),i.default.withContext("ingame",function(){var e;t[f]=(l(e={},"a",o("a")),l(e,"w",o("w")),l(e,"d",o("d")),l(e,"s",o("s")),e)}),this.timer=setInterval(function(){var e=new a.default(-r.a+r.d,-r.w+r.s);0!==e.length&&(e.multiplyScalar(17e-5),s.Body.applyForce(t,t.position,e))},17)}},{key:"start",value:function(){var e=s.Engine.create(),t=s.Render.create({element:document.body,engine:e,options:{width:200,height:200}});e.world.gravity.y=0;var n=s.Bodies.rectangle(100,0,200,30,{isStatic:!0}),r=s.Bodies.rectangle(100,200,200,30,{isStatic:!0}),o=s.Bodies.rectangle(0,100,30,200,{isStatic:!0}),i=s.Bodies.rectangle(200,100,30,200,{isStatic:!0});s.World.add(e.world,[n,r,o,i]),s.Engine.run(e),s.Render.run(t),this.engine=e}}]),t}();n.default=h},{"./Matter":84,"./Vector":89,"./utils":90,keyboardjs:37}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MouseConstraint=n.Mouse=n.Composite=n.Vector=n.Body=n.Events=n.Bodies=n.World=n.Render=n.Engine=void 0;var r,o=e("matter-js"),i=(r=o)&&r.__esModule?r:{default:r};n.Engine=i.default.Engine,n.Render=i.default.Render,n.World=i.default.World,n.Bodies=i.default.Bodies,n.Events=i.default.Events,n.Body=i.default.Body,n.Vector=i.default.Vector,n.Composite=i.default.Composite,n.Mouse=i.default.Mouse,n.MouseConstraint=i.default.MouseConstraint},{"matter-js":42}],85:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=a(e("events")),s=a(e("./PeerHostSocket"));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,null,[{key:"listen",value:function(o,r){return new Promise(function(e,t){var n=new i.default;n.myName=o.myName,n.close=function(){},n.on("signal",function(e){var t=e.initiator,n=e.name,r=t?"peer-signal-host":"peer-signal-join"+n;o.send(r,e)}),o.on("peer-join",s.default._onJoin.bind(null,n,r)),o.on("peer-signal-join",s.default._onSignalJoin.bind(null,n)),o.on("peer-signal-host",s.default._onSignalHost.bind(null,n,r))})}}]),t}();n.default=c},{"./PeerHostSocket":86,events:27}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=s(e("simple-peer")),a=s(e("./CustomPeer")),i=s(e("socket.io-client"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.myName=e}return r(s,[{key:"_getExchanger",value:function(e){var t=(0,i.default)(window.location.toString());return t.on("join",s._onJoin.bind(this,t,e)),t.on("signal-join",s._onSignalJoin.bind(this,t)),t.on("signal-host",s._onSignalHost.bind(this,t,e)),t.myName=this.myName,t}},{key:"host",value:function(r,o){var i=this;return new Promise(function(e,t){var n=i._getExchanger(o);n.on("connect",function(){n.emit("host",i.myName,r)}),e(n)})}},{key:"join",value:function(e,t){var i=this;return new Promise(function(n,r){var o=i._getExchanger(t);o.emit("join",e,i.myName,function(e,t){e?r(e):(o.myName=t,n(o))})})}}],[{key:"_onJoin",value:function(e,t,n){console.log("hosting for "+n);var r=s._createPeer(!0,e,n);r.on("connect",function(){console.log("new peer connected"),t(new a.default(r))}),e.p=r}},{key:"_onSignalJoin",value:function(e,t){var n=t.signal;t.otherName;e.p.signal(n)}},{key:"_onSignalHost",value:function(e,t,n){var r=n.signal,o=n.otherName;console.log("joining "+o);var i=s._createPeer(!1,e,o);i.on("connect",function(){e.close(),t(new a.default(i))}),i.signal(r)}},{key:"_createPeer",value:function(t,n,e){var r=new o.default({initiator:t,trickle:!1});return r.myName=n.myName,console.log("my name is"+r.myName),r.otherName=e,r.on("signal",function(e){n.emit("signal",{signal:e,name:r.otherName,initiator:t},function(e){throw e})}),r.on("error",function(e){console.log("error",e)}),r}}]),s}();n.default=c},{"./CustomPeer":82,"simple-peer":59,"socket.io-client":63}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"link",value:function(r,o){var i=r.otherName,s=o.otherName,a="peer-signal-join"+i,c="peer-signal-host";console.log("try link",[i,s].join(", "));r.on(c,function e(t){var n=t.signal;t.name;o.send(c,{signal:n,otherName:i}),r.off(c,e)}),o.on(a,function e(t){var n=t.signal;t.name;r.send("peer-signal-join",{signal:n,otherName:s}),o.off(a,e)}),r.send("peer-join",s)}}]),e}();n.default=o},{}],88:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.E=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=u(e("./PeerToPeerExchanger")),i=u(e("./PeerHostSocket")),c=u(e("./PeerHostPeer")),l=u(e("events"));function u(e){return e&&e.__esModule?e:{default:e}}var f="joined",d={PEER_JOINED:"peer-joined",PEER_LEAVED:"peer-leaved",ROOM_CREATED:"room-created",ROOM_CLOSED:"room-closed",ROOM_ERROR:"room-error"},p="close",h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isHosting=void 0,e.isRoomCreated=!1,e.peers=[],e.peersOnHandlers=[],e.on(f,e._onPeerAdd.bind(e)),e.on("leaved",e._onPeerClose.bind(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),o(t,[{key:"setMyName",value:function(e){this.myName=e}},{key:"host",value:function(e){var t=this;this.isHosting=!0;new i.default(this.myName).host(e,function(e){t.emit(f,e)})}},{key:"client",value:function(e){var n=this;this.isHosting=!1;new i.default(this.myName).join(e,function e(t){n.emit(f,t),c.default.listen(t,e)}).catch(function(e){n.emit(d.ROOM_ERROR,e)})}},{key:"_onPeerAdd",value:function(o){var i=this;console.log(o.otherName,"joined"),0<this.peers.length?this.peers.forEach(function(e){a.default.link(e,o)}):(this.isRoomCreated||(this.emit(d.ROOM_CREATED,o.myName),this.isRoomCreated=!0),this.isHosting||(o.isHost=!0,o.on(p,function(){return i.emit(d.ROOM_CLOSED)}))),this.peersOnHandlers.forEach(function(e){var t=s(e,2),n=t[0],r=t[1];return i._peerOnListener(o,n,r)}),o.on(p,function(){return i.emit("leaved",o)}),this.peers.push(o),this.emit(d.PEER_JOINED,o.otherName,o.isHost)}},{key:"_onPeerClose",value:function(e){console.log(e.otherName,"leaved");var t=this.peers,n=t.indexOf(e);-1!==n&&t.splice(n,1),this.emit(d.PEER_LEAVED,e.otherName)}},{key:"sendToPeers",value:function(t){for(var n=this,e=arguments.length,r=Array(1<e?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];this.peers.forEach(function(e){return e.send.apply(e,[n._getPeerEventName(t)].concat(r))})}},{key:"sendToSinglePeer",value:function(e,t){var n=this.peers.find(function(e){return e.otherName===t});if(!n)return!1;for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return n.send.apply(n,[this._getPeerEventName(e)].concat(o)),!0}},{key:"peersOn",value:function(t,n){var r=this;this.on(t,n),this.peers.forEach(function(e){return r._peerOnListener(e,t,n)}),this.peersOnHandlers.push([t,n])}},{key:"peersOff",value:function(t,n){var r=this;this.off(t,n),this.peers.forEach(function(e){return r._peerOffListener(e,t,n)});var e=this.peersOnHandlers.indexOf(t);-1!==e&&this.peersOnHandlers.splice(e,1)}},{key:"_getPeerEventName",value:function(e){return"peer-"+e}},{key:"_peerOnListener",value:function(r,o,e){var i=this;r[e]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.emit.apply(i,[o,r.otherName].concat(t))},r.on(this._getPeerEventName(o),r[e])}},{key:"_peerOffListener",value:function(e,t,n){e.off(this._getPeerEventName(t),e[n])}},{key:"off",value:function(){this.removeListener.apply(this,arguments)}}]),t}();n.default=h,n.E=d},{"./PeerHostPeer":85,"./PeerHostSocket":86,"./PeerToPeerExchanger":87,events:27}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=180/Math.PI,i=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t}return r(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"invert",value:function(){return this.multiplyScalar(-1)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divideScalar",value:function(e){return 0!==e?this.multiplyScalar(1/e):(this.x=0,this.y=0,this)}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"normalize",value:function(){return this.divideScalar(this.length)}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSq(e))}},{key:"distanceToSq",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setLength",value:function(e){var t=this.length;return 0!==t&&e!==t&&this.multiplyScalar(e/t),this}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"rotate",value:function(e){var t=this.x;return this.x=this.x*Math.cos(e)-this.y*Math.sin(e),this.y=t*Math.sin(e)+this.y*Math.cos(e),this}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"rad",get:function(){return Math.atan2(this.y,this.x)}},{key:"deg",get:function(){return this.rad*o}}],[{key:"fromPoint",value:function(e){return new n(e.x,e.y)}},{key:"fromRadLength",value:function(e,t){return new n(t*Math.cos(e),t*Math.sin(e))}}]),n}();n.default=i},{}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.copyToClipboard=function(e){var t="_hiddenCopyText_",n="INPUT"===e.tagName||"TEXTAREA"===e.tagName,r=void 0,o=void 0,i=void 0;n?(r=(i=e).selectionStart,o=e.selectionEnd):((i=document.getElementById(t))||((i=document.createElement("textarea")).style.position="absolute",i.style.left="-9999px",i.style.top="0",i.id=t,document.body.appendChild(i)),i.textContent=e.textContent);var s=document.activeElement;i.focus(),i.setSelectionRange(0,i.value.length);var a=void 0;try{a=document.execCommand("copy")}catch(e){a=!1}s&&"function"==typeof s.focus&&s.focus();n?e.setSelectionRange(r,o):i.textContent="";return a},n.getRndInteger=function(e,t){return Math.floor(Math.random()*(t-e))+e}},{}]},{},[81]);
//# sourceMappingURL=bundle.min.js.map
